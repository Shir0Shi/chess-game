/*! For license information please see main.190e1cb8.js.LICENSE.txt */
!function(){var e={778:function(e,t,n){var r,i=n(704).default,a=function(e){var t="b",n="w",r=-1,a="p",o="n",u="b",s="r",c="q",l="k",f="pnbrqkPNBRQK",h="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",d=["1-0","0-1","1/2-1/2","*"],p={b:[16,32,17,15],w:[-16,-32,-17,-15]},v={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},y=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],m=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],g={p:0,n:1,b:2,r:3,q:4,k:5},k={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},b={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},w=7,x=6,I=1,E=0,T={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},_={w:[{square:T.a1,flag:b.QSIDE_CASTLE},{square:T.h1,flag:b.KSIDE_CASTLE}],b:[{square:T.a8,flag:b.QSIDE_CASTLE},{square:T.h8,flag:b.KSIDE_CASTLE}]},S=new Array(128),C={w:r,b:r},D=n,O={w:0,b:0},N=r,A=0,P=1,R=[],L={},M={};function F(e){"undefined"===typeof e&&(e=!1),S=new Array(128),C={w:r,b:r},D=n,O={w:0,b:0},N=r,A=0,P=1,R=[],e||(L={}),M={},K(z())}function U(){for(var e=[],t={},n=function(e){e in M&&(t[e]=M[e])};R.length>0;)e.push(ae());for(n(z());e.length>0;)ie(e.pop()),n(z());M=t}function j(){V(h)}function V(e,i){"undefined"===typeof i&&(i=!1);var a=e.split(/\s+/),o=a[0],u=0;if(!B(e).valid)return!1;F(i);for(var s=0;s<o.length;s++){var c=o.charAt(s);if("/"===c)u+=8;else if(-1!=="0123456789".indexOf(c))u+=parseInt(c,10);else{var l=c<"a"?n:t;W({type:c.toLowerCase(),color:l},ce(u)),u++}}return D=a[1],a[2].indexOf("K")>-1&&(O.w|=b.KSIDE_CASTLE),a[2].indexOf("Q")>-1&&(O.w|=b.QSIDE_CASTLE),a[2].indexOf("k")>-1&&(O.b|=b.KSIDE_CASTLE),a[2].indexOf("q")>-1&&(O.b|=b.QSIDE_CASTLE),N="-"===a[3]?r:T[a[3]],A=parseInt(a[4],10),P=parseInt(a[5],10),K(z()),!0}function B(e){var t="No errors.",n="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",i="5th field (half move counter) must be a non-negative integer.",a="4th field (en-passant square) is invalid.",o="3rd field (castling availability) is invalid.",u="2nd field (side to move) is invalid.",s="1st field (piece positions) does not contain 8 '/'-delimited rows.",c="1st field (piece positions) is invalid [consecutive numbers].",l="1st field (piece positions) is invalid [invalid piece].",f="1st field (piece positions) is invalid [row too large].",h="Illegal en-passant square",d=e.split(/\s+/);if(6!==d.length)return{valid:!1,error_number:1,error:n};if(isNaN(d[5])||parseInt(d[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(d[4])||parseInt(d[4],10)<0)return{valid:!1,error_number:3,error:i};if(!/^(-|[abcdefgh][36])$/.test(d[3]))return{valid:!1,error_number:4,error:a};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(d[2]))return{valid:!1,error_number:5,error:o};if(!/^(w|b)$/.test(d[1]))return{valid:!1,error_number:6,error:u};var p=d[0].split("/");if(8!==p.length)return{valid:!1,error_number:7,error:s};for(var v=0;v<p.length;v++){for(var y=0,m=!1,g=0;g<p[v].length;g++)if(isNaN(p[v][g])){if(!/^[prnbqkPRNBQK]$/.test(p[v][g]))return{valid:!1,error_number:9,error:l};y+=1,m=!1}else{if(m)return{valid:!1,error_number:8,error:c};y+=parseInt(p[v][g],10),m=!0}if(8!==y)return{valid:!1,error_number:10,error:f}}return"3"==d[3][1]&&"w"==d[1]||"6"==d[3][1]&&"b"==d[1]?{valid:!1,error_number:11,error:h}:{valid:!0,error_number:0,error:t}}function z(){for(var e=0,i="",a=T.a8;a<=T.h1;a++){if(null==S[a])e++;else{e>0&&(i+=e,e=0);var o=S[a].color,u=S[a].type;i+=o===n?u.toUpperCase():u.toLowerCase()}a+1&136&&(e>0&&(i+=e),a!==T.h1&&(i+="/"),e=0,a+=8)}var s="";O[n]&b.KSIDE_CASTLE&&(s+="K"),O[n]&b.QSIDE_CASTLE&&(s+="Q"),O[t]&b.KSIDE_CASTLE&&(s+="k"),O[t]&b.QSIDE_CASTLE&&(s+="q"),s=s||"-";var c=N===r?"-":ce(N);return[i,D,s,c,A,P].join(" ")}function q(e){for(var t=0;t<e.length;t+=2)"string"===typeof e[t]&&"string"===typeof e[t+1]&&(L[e[t]]=e[t+1]);return L}function K(e){R.length>0||(e!==h?(L.SetUp="1",L.FEN=e):(delete L.SetUp,delete L.FEN))}function G(e){var t=S[T[e]];return t?{type:t.type,color:t.color}:null}function W(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1===f.indexOf(e.type.toLowerCase()))return!1;if(!(t in T))return!1;var n=T[t];return(e.type!=l||C[e.color]==r||C[e.color]==n)&&(S[n]={type:e.type,color:e.color},e.type===l&&(C[e.color]=n),K(z()),!0)}function H(e,t,n,r,i){var o={color:D,from:t,to:n,flags:r,piece:e[t].type};return i&&(o.flags|=b.PROMOTION,o.promotion=i),e[n]?o.captured=e[n].type:r&b.EP_CAPTURE&&(o.captured=a),o}function Q(e){function t(e,t,n,r,i){if(e[n].type!==a||ue(r)!==E&&ue(r)!==w)t.push(H(e,n,r,i));else for(var l=[c,s,u,o],f=0,h=l.length;f<h;f++)t.push(H(e,n,r,i,l[f]))}var n=[],r=D,i=le(r),l={b:I,w:x},f=T.a8,h=T.h1,d=!1,y="undefined"===typeof e||!("legal"in e)||e.legal;if("undefined"!==typeof e&&"square"in e){if(!(e.square in T))return[];f=h=T[e.square],d=!0}for(var m=f;m<=h;m++)if(136&m)m+=7;else{var g=S[m];if(null!=g&&g.color===r)if(g.type===a){var k=m+p[r][0];if(null==S[k]){t(S,n,m,k,b.NORMAL);k=m+p[r][1];l[r]===ue(m)&&null==S[k]&&t(S,n,m,k,b.BIG_PAWN)}for(_=2;_<4;_++){136&(k=m+p[r][_])||(null!=S[k]&&S[k].color===i?t(S,n,m,k,b.CAPTURE):k===N&&t(S,n,m,N,b.EP_CAPTURE))}}else for(var _=0,A=v[g.type].length;_<A;_++){var P=v[g.type][_];for(k=m;!(136&(k+=P));){if(null!=S[k]){if(S[k].color===r)break;t(S,n,m,k,b.CAPTURE);break}if(t(S,n,m,k,b.NORMAL),"n"===g.type||"k"===g.type)break}}}if(!d||h===C[r]){if(O[r]&b.KSIDE_CASTLE){var R=(L=C[r])+2;null!=S[L+1]||null!=S[R]||J(i,C[r])||J(i,L+1)||J(i,R)||t(S,n,C[r],R,b.KSIDE_CASTLE)}if(O[r]&b.QSIDE_CASTLE){var L;R=(L=C[r])-2;null!=S[L-1]||null!=S[L-2]||null!=S[L-3]||J(i,C[r])||J(i,L-1)||J(i,R)||t(S,n,C[r],R,b.QSIDE_CASTLE)}}if(!y)return n;var M=[];for(m=0,A=n.length;m<A;m++)ie(n[m]),X(r)||M.push(n[m]),ae();return M}function Y(e,t){var n="";if(e.flags&b.KSIDE_CASTLE)n="O-O";else if(e.flags&b.QSIDE_CASTLE)n="O-O-O";else{var r=function(e,t){for(var n=Q({legal:!t}),r=e.from,i=e.to,a=e.piece,o=0,u=0,s=0,c=0,l=n.length;c<l;c++){var f=n[c].from,h=n[c].to;a===n[c].piece&&r!==f&&i===h&&(o++,ue(r)===ue(f)&&u++,se(r)===se(f)&&s++)}if(o>0)return u>0&&s>0?ce(r):s>0?ce(r).charAt(1):ce(r).charAt(0);return""}(e,t);e.piece!==a&&(n+=e.piece.toUpperCase()+r),e.flags&(b.CAPTURE|b.EP_CAPTURE)&&(e.piece===a&&(n+=ce(e.from)[0]),n+="x"),n+=ce(e.to),e.flags&b.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return ie(e),Z()&&(ee()?n+="#":n+="+"),ae(),n}function $(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function J(e,r){for(var i=T.a8;i<=T.h1;i++)if(136&i)i+=7;else if(null!=S[i]&&S[i].color===e){var o=S[i],u=i-r,s=u+119;if(y[s]&1<<g[o.type]){if(o.type===a){if(u>0){if(o.color===n)return!0}else if(o.color===t)return!0;continue}if("n"===o.type||"k"===o.type)return!0;for(var c=m[s],l=i+c,f=!1;l!==r;){if(null!=S[l]){f=!0;break}l+=c}if(!f)return!0}}return!1}function X(e){return J(le(e),C[e])}function Z(){return X(D)}function ee(){return Z()&&0===Q().length}function te(){return!Z()&&0===Q().length}function ne(){for(var e={},t=[],n=0,r=0,i=T.a8;i<=T.h1;i++)if(r=(r+1)%2,136&i)i+=7;else{var a=S[i];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===u&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[u]||1===e[o]))return!0;if(n===e[u]+2){var s=0,c=t.length;for(i=0;i<c;i++)s+=t[i];if(0===s||s===c)return!0}return!1}function re(){for(var e=[],t={},n=!1;;){var r=ae();if(!r)break;e.push(r)}for(;;){var i=z().split(" ").slice(0,4).join(" ");if(t[i]=i in t?t[i]+1:1,t[i]>=3&&(n=!0),!e.length)break;ie(e.pop())}return n}function ie(e){var n=D,i=le(n);if(function(e){R.push({move:e,kings:{b:C.b,w:C.w},turn:D,castling:{b:O.b,w:O.w},ep_square:N,half_moves:A,move_number:P})}(e),S[e.to]=S[e.from],S[e.from]=null,e.flags&b.EP_CAPTURE&&(D===t?S[e.to-16]=null:S[e.to+16]=null),e.flags&b.PROMOTION&&(S[e.to]={type:e.promotion,color:n}),S[e.to].type===l){if(C[S[e.to].color]=e.to,e.flags&b.KSIDE_CASTLE){var o=e.to-1,u=e.to+1;S[o]=S[u],S[u]=null}else if(e.flags&b.QSIDE_CASTLE){o=e.to+1,u=e.to-2;S[o]=S[u],S[u]=null}O[n]=""}if(O[n])for(var s=0,c=_[n].length;s<c;s++)if(e.from===_[n][s].square&&O[n]&_[n][s].flag){O[n]^=_[n][s].flag;break}if(O[i])for(s=0,c=_[i].length;s<c;s++)if(e.to===_[i][s].square&&O[i]&_[i][s].flag){O[i]^=_[i][s].flag;break}N=e.flags&b.BIG_PAWN?"b"===D?e.to-16:e.to+16:r,e.piece===a||e.flags&(b.CAPTURE|b.EP_CAPTURE)?A=0:A++,D===t&&P++,D=le(D)}function ae(){var e=R.pop();if(null==e)return null;var n=e.move;C=e.kings,D=e.turn,O=e.castling,N=e.ep_square,A=e.half_moves,P=e.move_number;var r,i,o=D,u=le(D);if(S[n.from]=S[n.to],S[n.from].type=n.piece,S[n.to]=null,n.flags&b.CAPTURE)S[n.to]={type:n.captured,color:u};else if(n.flags&b.EP_CAPTURE){var s;s=o===t?n.to-16:n.to+16,S[s]={type:a,color:u}}n.flags&(b.KSIDE_CASTLE|b.QSIDE_CASTLE)&&(n.flags&b.KSIDE_CASTLE?(r=n.to+1,i=n.to-1):n.flags&b.QSIDE_CASTLE&&(r=n.to-2,i=n.to+1),S[r]=S[i],S[i]=null);return n}function oe(e,t){var n=$(e);if(t){var r=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var i=r[1],a=r[2],o=r[3],u=r[4]}for(var s=Q(),c=0,l=s.length;c<l;c++){if(n===$(Y(s[c]))||t&&n===$(Y(s[c],!0)))return s[c];if(r&&(!i||i.toLowerCase()==s[c].piece)&&T[a]==s[c].from&&T[o]==s[c].to&&(!u||u.toLowerCase()==s[c].promotion))return s[c]}return null}function ue(e){return e>>4}function se(e){return 15&e}function ce(e){var t=se(e),n=ue(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function le(e){return e===n?t:n}function fe(e){var t=he(e);t.san=Y(t,!1),t.to=ce(t.to),t.from=ce(t.from);var n="";for(var r in b)b[r]&t.flags&&(n+=k[r]);return t.flags=n,t}function he(e){var t=e instanceof Array?[]:{};for(var n in e)t[n]="object"===typeof n?he(e[n]):e[n];return t}function de(e){return e.replace(/^\s+|\s+$/g,"")}function pe(e){for(var t=Q({legal:!1}),n=0,r=D,i=0,a=t.length;i<a;i++){if(ie(t[i]),!X(r))if(e-1>0)n+=pe(e-1);else n++;ae()}return n}return V("undefined"===typeof e?h:e),{WHITE:n,BLACK:t,PAWN:a,KNIGHT:o,BISHOP:u,ROOK:s,QUEEN:c,KING:l,SQUARES:function(){for(var e=[],t=T.a8;t<=T.h1;t++)136&t?t+=7:e.push(ce(t));return e}(),FLAGS:k,load:function(e){return V(e)},reset:function(){return j()},moves:function(e){for(var t=Q(e),n=[],r=0,i=t.length;r<i;r++)"undefined"!==typeof e&&"verbose"in e&&e.verbose?n.push(fe(t[r])):n.push(Y(t[r],!1));return n},in_check:function(){return Z()},in_checkmate:function(){return ee()},in_stalemate:function(){return te()},in_draw:function(){return A>=100||te()||ne()||re()},insufficient_material:function(){return ne()},in_threefold_repetition:function(){return re()},game_over:function(){return A>=100||ee()||te()||ne()||re()},validate_fen:function(e){return B(e)},fen:function(){return z()},board:function(){for(var e=[],t=[],n=T.a8;n<=T.h1;n++)null==S[n]?t.push(null):t.push({type:S[n].type,color:S[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e},pgn:function(e){var t="object"===typeof e&&"string"===typeof e.newline_char?e.newline_char:"\n",n="object"===typeof e&&"number"===typeof e.max_width?e.max_width:0,r=[],a=!1;for(var o in L)r.push("["+o+' "'+L[o]+'"]'+t),a=!0;a&&R.length&&r.push(t);for(var u=function(e){var t=M[z()];if("undefined"!==typeof t){var n=e.length>0?" ":"";e="".concat(e).concat(n,"{").concat(t,"}")}return e},s=[];R.length>0;)s.push(ae());var c=[],l="";for(0===s.length&&c.push(u(""));s.length>0;){l=u(l);var f=s.pop();R.length||"b"!==f.color?"w"===f.color&&(l.length&&c.push(l),l=P+"."):l=P+". ...",l=l+" "+Y(f,!1),ie(f)}if(l.length&&c.push(u(l)),"undefined"!==typeof L.Result&&c.push(L.Result),0===n)return r.join("")+c.join(" ");var h=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},d=function(e,a){var o,u=i(a.split(" "));try{for(u.s();!(o=u.n()).done;){var s=o.value;if(s){if(e+s.length>n){for(;h();)e--;r.push(t),e=0}r.push(s),e+=s.length,r.push(" "),e++}}}catch(c){u.e(c)}finally{u.f()}return h()&&e--,e},p=0;for(o=0;o<c.length;o++)p+c[o].length>n&&c[o].includes("{")?p=d(p,c[o]):(p+c[o].length>n&&0!==o?(" "===r[r.length-1]&&r.pop(),r.push(t),p=0):0!==o&&(r.push(" "),p++),r.push(c[o]),p+=c[o].length);return r.join("")},load_pgn:function(e,t){var n="undefined"!==typeof t&&"sloppy"in t&&t.sloppy;function r(e){return e.replace(/\\/g,"\\")}var i="object"===typeof t&&"string"===typeof t.newline_char?t.newline_char:"\r?\n",a=new RegExp("^(\\[((?:"+r(i)+")|.)*\\])(?:"+r(i)+"){2}"),o=a.test(e)?a.exec(e)[1]:"";j();var u=function(e,t){for(var n="object"===typeof t&&"string"===typeof t.newline_char?t.newline_char:"\r?\n",i={},a=e.split(new RegExp(r(n))),o="",u="",s=0;s<a.length;s++)o=a[s].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=a[s].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),de(o).length>0&&(i[o]=u);return i}(o,t);for(var s in u)q([s,u[s]]);if("1"===u.SetUp&&(!("FEN"in u)||!V(u.FEN,!0)))return!1;for(var c=function(e){return e=e.replace(new RegExp(r(i),"g")," "),"{".concat(function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/\%/g,"").toLowerCase()})).join("")}(e.slice(1,e.length-1)),"}")},l=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+e.match(/.{1,2}/g).join("%"))}(e.slice(1,e.length-1))},f=e.replace(o,"").replace(new RegExp("({[^}]*})+?|;([^".concat(r(i),"]*)"),"g"),(function(e,t,n){return void 0!==t?c(t):" "+c("{".concat(n.slice(1),"}"))})).replace(new RegExp(r(i),"g")," "),h=/(\([^\(\)]+\))+?/g;h.test(f);)f=f.replace(h,"");var p=de(f=(f=(f=f.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));p=p.join(",").replace(/,,+/g,",").split(",");for(var v="",y=0;y<p.length-1;y++){var m=l(p[y]);if(void 0===m){if(null==(v=oe(p[y],n)))return!1;ie(v)}else M[z()]=m}if(void 0!==(m=l(p[p.length-1]))&&(M[z()]=m,p.pop()),v=p[p.length-1],d.indexOf(v)>-1)(function(e){for(var t in e)return!0;return!1})(L)&&"undefined"===typeof L.Result&&q(["Result",v]);else{if(null==(v=oe(v,n)))return!1;ie(v)}return!0},header:function(){return q(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=T.a8;t<=T.h1;t++){if(0===se(t)&&(e+=" "+"87654321"[ue(t)]+" |"),null==S[t])e+=" . ";else{var r=S[t].type;e+=" "+(S[t].color===n?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return D},move:function(e,t){var n="undefined"!==typeof t&&"sloppy"in t&&t.sloppy,r=null;if("string"===typeof e)r=oe(e,n);else if("object"===typeof e)for(var i=Q(),a=0,o=i.length;a<o;a++)if(e.from===ce(i[a].from)&&e.to===ce(i[a].to)&&(!("promotion"in i[a])||e.promotion===i[a].promotion)){r=i[a];break}if(!r)return null;var u=fe(r);return ie(r),u},undo:function(){var e=ae();return e?fe(e):null},clear:function(){return F()},put:function(e,t){return W(e,t)},get:function(e){return G(e)},remove:function(e){return function(e){var t=G(e);return S[T[e]]=null,t&&t.type===l&&(C[t.color]=r),K(z()),t}(e)},perft:function(e){return pe(e)},square_color:function(e){if(e in T){var t=T[e];return(ue(t)+se(t))%2===0?"light":"dark"}return null},history:function(e){for(var t=[],n=[],r=("undefined"!==typeof e&&"verbose"in e&&e.verbose);R.length>0;)t.push(ae());for(;t.length>0;){var i=t.pop();r?n.push(fe(i)):n.push(Y(i)),ie(i)}return n},get_comment:function(){return M[z()]},set_comment:function(e){M[z()]=e.replace("{","[").replace("}","]")},delete_comment:function(){var e=M[z()];return delete M[z()],e},get_comments:function(){return U(),Object.keys(M).map((function(e){return{fen:e,comment:M[e]}}))},delete_comments:function(){return U(),Object.keys(M).map((function(e){var t=M[e];return delete M[e],{fen:e,comment:t}}))}}};t.Chess=a,void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(u[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(u[o[l]]=a[o[l]])}}return u}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function u(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var s=!1,c=null,l=!1,f=null,h={onError:function(e){s=!0,c=e}};function d(e,t,n,r,i,a,o,l,f){s=!1,c=null,u.apply(h,arguments)}var p=null,v=null,y=null;function m(e,t,n){var r=e.type||"unknown-event";e.currentTarget=y(n),function(e,t,n,r,i,a,u,h,p){if(d.apply(this,arguments),s){if(!s)throw Error(o(198));var v=c;s=!1,c=null,l||(l=!0,f=v)}}(r,t,void 0,e),e.currentTarget=null}var g=null,k={};function b(){if(g)for(var e in k){var t=k[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!x[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in x[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;if(I.hasOwnProperty(s))throw Error(o(99,s));I[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],u,s);i=!0}else a.registrationName?(w(a.registrationName,u,s),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function w(e,t,n){if(E[e])throw Error(o(100,e));E[e]=t,T[e]=t.eventTypes[n].dependencies}var x=[],I={},E={},T={};function _(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!k.hasOwnProperty(t)||k[t]!==r){if(k[t])throw Error(o(102,t));k[t]=r,n=!0}}n&&b()}var S=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,D=null,O=null;function N(e){if(e=v(e)){if("function"!==typeof C)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function A(e){D?O?O.push(e):O=[e]:D=e}function P(){if(D){var e=D,t=O;if(O=D=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function R(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var F=R,U=!1,j=!1;function V(){null===D&&null===O||(M(),P())}function B(e,t,n){if(j)return e(t,n);j=!0;try{return F(e,t,n)}finally{j=!1,V()}}var z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,K={},G={};function W(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){H[e]=new W(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];H[t]=new W(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){H[e]=new W(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){H[e]=new W(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){H[e]=new W(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){H[e]=new W(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){H[e]=new W(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){H[e]=new W(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){H[e]=new W(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);H[t]=new W(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);H[t]=new W(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);H[t]=new W(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){H[e]=new W(e,1,!1,e.toLowerCase(),null,!1)})),H.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){H[e]=new W(e,1,!1,e.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=H.hasOwnProperty(t)?H[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(G,e)||!q.call(K,e)&&(z.test(e)?G[e]=!0:(K[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ue=Z?Symbol.for("react.concurrent_mode"):60111,se=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,fe=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,de=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ye(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ye(e.type);case de:return ye(e.render);case he:if(e=1===e._status?e._result:null)return ye(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ye(e.type);n=null,r&&(n=ye(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(X,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=ke(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ke(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function xe(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ie(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ee(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Te(e,t){Ee(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Se(e,t.type,n):t.hasOwnProperty("defaultValue")&&Se(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function _e(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Se(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function De(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Ae(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,je,Ve=(je=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return je(e,t)}))}:je);function Be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},Ke={},Ge={};function We(e){if(Ke[e])return Ke[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Ke[e]=n[t];return e}S&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var He=We("animationend"),Qe=We("animationiteration"),Ye=We("animationstart"),$e=We("transitionend"),Je="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return nt(i),e;if(a===r)return nt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function ut(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)m(e,t[r],n[r]);else t&&m(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(at(e,ut),ot)throw Error(o(95));if(l)throw e=f,l=!1,f=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!S)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ft=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ft.length&&ft.push(e)}function dt(e,t,n,r){if(ft.length){var i=ft.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Pn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ct(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var u=null,s=0;s<x.length;s++){var c=x[s];c&&(c=c.extractEvents(r,t,a,i,o))&&(u=it(u,c))}st(u)}}function vt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Je.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var yt,mt,gt,kt=!1,bt=[],wt=null,xt=null,It=null,Et=new Map,Tt=new Map,_t=[],St="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Dt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Ot(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Nt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=Dt(t,n,r,i,a),null!==t&&(null!==(t=Rn(t))&&mt(t)),e):(e.eventSystemFlags|=r,e)}function At(e){var t=Pn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Pt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Rn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){Pt(e)&&n.delete(t)}function Lt(){for(kt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Rn(e.blockedOn))&&yt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==wt&&Pt(wt)&&(wt=null),null!==xt&&Pt(xt)&&(xt=null),null!==It&&Pt(It)&&(It=null),Et.forEach(Rt),Tt.forEach(Rt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==wt&&Mt(wt,e),null!==xt&&Mt(xt,e),null!==It&&Mt(It,e),Et.forEach(t),Tt.forEach(t),n=0;n<_t.length;n++)(r=_t[n]).blockedOn===e&&(r.blockedOn=null);for(;0<_t.length&&null===(n=_t[0]).blockedOn;)At(n),null===n.blockedOn&&_t.shift()}var Ut={},jt=new Map,Vt=new Map,Bt=["abort","abort",He,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",$e,"transitionEnd","waiting","waiting"];function zt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},Vt.set(r,t),jt.set(r,a),Ut[i]=a}}zt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),zt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),zt(Bt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<qt.length;Kt++)Vt.set(qt[Kt],0);var Gt=a.unstable_UserBlockingPriority,Wt=a.unstable_runWithPriority,Ht=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Vt.get(t);switch(void 0===r?2:r){case 0:r=$t.bind(null,t,1,e);break;case 1:r=Jt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function $t(e,t,n,r){U||M();var i=Xt,a=U;U=!0;try{L(i,e,t,n,r)}finally{(U=a)||V()}}function Jt(e,t,n,r){Wt(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(Ht)if(0<bt.length&&-1<St.indexOf(e))e=Dt(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Ot(e,r);else if(-1<St.indexOf(e))e=Dt(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return wt=Nt(wt,e,t,n,r,i),!0;case"dragenter":return xt=Nt(xt,e,t,n,r,i),!0;case"mouseover":return It=Nt(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Et.set(a,Nt(Et.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Tt.set(a,Nt(Tt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Ot(e,r),e=dt(e,r,null,t);try{B(pt,e)}finally{ht(e)}}}}function Zt(e,t,n,r){if(null!==(n=Pn(n=ct(r)))){var i=et(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=tt(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=dt(e,r,n,t);try{B(pt,e)}finally{ht(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function un(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Re;function cn(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=T[t];for(var r=0;r<t.length;r++)vt(t[r],e,n)}function ln(){}function fn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vn(){for(var e=window,t=fn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=fn((e=t.contentWindow).document)}return t}function yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn="$",gn="/$",kn="$?",bn="$!",wn=null,xn=null;function In(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function En(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Tn="function"===typeof setTimeout?setTimeout:void 0,_n="function"===typeof clearTimeout?clearTimeout:void 0;function Sn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===mn||n===bn||n===kn){if(0===t)return e;t--}else n===gn&&t++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),On="__reactInternalInstance$"+Dn,Nn="__reactEventHandlers$"+Dn,An="__reactContainere$"+Dn;function Pn(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[On]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[On])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function Rn(e){return!(e=e[On]||e[An])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Mn(e){return e[Nn]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Un(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function jn(e,t,n){(t=Un(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Vn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)jn(n[t],"captured",e);for(t=0;t<n.length;t++)jn(n[t],"bubbled",e)}}function Bn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Un(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function zn(e){e&&e.dispatchConfig.registrationName&&Bn(e._targetInst,null,e)}function qn(e){at(e,Vn)}var Kn=null,Gn=null,Wn=null;function Hn(){if(Wn)return Wn;var e,t,n=Gn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Wn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Yn(){return!1}function $n(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Yn,this.isPropagationStopped=Yn,this}function Jn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Xn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Jn,e.release=Xn}i($n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),$n.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},$n.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn($n);var er=$n.extend({data:null}),tr=$n.extend({data:null}),nr=[9,13,27,32],rr=S&&"CompositionEvent"in window,ir=null;S&&"documentMode"in document&&(ir=document.documentMode);var ar=S&&"TextEvent"in window&&!ir,or=S&&(!rr||ir&&8<ir&&11>=ir),ur=String.fromCharCode(32),sr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},cr=!1;function lr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var hr=!1;var dr={eventTypes:sr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var a=sr.compositionStart;break e;case"compositionend":a=sr.compositionEnd;break e;case"compositionupdate":a=sr.compositionUpdate;break e}a=void 0}else hr?lr(e,n)&&(a=sr.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=sr.compositionStart);return a?(or&&"ko"!==n.locale&&(hr||a!==sr.compositionStart?a===sr.compositionEnd&&hr&&(i=Hn()):(Gn="value"in(Kn=r)?Kn.value:Kn.textContent,hr=!0)),a=er.getPooled(a,t,n,r),i?a.data=i:null!==(i=fr(n))&&(a.data=i),qn(a),i=a):i=null,(e=ar?function(e,t){switch(e){case"compositionend":return fr(t);case"keypress":return 32!==t.which?null:(cr=!0,ur);case"textInput":return(e=t.data)===ur&&cr?null:e;default:return null}}(e,n):function(e,t){if(hr)return"compositionend"===e||!rr&&lr(e,t)?(e=Hn(),Wn=Gn=Kn=null,hr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return or&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(sr.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var yr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function mr(e,t,n){return(e=$n.getPooled(yr.change,e,t,n)).type="change",A(n),qn(e),e}var gr=null,kr=null;function br(e){st(e)}function wr(e){if(we(Ln(e)))return e}function xr(e,t){if("change"===e)return t}var Ir=!1;function Er(){gr&&(gr.detachEvent("onpropertychange",Tr),kr=gr=null)}function Tr(e){if("value"===e.propertyName&&wr(kr))if(e=mr(kr,e,ct(e)),U)st(e);else{U=!0;try{R(br,e)}finally{U=!1,V()}}}function _r(e,t,n){"focus"===e?(Er(),kr=n,(gr=t).attachEvent("onpropertychange",Tr)):"blur"===e&&Er()}function Sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return wr(kr)}function Cr(e,t){if("click"===e)return wr(t)}function Dr(e,t){if("input"===e||"change"===e)return wr(t)}S&&(Ir=lt("input")&&(!document.documentMode||9<document.documentMode));var Or={eventTypes:yr,_isInputEventSupported:Ir,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=xr;else if(vr(i))if(Ir)o=Dr;else{o=Sr;var u=_r}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Cr);if(o&&(o=o(e,t)))return mr(o,n,r);u&&u(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Se(i,"number",i.value)}},Nr=$n.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function Rr(){return Pr}var Lr=0,Mr=0,Fr=!1,Ur=!1,jr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Rr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,Ur?"mousemove"===e.type?e.screenY-t:0:(Ur=!0,0)}}),Vr=jr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Br={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},zr={eventTypes:Br,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Pn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var u=jr,s=Br.mouseLeave,c=Br.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(u=Vr,s=Br.pointerLeave,c=Br.pointerEnter,l="pointer");if(e=null==o?a:Ln(o),a=null==t?a:Ln(t),(s=u.getPooled(s,o,n,r)).type=l+"leave",s.target=e,s.relatedTarget=a,(n=u.getPooled(c,t,n,r)).type=l+"enter",n.target=a,n.relatedTarget=e,l=t,(r=o)&&l)e:{for(c=l,o=0,e=u=r;e;e=Fn(e))o++;for(e=0,t=c;t;t=Fn(t))e++;for(;0<o-e;)u=Fn(u),o--;for(;0<e-o;)c=Fn(c),e--;for(;o--;){if(u===c||u===c.alternate)break e;u=Fn(u),c=Fn(c)}u=null}else u=null;for(c=u,u=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)u.push(r),r=Fn(r);for(r=[];l&&l!==c&&(null===(o=l.alternate)||o!==c);)r.push(l),l=Fn(l);for(l=0;l<u.length;l++)Bn(u[l],"bubbled",s);for(l=r.length;0<l--;)Bn(r[l],"captured",n);return 0===(64&i)?[s]:[s,n]}};var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Kr=Object.prototype.hasOwnProperty;function Gr(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Kr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Wr=S&&"documentMode"in document&&11>=document.documentMode,Hr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Yr=null,$r=null,Jr=!1;function Xr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Jr||null==Qr||Qr!==fn(n)?null:("selectionStart"in(n=Qr)&&yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},$r&&Gr($r,n)?null:($r=n,(e=$n.getPooled(Hr.select,Yr,e,t)).type="select",e.target=Qr,qn(e),e))}var Zr={eventTypes:Hr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),a=T.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?Ln(t):window,e){case"focus":(vr(i)||"true"===i.contentEditable)&&(Qr=i,Yr=t,$r=null);break;case"blur":$r=Yr=Qr=null;break;case"mousedown":Jr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Jr=!1,Xr(n,r);case"selectionchange":if(Wr)break;case"keydown":case"keyup":return Xr(n,r)}return null}},ei=$n.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=$n.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oi=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ai[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Rr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ui=jr.extend({dataTransfer:null}),si=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Rr}),ci=$n.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),li=jr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),fi={eventTypes:Ut,extractEvents:function(e,t,n,r){var i=jt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=oi;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ui;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=si;break;case He:case Qe:case Ye:e=ei;break;case $e:e=ci;break;case"scroll":e=Nr;break;case"wheel":e=li;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Vr;break;default:e=$n}return qn(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Mn,v=Rn,y=Ln,_({SimpleEventPlugin:fi,EnterLeaveEventPlugin:zr,ChangeEventPlugin:Or,SelectEventPlugin:Zr,BeforeInputEventPlugin:dr});var hi=[],di=-1;function pi(e){0>di||(e.current=hi[di],hi[di]=null,di--)}function vi(e,t){di++,hi[di]=e.current,e.current=t}var yi={},mi={current:yi},gi={current:!1},ki=yi;function bi(e,t){var n=e.type.contextTypes;if(!n)return yi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function wi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xi(){pi(gi),pi(mi)}function Ii(e,t,n){if(mi.current!==yi)throw Error(o(168));vi(mi,t),vi(gi,n)}function Ei(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ye(t)||"Unknown",a));return i({},n,{},r)}function Ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yi,ki=mi.current,vi(mi,e),vi(gi,gi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ei(e,t,ki),r.__reactInternalMemoizedMergedChildContext=e,pi(gi),pi(mi),vi(mi,e)):pi(gi),vi(gi,n)}var Si=a.unstable_runWithPriority,Ci=a.unstable_scheduleCallback,Di=a.unstable_cancelCallback,Oi=a.unstable_requestPaint,Ni=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Li=a.unstable_NormalPriority,Mi=a.unstable_LowPriority,Fi=a.unstable_IdlePriority,Ui={},ji=a.unstable_shouldYield,Vi=void 0!==Oi?Oi:function(){},Bi=null,zi=null,qi=!1,Ki=Ni(),Gi=1e4>Ki?Ni:function(){return Ni()-Ki};function Wi(){switch(Ai()){case Pi:return 99;case Ri:return 98;case Li:return 97;case Mi:return 96;case Fi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Pi;case 98:return Ri;case 97:return Li;case 96:return Mi;case 95:return Fi;default:throw Error(o(332))}}function Qi(e,t){return e=Hi(e),Si(e,t)}function Yi(e,t,n){return e=Hi(e),Ci(e,t,n)}function $i(e){return null===Bi?(Bi=[e],zi=Ci(Pi,Xi)):Bi.push(e),Ui}function Ji(){if(null!==zi){var e=zi;zi=null,Di(e)}Xi()}function Xi(){if(!qi&&null!==Bi){qi=!0;var e=0;try{var t=Bi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(n){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ci(Pi,Ji),n}finally{qi=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function ea(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ta={current:null},na=null,ra=null,ia=null;function aa(){ia=ra=na=null}function oa(e){var t=ta.current;pi(ta),e.type._context._currentValue=t}function ua(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function sa(e,t){na=e,ia=ra=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Mo=!0),e.firstContext=null)}function ca(e,t){if(ia!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ia=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ra){if(null===na)throw Error(o(308));ra=t,na.dependencies={expirationTime:0,firstContext:t,responders:null}}else ra=ra.next=t;return e._currentValue}var la=!1;function fa(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ha(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function da(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function pa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function va(e,t){var n=e.alternate;null!==n&&ha(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ya(e,t,n,r){var a=e.updateQueue;la=!1;var o=a.baseQueue,u=a.shared.pending;if(null!==u){if(null!==o){var s=o.next;o.next=u.next,u.next=s}o=u,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=u))}if(null!==o){s=o.next;var c=a.baseState,l=0,f=null,h=null,d=null;if(null!==s)for(var p=s;;){if((u=p.expirationTime)<r){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=v,f=c):d=d.next=v,u>l&&(l=u)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),xs(u,p.suspenseConfig);e:{var y=e,m=p;switch(u=t,v=n,m.tag){case 1:if("function"===typeof(y=m.payload)){c=y.call(v,c,u);break e}c=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(u="function"===typeof(y=m.payload)?y.call(v,c,u):y)||void 0===u)break e;c=i({},c,u);break e;case 2:la=!0}}null!==p.callback&&(e.effectTag|=32,null===(u=a.effects)?a.effects=[p]:u.push(p))}if(null===(p=p.next)||p===s){if(null===(u=a.shared.pending))break;p=o.next=u.next,u.next=s,a.baseQueue=o=u,a.shared.pending=null}}null===d?f=c:d.next=h,a.baseState=f,a.baseQueue=d,Is(l),e.expirationTime=l,e.memoizedState=c}}function ma(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ga=$.ReactCurrentBatchConfig,ka=(new r.Component).refs;function ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var wa={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=cs(),i=ga.suspense;(i=da(r=ls(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),pa(e,i),fs(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=cs(),i=ga.suspense;(i=da(r=ls(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),pa(e,i),fs(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=cs(),r=ga.suspense;(r=da(n=ls(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),pa(e,r),fs(e,n)}};function xa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Gr(n,r)||!Gr(i,a))}function Ia(e,t,n){var r=!1,i=yi,a=t.contextType;return"object"===typeof a&&null!==a?a=ca(a):(i=wi(t)?ki:mi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):yi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=wa,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ea(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function Ta(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ka,fa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ca(a):(a=wi(t)?ki:mi.current,i.context=bi(e,a)),ya(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&wa.enqueueReplaceState(i,i.state,null),ya(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var _a=Array.isArray;function Sa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ka&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ca(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Da(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=qs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ws(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Sa(e,t,n),r.return=e,r):((r=Ks(n.type,n.key,n.props,null,e.mode,r)).ref=Sa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Gs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ws(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Ks(t.type,t.key,t.props,null,e.mode,n)).ref=Sa(e,null,t),n.return=e,n;case te:return(t=Hs(t,e.mode,n)).return=e,t}if(_a(t)||ve(t))return(t=Gs(t,e.mode,n,null)).return=e,t;Ca(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(_a(n)||ve(n))return null!==i?null:f(e,t,n,r,null);Ca(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||ve(r))return f(t,e=e.get(n)||null,r,i,null);Ca(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=ve(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ee:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===ne){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Sa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===ne?((r=Gs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ks(a.type,a.key,a.props,null,e.mode,s)).ref=Sa(e,r,a),s.return=e,e=s)}return u(e);case te:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Hs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ws(a,e.mode,s)).return=e,e=r),u(e);if(_a(a))return v(e,r,a,s);if(ve(a))return y(e,r,a,s);if(l&&Ca(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Oa=Da(!0),Na=Da(!1),Aa={},Pa={current:Aa},Ra={current:Aa},La={current:Aa};function Ma(e){if(e===Aa)throw Error(o(174));return e}function Fa(e,t){switch(vi(La,t),vi(Ra,e),vi(Pa,Aa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Pa),vi(Pa,t)}function Ua(){pi(Pa),pi(Ra),pi(La)}function ja(e){Ma(La.current);var t=Ma(Pa.current),n=Fe(t,e.type);t!==n&&(vi(Ra,e),vi(Pa,n))}function Va(e){Ra.current===e&&(pi(Pa),pi(Ra))}var Ba={current:0};function za(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===kn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qa(e,t){return{responder:e,props:t}}var Ka=$.ReactCurrentDispatcher,Ga=$.ReactCurrentBatchConfig,Wa=0,Ha=null,Qa=null,Ya=null,$a=!1;function Ja(){throw Error(o(321))}function Xa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function Za(e,t,n,r,i,a){if(Wa=a,Ha=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ka.current=null===e||null===e.memoizedState?Io:Eo,e=n(r,i),t.expirationTime===Wa){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Ya=Qa=null,t.updateQueue=null,Ka.current=To,e=n(r,i)}while(t.expirationTime===Wa)}if(Ka.current=xo,t=null!==Qa&&null!==Qa.next,Wa=0,Ya=Qa=Ha=null,$a=!1,t)throw Error(o(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ya?Ha.memoizedState=Ya=e:Ya=Ya.next=e,Ya}function to(){if(null===Qa){var e=Ha.alternate;e=null!==e?e.memoizedState:null}else e=Qa.next;var t=null===Ya?Ha.memoizedState:Ya.next;if(null!==t)Ya=t,Qa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qa=e).memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},null===Ya?Ha.memoizedState=Ya=e:Ya=Ya.next=e}return Ya}function no(e,t){return"function"===typeof t?t(e):t}function ro(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Qa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.expirationTime;if(l<Wa){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,l>Ha.expirationTime&&(Ha.expirationTime=l,Is(l))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),xs(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,qr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function io(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);qr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ao(e){var t=eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:no,lastRenderedState:e}).dispatch=wo.bind(null,Ha,e),[t.memoizedState,e]}function oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ha.updateQueue)?(t={lastEffect:null},Ha.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function uo(){return to().memoizedState}function so(e,t,n,r){var i=eo();Ha.effectTag|=e,i.memoizedState=oo(1|t,n,void 0,void 0===r?null:r)}function co(e,t,n,r){var i=to();r=void 0===r?null:r;var a=void 0;if(null!==Qa){var o=Qa.memoizedState;if(a=o.destroy,null!==r&&Xa(r,o.deps))return void oo(t,n,a,r)}Ha.effectTag|=e,i.memoizedState=oo(1|t,n,a,r)}function lo(e,t){return so(516,4,e,t)}function fo(e,t){return co(516,4,e,t)}function ho(e,t){return co(4,2,e,t)}function po(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,co(4,2,po.bind(null,t,e),n)}function yo(){}function mo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function go(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ko(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bo(e,t,n){var r=Wi();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=Ga.suspense;Ga.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ga.suspense=r}}))}function wo(e,t,n){var r=cs(),i=ga.suspense;i={expirationTime:r=ls(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ha||null!==a&&a===Ha)$a=!0,i.expirationTime=Wa,Ha.expirationTime=Wa;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.eagerReducer=a,i.eagerState=u,qr(u,o))return}catch(s){}fs(e,r)}}var xo={readContext:ca,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useLayoutEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useResponder:Ja,useDeferredValue:Ja,useTransition:Ja},Io={readContext:ca,useCallback:mo,useContext:ca,useEffect:lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,so(4,2,po.bind(null,t,e),n)},useLayoutEffect:function(e,t){return so(4,2,e,t)},useMemo:function(e,t){var n=eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=wo.bind(null,Ha,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eo().memoizedState=e},useState:ao,useDebugValue:yo,useResponder:qa,useDeferredValue:function(e,t){var n=ao(e),r=n[0],i=n[1];return lo((function(){var n=Ga.suspense;Ga.suspense=void 0===t?null:t;try{i(e)}finally{Ga.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ao(!1),n=t[0];return t=t[1],[mo(bo.bind(null,t,e),[t,e]),n]}},Eo={readContext:ca,useCallback:go,useContext:ca,useEffect:fo,useImperativeHandle:vo,useLayoutEffect:ho,useMemo:ko,useReducer:ro,useRef:uo,useState:function(){return ro(no)},useDebugValue:yo,useResponder:qa,useDeferredValue:function(e,t){var n=ro(no),r=n[0],i=n[1];return fo((function(){var n=Ga.suspense;Ga.suspense=void 0===t?null:t;try{i(e)}finally{Ga.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(no),n=t[0];return t=t[1],[go(bo.bind(null,t,e),[t,e]),n]}},To={readContext:ca,useCallback:go,useContext:ca,useEffect:fo,useImperativeHandle:vo,useLayoutEffect:ho,useMemo:ko,useReducer:io,useRef:uo,useState:function(){return io(no)},useDebugValue:yo,useResponder:qa,useDeferredValue:function(e,t){var n=io(no),r=n[0],i=n[1];return fo((function(){var n=Ga.suspense;Ga.suspense=void 0===t?null:t;try{i(e)}finally{Ga.suspense=n}}),[e,t]),r},useTransition:function(e){var t=io(no),n=t[0];return t=t[1],[go(bo.bind(null,t,e),[t,e]),n]}},_o=null,So=null,Co=!1;function Do(e,t){var n=Bs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Oo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function No(e){if(Co){var t=So;if(t){var n=t;if(!Oo(e,t)){if(!(t=Sn(n.nextSibling))||!Oo(e,t))return e.effectTag=-1025&e.effectTag|2,Co=!1,void(_o=e);Do(_o,n)}_o=e,So=Sn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Co=!1,_o=e}}function Ao(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;_o=e}function Po(e){if(e!==_o)return!1;if(!Co)return Ao(e),Co=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!En(t,e.memoizedProps))for(t=So;t;)Do(e,t),t=Sn(t.nextSibling);if(Ao(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===gn){if(0===t){So=Sn(e.nextSibling);break e}t--}else n!==mn&&n!==bn&&n!==kn||t++}e=e.nextSibling}So=null}}else So=_o?Sn(e.stateNode.nextSibling):null;return!0}function Ro(){So=_o=null,Co=!1}var Lo=$.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Na(t,null,n,r):Oa(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return sa(t,i),r=Za(e,t,n,r,a,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),tu(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||zs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ks(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Gr)(i,r)&&e.ref===t.ref)?tu(e,t,a):(t.effectTag|=1,(e=qs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,a){return null!==e&&Gr(e.memoizedProps,r)&&e.ref===t.ref&&(Mo=!1,i<a)?(t.expirationTime=e.expirationTime,tu(e,t,a)):zo(e,t,n,r,a)}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function zo(e,t,n,r,i){var a=wi(n)?ki:mi.current;return a=bi(t,a),sa(t,i),n=Za(e,t,n,r,a,i),null===e||Mo?(t.effectTag|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),tu(e,t,i))}function qo(e,t,n,r,i){if(wi(n)){var a=!0;Ti(t)}else a=!1;if(sa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ia(t,n,r),Ta(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ca(c):c=bi(t,c=wi(n)?ki:mi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ea(t,o,r,c),la=!1;var h=t.memoizedState;o.state=h,ya(t,r,o,i),s=t.memoizedState,u!==r||h!==s||gi.current||la?("function"===typeof l&&(ba(t,n,l,r),s=t.memoizedState),(u=la||xa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ha(e,t),u=t.memoizedProps,o.props=t.type===t.elementType?u:ea(t.type,u),s=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ca(c):c=bi(t,c=wi(n)?ki:mi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ea(t,o,r,c),la=!1,s=t.memoizedState,o.state=s,ya(t,r,o,i),h=t.memoizedState,u!==r||s!==h||gi.current||la?("function"===typeof l&&(ba(t,n,l,r),h=t.memoizedState),(l=la||xa(t,n,u,r,s,h,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){Bo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&_i(t,n,!1),tu(e,t,a);r=t.stateNode,Lo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Oa(t,e.child,null,a),t.child=Oa(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),Fa(e,t.containerInfo)}var Wo,Ho,Qo,Yo,$o={dehydrated:null,retryTime:0};function Jo(e,t,n){var r,i=t.mode,a=t.pendingProps,o=Ba.current,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),vi(Ba,1&o),null===e){if(void 0!==a.fallback&&No(t),u){if(u=a.fallback,(a=Gs(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Gs(u,i,n,null)).return=t,a.sibling=n,t.memoizedState=$o,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Na(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,u){if(a=a.fallback,(n=qs(e,e.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;return(i=qs(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=$o,t.child=n,i}return n=Oa(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=a.fallback,(a=Gs(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Gs(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=$o,t.child=a,n}return t.memoizedState=null,t.child=Oa(t,e,a.children,n)}function Xo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ua(e.return,t)}function Zo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function eu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ba.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Xo(e,n);else if(19===e.tag)Xo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vi(Ba,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===za(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===za(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zo(t,!0,n,null,a,t.lastEffect);break;case"together":Zo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function tu(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Is(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=qs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function nu(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ru(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return wi(t.type)&&xi(),null;case 3:return Ua(),pi(gi),pi(mi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Po(t)||(t.effectTag|=4),Ho(t),null;case 5:Va(t),n=Ma(La.current);var a=t.type;if(null!==e&&null!=t.stateNode)Qo(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ma(Pa.current),Po(t)){r=t.stateNode,a=t.type;var u=t.memoizedProps;switch(r[On]=t,r[Nn]=u,a){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Je.length;e++)Qt(Je[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Ie(r,u),Qt("invalid",r),cn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Qt("invalid",r),cn(n,"onChange");break;case"textarea":Ne(r,u),Qt("invalid",r),cn(n,"onChange")}for(var s in on(a,u),e=null,u)if(u.hasOwnProperty(s)){var c=u[s];"children"===s?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):E.hasOwnProperty(s)&&null!=c&&cn(n,s)}switch(a){case"input":be(r),_e(r,u,!0);break;case"textarea":be(r),Pe(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=Me(a)),e===sn?"script"===a?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(a,{is:r.is}):(e=s.createElement(a),"select"===a&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,a),e[On]=t,e[Nn]=r,Wo(e,t,!1,!1),t.stateNode=e,s=un(a,r),a){case"iframe":case"object":case"embed":Qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<Je.length;c++)Qt(Je[c],e);c=r;break;case"source":Qt("error",e),c=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),c=r;break;case"form":Qt("reset",e),Qt("submit",e),c=r;break;case"details":Qt("toggle",e),c=r;break;case"input":Ie(e,r),c=xe(e,r),Qt("invalid",e),cn(n,"onChange");break;case"option":c=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qt("invalid",e),cn(n,"onChange");break;case"textarea":Ne(e,r),c=Oe(e,r),Qt("invalid",e),cn(n,"onChange");break;default:c=r}on(a,c);var l=c;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?rn(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&Ve(e,f):"children"===u?"string"===typeof f?("textarea"!==a||""!==f)&&Be(e,f):"number"===typeof f&&Be(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(E.hasOwnProperty(u)?null!=f&&cn(n,u):null!=f&&J(e,u,f,s))}switch(a){case"input":be(e),_e(e,r,!1);break;case"textarea":be(e),Pe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?De(e,!!r.multiple,n,!1):null!=r.defaultValue&&De(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=ln)}In(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ma(La.current),Ma(Pa.current),Po(t)?(n=t.stateNode,r=t.memoizedProps,n[On]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[On]=t,t.stateNode=n)}return null;case 13:return pi(Ba),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Po(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ba.current)?qu===Pu&&(qu=Mu):(qu!==Pu&&qu!==Mu||(qu=Fu),0!==Qu&&null!==Vu&&($s(Vu,zu),Js(Vu,Qu)))),(n||r)&&(t.effectTag|=4),null);case 4:return Ua(),Ho(t),null;case 10:return oa(t),null;case 19:if(pi(Ba),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(u=r.rendering)){if(a)nu(r,!1);else if(qu!==Pu||null!==e&&0!==(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=za(u))){for(t.effectTag|=64,nu(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)u=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=u,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,u=e.dependencies,a.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return vi(Ba,1&Ba.current|2),t.child}u=u.sibling}}else{if(!a)if(null!==(e=za(u))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),nu(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Gi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,nu(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Gi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Gi(),n.sibling=null,t=Ba.current,vi(Ba,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function iu(e){switch(e.tag){case 1:wi(e.type)&&xi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ua(),pi(gi),pi(mi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Va(e),null;case 13:return pi(Ba),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(Ba),null;case 4:return Ua(),null;case 10:return oa(e),null;default:return null}}function au(e,t){return{value:e,source:t,stack:me(t)}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ho=function(){},Qo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u,s,c=t.stateNode;switch(Ma(Pa.current),e=null,n){case"input":o=xe(c,o),r=xe(c,r),e=[];break;case"option":o=Ce(c,o),r=Ce(c,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Oe(c,o),r=Oe(c,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(c.onclick=ln)}for(u in on(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u)for(s in c=o[u])c.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(E.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(e||(e=[]),e.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(u,l)):"children"===u?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(E.hasOwnProperty(u)?(null!=l&&cn(a,u),e||c===l||(e=[])):(e=e||[]).push(u,l))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Yo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ou="function"===typeof WeakSet?WeakSet:Set;function uu(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=me(n)),null!==n&&ye(n.type),t=t.value,null!==e&&1===e.tag&&ye(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function su(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ls(e,n)}else t.current=null}function cu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ea(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function lu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function fu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void fu(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:ea(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ma(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ma(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&In(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(o(163))}function du(e,t,n){switch("function"===typeof js&&js(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){Ls(i,a)}}e=e.next}while(e!==r)}))}break;case 1:su(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ls(e,n)}}(t,n);break;case 5:su(t);break;case 4:ku(e,t,n)}}function pu(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pu(t)}function vu(e){return 5===e.tag||3===e.tag||4===e.tag}function yu(e){e:{for(var t=e.return;null!==t;){if(vu(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Be(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?mu(e,n,t):gu(e,n,t)}function mu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ln));else if(4!==r&&null!==(e=e.child))for(mu(e,t,n),e=e.sibling;null!==e;)mu(e,t,n),e=e.sibling}function gu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(gu(e,t,n),e=e.sibling;null!==e;)gu(e,t,n),e=e.sibling}function ku(e,t,n){for(var r,i,a=t,u=!1;;){if(!u){u=a.return;e:for(;;){if(null===u)throw Error(o(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,l=n,f=c;;)if(du(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(du(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function bu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void lu(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ee(n,r),un(e,i),t=un(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?rn(n,s):"dangerouslySetInnerHTML"===u?Ve(n,s):"children"===u?Be(n,s):J(n,u,s,t)}switch(e){case"input":Te(n,r);break;case"textarea":Ae(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?De(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?De(n,!!r.multiple,r.defaultValue,!0):De(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,$u=Gi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void wu(t);case 19:return void wu(t)}throw Error(o(163))}function wu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ou),t.forEach((function(t){var r=Fs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var xu="function"===typeof WeakMap?WeakMap:Map;function Iu(e,t,n){(n=da(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zu||(Zu=!0,es=r),uu(e,t)},n}function Eu(e,t,n){(n=da(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return uu(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===ts?ts=new Set([this]):ts.add(this),uu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Tu,_u=Math.ceil,Su=$.ReactCurrentDispatcher,Cu=$.ReactCurrentOwner,Du=0,Ou=8,Nu=16,Au=32,Pu=0,Ru=1,Lu=2,Mu=3,Fu=4,Uu=5,ju=Du,Vu=null,Bu=null,zu=0,qu=Pu,Ku=null,Gu=1073741823,Wu=1073741823,Hu=null,Qu=0,Yu=!1,$u=0,Ju=500,Xu=null,Zu=!1,es=null,ts=null,ns=!1,rs=null,is=90,as=null,os=0,us=null,ss=0;function cs(){return(ju&(Nu|Au))!==Du?1073741821-(Gi()/10|0):0!==ss?ss:ss=1073741821-(Gi()/10|0)}function ls(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Wi();if(0===(4&t))return 99===r?1073741823:1073741822;if((ju&Nu)!==Du)return zu;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Vu&&e===zu&&--e,e}function fs(e,t){if(50<os)throw os=0,us=null,Error(o(185));if(null!==(e=hs(e,t))){var n=Wi();1073741823===t?(ju&Ou)!==Du&&(ju&(Nu|Au))===Du?ys(e):(ps(e),ju===Du&&Ji()):ps(e),(4&ju)===Du||98!==n&&99!==n||(null===as?as=new Map([[e,t]]):(void 0===(n=as.get(e))||n>t)&&as.set(e,t))}}function hs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Vu===i&&(Is(t),qu===Fu&&$s(i,zu)),Js(i,t)),i}function ds(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Ys(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function ps(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=$i(ys.bind(null,e));else{var t=ds(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=cs();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ui&&Di(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?$i(ys.bind(null,e)):Yi(r,vs.bind(null,e),{timeout:10*(1073741821-t)-Gi()}),e.callbackNode=t}}}function vs(e,t){if(ss=0,t)return Xs(e,t=cs()),ps(e),null;var n=ds(e);if(0!==n){if(t=e.callbackNode,(ju&(Nu|Au))!==Du)throw Error(o(327));if(As(),e===Vu&&n===zu||ks(e,n),null!==Bu){var r=ju;ju|=Nu;for(var i=ws();;)try{Ts();break}catch(s){bs(e,s)}if(aa(),ju=r,Su.current=i,qu===Ru)throw t=Ku,ks(e,n),$s(e,n),ps(e),t;if(null===Bu)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=qu,Vu=null,r){case Pu:case Ru:throw Error(o(345));case Lu:Xs(e,2<n?2:n);break;case Mu:if($s(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cs(i)),1073741823===Gu&&10<(i=$u+Ju-Gi())){if(Yu){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,ks(e,n);break}}if(0!==(a=ds(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Tn(Ds.bind(null,e),i);break}Ds(e);break;case Fu:if($s(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cs(i)),Yu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,ks(e,n);break}if(0!==(i=ds(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Wu?r=10*(1073741821-Wu)-Gi():1073741823===Gu?r=0:(r=10*(1073741821-Gu)-5e3,0>(r=(i=Gi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_u(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Tn(Ds.bind(null,e),r);break}Ds(e);break;case Uu:if(1073741823!==Gu&&null!==Hu){a=Gu;var u=Hu;if(0>=(r=0|u.busyMinDurationMs)?r=0:(i=0|u.busyDelayMs,r=(a=Gi()-(10*(1073741821-a)-(0|u.timeoutMs||5e3)))<=i?0:i+r-a),10<r){$s(e,n),e.timeoutHandle=Tn(Ds.bind(null,e),r);break}}Ds(e);break;default:throw Error(o(329))}if(ps(e),e.callbackNode===t)return vs.bind(null,e)}}return null}function ys(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(ju&(Nu|Au))!==Du)throw Error(o(327));if(As(),e===Vu&&t===zu||ks(e,t),null!==Bu){var n=ju;ju|=Nu;for(var r=ws();;)try{Es();break}catch(i){bs(e,i)}if(aa(),ju=n,Su.current=r,qu===Ru)throw n=Ku,ks(e,t),$s(e,t),ps(e),n;if(null!==Bu)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Vu=null,Ds(e),ps(e)}return null}function ms(e,t){var n=ju;ju|=1;try{return e(t)}finally{(ju=n)===Du&&Ji()}}function gs(e,t){var n=ju;ju&=-2,ju|=Ou;try{return e(t)}finally{(ju=n)===Du&&Ji()}}function ks(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,_n(n)),null!==Bu)for(n=Bu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&xi();break;case 3:Ua(),pi(gi),pi(mi);break;case 5:Va(r);break;case 4:Ua();break;case 13:case 19:pi(Ba);break;case 10:oa(r)}n=n.return}Vu=e,Bu=qs(e.current,null),zu=t,qu=Pu,Ku=null,Wu=Gu=1073741823,Hu=null,Qu=0,Yu=!1}function bs(e,t){for(;;){try{if(aa(),Ka.current=xo,$a)for(var n=Ha.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wa=0,Ya=Qa=Ha=null,$a=!1,null===Bu||null===Bu.return)return qu=Ru,Ku=t,Bu=null;e:{var i=e,a=Bu.return,o=Bu,u=t;if(t=zu,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var l=0!==(1&Ba.current),f=a;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var y=new Set;y.add(s),f.updateQueue=y}else v.add(s);if(0===(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var m=da(1073741823,null);m.tag=2,pa(o,m)}o.expirationTime=1073741823;break e}u=void 0,o=t;var g=i.pingCache;if(null===g?(g=i.pingCache=new xu,u=new Set,g.set(s,u)):void 0===(u=g.get(s))&&(u=new Set,g.set(s,u)),!u.has(o)){u.add(o);var k=Ms.bind(null,i,s,o);s.then(k,k)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);u=Error((ye(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(o))}qu!==Uu&&(qu=Lu),u=au(u,o),f=a;do{switch(f.tag){case 3:s=u,f.effectTag|=4096,f.expirationTime=t,va(f,Iu(f,s,t));break e;case 1:s=u;var b=f.type,w=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===ts||!ts.has(w)))){f.effectTag|=4096,f.expirationTime=t,va(f,Eu(f,s,t));break e}}f=f.return}while(null!==f)}Bu=Ss(Bu)}catch(x){t=x;continue}break}}function ws(){var e=Su.current;return Su.current=xo,null===e?xo:e}function xs(e,t){e<Gu&&2<e&&(Gu=e),null!==t&&e<Wu&&2<e&&(Wu=e,Hu=t)}function Is(e){e>Qu&&(Qu=e)}function Es(){for(;null!==Bu;)Bu=_s(Bu)}function Ts(){for(;null!==Bu&&!ji();)Bu=_s(Bu)}function _s(e){var t=Tu(e.alternate,e,zu);return e.memoizedProps=e.pendingProps,null===t&&(t=Ss(e)),Cu.current=null,t}function Ss(e){Bu=e;do{var t=Bu.alternate;if(e=Bu.return,0===(2048&Bu.effectTag)){if(t=ru(t,Bu,zu),1===zu||1!==Bu.childExpirationTime){for(var n=0,r=Bu.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Bu.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Bu.firstEffect),null!==Bu.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Bu.firstEffect),e.lastEffect=Bu.lastEffect),1<Bu.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Bu:e.firstEffect=Bu,e.lastEffect=Bu))}else{if(null!==(t=iu(Bu)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Bu.sibling))return t;Bu=e}while(null!==Bu);return qu===Pu&&(qu=Uu),null}function Cs(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Ds(e){var t=Wi();return Qi(99,Os.bind(null,e,t)),null}function Os(e,t){do{As()}while(null!==rs);if((ju&(Nu|Au))!==Du)throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Cs(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Vu&&(Bu=Vu=null,zu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=ju;ju|=Au,Cu.current=null,wn=Ht;var u=vn();if(yn(u)){if("selectionStart"in u)var s={start:u.selectionStart,end:u.selectionEnd};else e:{var c=(s=(s=u.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(c&&0!==c.rangeCount){s=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch(_){s=null;break e}var h=0,d=-1,p=-1,v=0,y=0,m=u,g=null;t:for(;;){for(var k;m!==s||0!==l&&3!==m.nodeType||(d=h+l),m!==f||0!==c&&3!==m.nodeType||(p=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(k=m.firstChild);)g=m,m=k;for(;;){if(m===u)break t;if(g===s&&++v===l&&(d=h),g===f&&++y===c&&(p=h),null!==(k=m.nextSibling))break;g=(m=g).parentNode}m=k}s=-1===d||-1===p?null:{start:d,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;xn={activeElementDetached:null,focusedElem:u,selectionRange:s},Ht=!1,Xu=i;do{try{Ns()}catch(_){if(null===Xu)throw Error(o(330));Ls(Xu,_),Xu=Xu.nextEffect}}while(null!==Xu);Xu=i;do{try{for(u=e,s=t;null!==Xu;){var b=Xu.effectTag;if(16&b&&Be(Xu.stateNode,""),128&b){var w=Xu.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:yu(Xu),Xu.effectTag&=-3;break;case 6:yu(Xu),Xu.effectTag&=-3,bu(Xu.alternate,Xu);break;case 1024:Xu.effectTag&=-1025;break;case 1028:Xu.effectTag&=-1025,bu(Xu.alternate,Xu);break;case 4:bu(Xu.alternate,Xu);break;case 8:ku(u,l=Xu,s),pu(l)}Xu=Xu.nextEffect}}catch(_){if(null===Xu)throw Error(o(330));Ls(Xu,_),Xu=Xu.nextEffect}}while(null!==Xu);if(x=xn,w=vn(),b=x.focusedElem,s=x.selectionRange,w!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==s&&yn(b)&&(w=s.start,void 0===(x=s.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),l=b.textContent.length,u=Math.min(s.start,l),s=void 0===s.end?u:Math.min(s.end,l),!x.extend&&u>s&&(l=s,s=u,u=l),l=dn(b,u),f=dn(b,s),l&&f&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==f.node||x.focusOffset!==f.offset)&&((w=w.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),u>s?(x.addRange(w),x.extend(f.node,f.offset)):(w.setEnd(f.node,f.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ht=!!wn,xn=wn=null,e.current=n,Xu=i;do{try{for(b=e;null!==Xu;){var I=Xu.effectTag;if(36&I&&hu(b,Xu.alternate,Xu),128&I){w=void 0;var E=Xu.ref;if(null!==E){var T=Xu.stateNode;Xu.tag,w=T,"function"===typeof E?E(w):E.current=w}}Xu=Xu.nextEffect}}catch(_){if(null===Xu)throw Error(o(330));Ls(Xu,_),Xu=Xu.nextEffect}}while(null!==Xu);Xu=null,Vi(),ju=a}else e.current=n;if(ns)ns=!1,rs=e,is=t;else for(Xu=i;null!==Xu;)t=Xu.nextEffect,Xu.nextEffect=null,Xu=t;if(0===(t=e.firstPendingTime)&&(ts=null),1073741823===t?e===us?os++:(os=0,us=e):os=0,"function"===typeof Us&&Us(n.stateNode,r),ps(e),Zu)throw Zu=!1,e=es,es=null,e;return(ju&Ou)!==Du||Ji(),null}function Ns(){for(;null!==Xu;){var e=Xu.effectTag;0!==(256&e)&&cu(Xu.alternate,Xu),0===(512&e)||ns||(ns=!0,Yi(97,(function(){return As(),null}))),Xu=Xu.nextEffect}}function As(){if(90!==is){var e=97<is?97:is;return is=90,Qi(e,Ps)}}function Ps(){if(null===rs)return!1;var e=rs;if(rs=null,(ju&(Nu|Au))!==Du)throw Error(o(331));var t=ju;for(ju|=Au,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:lu(5,n),fu(5,n)}}catch(r){if(null===e)throw Error(o(330));Ls(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return ju=t,Ji(),!0}function Rs(e,t,n){pa(e,t=Iu(e,t=au(n,t),1073741823)),null!==(e=hs(e,1073741823))&&ps(e)}function Ls(e,t){if(3===e.tag)Rs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ts||!ts.has(r))){pa(n,e=Eu(n,e=au(t,e),1073741823)),null!==(n=hs(n,1073741823))&&ps(n);break}}n=n.return}}function Ms(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Vu===e&&zu===n?qu===Fu||qu===Mu&&1073741823===Gu&&Gi()-$u<Ju?ks(e,zu):Yu=!0:Ys(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,ps(e)))}function Fs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ls(t=cs(),e,null)),null!==(e=hs(e,t))&&ps(e)}Tu=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||gi.current)Mo=!0;else{if(r<n){switch(Mo=!1,t.tag){case 3:Go(t),Ro();break;case 5:if(ja(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:wi(t.type)&&Ti(t);break;case 4:Fa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,vi(ta,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Jo(e,t,n):(vi(Ba,1&Ba.current),null!==(t=tu(e,t,n))?t.sibling:null);vi(Ba,1&Ba.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return eu(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),vi(Ba,Ba.current),!r)return null}return tu(e,t,n)}Mo=!1}}else Mo=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,mi.current),sa(t,n),i=Za(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,wi(r)){var a=!0;Ti(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ba(t,r,u,e),i.updater=wa,t.stateNode=i,i._reactInternalFiber=t,Ta(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return zs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===fe)return 14}return 2}(i),e=ea(i,e),a){case 0:t=zo(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,ea(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,zo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 1:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ha(e,t),ya(t,r,null,n),(r=t.memoizedState.element)===i)Ro(),t=tu(e,t,n);else{if((i=t.stateNode.hydrate)&&(So=Sn(t.stateNode.containerInfo.firstChild),_o=t,i=Co=!0),i)for(n=Na(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fo(e,t,r,n),Ro();t=t.child}return t;case 5:return ja(t),null===e&&No(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,En(r,i)?u=null:null!==a&&En(r,a)&&(t.effectTag|=16),Bo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fo(e,t,u,n),t=t.child),t;case 6:return null===e&&No(t),null;case 13:return Jo(e,t,n);case 4:return Fa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Oa(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:ea(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(vi(ta,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=qr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!gi.current){t=tu(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=da(n,null)).tag=2,pa(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),ua(s.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,sa(t,n),r=r(i=ca(i,a.unstable_observedBits)),t.effectTag|=1,Fo(e,t,r,n),t.child;case 14:return a=ea(i=t.type,t.pendingProps),jo(e,t,i,a=ea(i.type,a),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ea(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wi(r)?(e=!0,Ti(t)):e=!1,sa(t,n),Ia(t,r,i),Ta(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return eu(e,t,n)}throw Error(o(156,t.tag))};var Us=null,js=null;function Vs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Bs(e,t,n,r){return new Vs(e,t,n,r)}function zs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qs(e,t){var n=e.alternate;return null===n?((n=Bs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ks(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)zs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case ne:return Gs(n.children,i,a,t);case ue:u=8,i|=7;break;case re:u=8,i|=1;break;case ie:return(e=Bs(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ce:return(e=Bs(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=a,e;case le:return(e=Bs(19,n,t,i)).elementType=le,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:u=10;break e;case oe:u=9;break e;case se:u=11;break e;case fe:u=14;break e;case he:u=16,r=null;break e;case de:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Bs(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Gs(e,t,n,r){return(e=Bs(7,e,r,t)).expirationTime=n,e}function Ws(e,t,n){return(e=Bs(6,e,null,t)).expirationTime=n,e}function Hs(e,t,n){return(t=Bs(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qs(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ys(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function $s(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Js(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Xs(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zs(e,t,n,r){var i=t.current,a=cs(),u=ga.suspense;a=ls(a,i,u);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(wi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(wi(c)){n=Ei(n,c,s);break e}}n=s}else n=yi;return null===t.context?t.context=n:t.pendingContext=n,(t=da(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),pa(i,t),fs(i,a),a}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=new Qs(e,t,n=null!=n&&!0===n.hydrate),i=Bs(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,fa(i),e[An]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);St.forEach((function(e){vt(e,t,n)})),Ct.forEach((function(e){vt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=ec(o);u.call(e)}}Zs(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=ec(o);s.call(e)}}gs((function(){Zs(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}rc.prototype.render=function(e){Zs(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zs(null,e,null,(function(){t[An]=null}))},yt=function(e){if(13===e.tag){var t=Zi(cs(),150,100);fs(e,t),nc(e,t)}},mt=function(e){13===e.tag&&(fs(e,3),nc(e,3))},gt=function(e){if(13===e.tag){var t=cs();fs(e,t=ls(t,e,null)),nc(e,t)}},C=function(e,t,n){switch(t){case"input":if(Te(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(o(90));we(r),Te(r,i)}}}break;case"textarea":Ae(e,n);break;case"select":null!=(t=n.value)&&De(e,!!n.multiple,t,!1)}},R=ms,L=function(e,t,n,r,i){var a=ju;ju|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(ju=a)===Du&&Ji()}},M=function(){(ju&(1|Nu|Au))===Du&&(function(){if(null!==as){var e=as;as=null,e.forEach((function(e,t){Xs(t,e),ps(t)})),Ji()}}(),As())},F=function(e,t){var n=ju;ju|=2;try{return e(t)}finally{(ju=n)===Du&&Ji()}};var uc={Events:[Rn,Ln,Mn,_,I,qn,function(e){at(e,zn)},A,P,Xt,st,As,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Us=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},js=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Pn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((ju&(Nu|Au))!==Du)throw Error(o(187));var n=ju;ju|=1;try{return Qi(99,e.bind(null,t))}finally{ju=n,Ji()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(gs((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[An]=null}))})),!0)},t.unstable_batchedUpdates=ms,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return ac(e,t,n,!1,r)},t.version="16.14.0"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function b(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}function w(){}function x(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=b.prototype;var I=x.prototype=new w;I.constructor=x,r(I,b.prototype),I.isPureReactComponent=!0;var E={current:null},T=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,r)&&!_.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var D=/\/+/g,O=[];function N(e,t,n,r){if(O.length){var i=O.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function A(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function P(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var u=!1;if(null===e)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return n(r,e,""===t?"."+L(e,0):t),1;if(u=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var c=t+L(i=e[s],s);u+=P(i,c,n,r)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=y&&e[y]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),s=0;!(i=e.next()).done;)u+=P(i=i.value,c=t+L(i,s++),n,r);else if("object"===i)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return u}function R(e,t,n){return null==e?0:P(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(D,"$&/")+"/"),R(e,F,t=N(t,a,r,i)),A(t)}var j={current:null};function V(){var e=j.current;if(null===e)throw Error(m(321));return e}var B={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,M,t=N(null,null,t,n)),A(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(m(143));return e}},t.Component=b,t.Fragment=u,t.Profiler=c,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)T.call(t,l)&&!_.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return V().useCallback(e,t)},t.useContext=function(e,t){return V().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return V().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return V().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return V().useLayoutEffect(e,t)},t.useMemo=function(e,t){return V().useMemo(e,t)},t.useReducer=function(e,t,n){return V().useReducer(e,t,n)},t.useRef=function(e){return V().useRef(e)},t.useState=function(e){return V().useState(e)},t.version="16.14.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,a,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,s=null,c=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(c,0))},r=function(e,t){s=setTimeout(e,t)},i=function(){clearTimeout(s)},a=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,h=window.Date,d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var y=h.now();t.unstable_now=function(){return h.now()-y}}var m=!1,g=null,k=-1,b=5,w=0;a=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,I=x.port2;x.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+b;try{g(!0,e)?I.postMessage(null):(m=!1,g=null)}catch(n){throw I.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,I.postMessage(null))},r=function(e,n){k=d((function(){e(t.unstable_now())}),n)},i=function(){p(k),k=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function T(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>S(o,n))void 0!==s&&0>S(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>S(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],D=[],O=1,N=null,A=3,P=!1,R=!1,L=!1;function M(e){for(var t=T(D);null!==t;){if(null===t.callback)_(D);else{if(!(t.startTime<=e))break;_(D),t.sortIndex=t.expirationTime,E(C,t)}t=T(D)}}function F(e){if(L=!1,M(e),!R)if(null!==T(C))R=!0,n(U);else{var t=T(D);null!==t&&r(F,t.startTime-e)}}function U(e,n){R=!1,L&&(L=!1,i()),P=!0;var o=A;try{for(M(n),N=T(C);null!==N&&(!(N.expirationTime>n)||e&&!a());){var u=N.callback;if(null!==u){N.callback=null,A=N.priorityLevel;var s=u(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===T(C)&&_(C),M(n)}else _(C);N=T(C)}if(null!==N)var c=!0;else{var l=T(D);null!==l&&r(F,l.startTime-n),c=!1}return c}finally{N=null,A=o,P=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||P||(R=!0,n(U))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return T(C)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:j(e)}else o=j(e),s=u;return e={id:O++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,E(D,e),null===T(C)&&e===T(D)&&(L?i():L=!0,r(F,s-u))):(e.sortIndex=o,E(C,e),R||P||(R=!0,n(U))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=T(C);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},715:function(e,t,n){var r={"./PngItemBlack_4809398.png":376,"./PngItem_4809398.png":629,"./b_b.png":529,"./b_w.png":354,"./chessBoard.png":899,"./k_b.png":230,"./k_w.png":783,"./n_b.png":394,"./n_w.png":245,"./p_b.png":702,"./p_w.png":222,"./q_b.png":547,"./q_w.png":917,"./r_b.png":918,"./r_w.png":975};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=715},376:function(e,t,n){"use strict";e.exports=n.p+"static/media/PngItemBlack_4809398.156a42b27c56d67bdfb8.png"},629:function(e,t,n){"use strict";e.exports=n.p+"static/media/PngItem_4809398.d0e207272d4046260144.png"},529:function(e,t,n){"use strict";e.exports=n.p+"static/media/b_b.01ff8e09445934c422b8.png"},354:function(e,t,n){"use strict";e.exports=n.p+"static/media/b_w.2b965ac7069a53b25940.png"},899:function(e,t,n){"use strict";e.exports=n.p+"static/media/chessBoard.b56d8b55a98e9a2f3d2f.png"},230:function(e,t,n){"use strict";e.exports=n.p+"static/media/k_b.33e7a2b02db201f8d6da.png"},783:function(e,t,n){"use strict";e.exports=n.p+"static/media/k_w.6e5422477d720eb2d37e.png"},394:function(e,t,n){"use strict";e.exports=n.p+"static/media/n_b.4f9576a0b3afbad003cb.png"},245:function(e,t,n){"use strict";e.exports=n.p+"static/media/n_w.0e4b526fc816275afdb6.png"},702:function(e,t,n){"use strict";e.exports=n.p+"static/media/p_b.8dce600de6d2a95bd184.png"},222:function(e,t,n){"use strict";e.exports=n.p+"static/media/p_w.9da277a5f3dbbd9fdc2b.png"},547:function(e,t,n){"use strict";e.exports=n.p+"static/media/q_b.f7edeac3fa4b19656174.png"},917:function(e,t,n){"use strict";e.exports=n.p+"static/media/q_w.e0641b2aea8a201ca86b.png"},918:function(e,t,n){"use strict";e.exports=n.p+"static/media/r_b.7875134f3e2d2fbcdd76.png"},975:function(e,t,n){"use strict";e.exports=n.p+"static/media/r_w.9fe11961b053f1447bf2.png"},897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},704:function(e,t,n){var r=n(116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},116:function(e,t,n){var r=n(897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/chess-game/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ie},SDK_VERSION:function(){return Ot},_DEFAULT_ENTRY_NAME:function(){return mt},_addComponent:function(){return wt},_addOrOverwriteComponent:function(){return xt},_apps:function(){return kt},_clearComponents:function(){return _t},_components:function(){return bt},_getProvider:function(){return Et},_registerComponent:function(){return It},_removeServiceInstance:function(){return Tt},deleteApp:function(){return Rt},getApp:function(){return At},getApps:function(){return Pt},initializeApp:function(){return Nt},onLog:function(){return Ft},registerVersion:function(){return Mt},setLogLevel:function(){return Ut}});var t={};n.r(t),n.d(t,{FILE:function(){return lN},TEXT:function(){return hN},URL:function(){return fN}});var r=n(791),i=n(164);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(O){l=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:I(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=f;var d={};function p(){}function v(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,u)&&(m=k);var b=y.prototype=p.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,o,u,s){var c=h(e[r],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,s)}),(function(e){i("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function I(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return v.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(f(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),l(b,c,"Generator"),l(b,u,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function u(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function c(e){if(Array.isArray(e))return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return c(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||f(e,t)||h()}function p(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function v(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function k(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function b(e){return function(e){if(Array.isArray(e))return l(e)}(e)||k(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=n(778),x=n.n(w),I=function(e,t){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},I(e,t)};function E(e,t){function n(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function T(e){return"function"===typeof e}var _=!1,S={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;_=e},get useDeprecatedSynchronousErrorHandling(){return _}};function C(e){setTimeout((function(){throw e}),0)}var D={closed:!0,next:function(e){},error:function(e){if(S.useDeprecatedSynchronousErrorHandling)throw e;C(e)},complete:function(){}},O=function(){return Array.isArray||function(e){return e&&"number"===typeof e.length}}();function N(e){return null!==e&&"object"===typeof e}var A=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),P=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,a=n._unsubscribe,o=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var u=0;u<r.length;++u){r[u].remove(this)}if(T(a)){i&&(this._unsubscribe=void 0);try{a.call(this)}catch(l){t=l instanceof A?R(l.errors):[l]}}if(O(o)){u=-1;for(var s=o.length;++u<s;){var c=o[u];if(N(c))try{c.unsubscribe()}catch(l){t=t||[],l instanceof A?t=t.concat(R(l.errors)):t.push(l)}}}if(t)throw new A(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function R(e){return e.reduce((function(e,t){return e.concat(t instanceof A?t.errors:t)}),[])}var L=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),M=function(e){function t(n,r,i){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=D;break;case 1:if(!n){a.destination=D;break}if("object"===typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new F(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new F(a,n,r,i)}return a}return E(t,e),t.prototype[L]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(P),F=function(e){function t(t,n,r,i){var a,o=e.call(this)||this;o._parentSubscriber=t;var u=o;return T(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==D&&(T((u=Object.create(n)).unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=a,o._error=r,o._complete=i,o}return E(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;S.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=S.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):C(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;C(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};S.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),S.useDeprecatedSynchronousErrorHandling)throw n;C(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!S.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return S.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(C(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(M);var U=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();function j(e){return e}function V(e){return 0===e.length?j:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var B=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof M)return e;if(e[L])return e[L]()}return e||t||n?new M(e,t,n):new M(D)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||S.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),S.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){S.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof M?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=z(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[U]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:V(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=z(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function z(e){if(e||(e=S.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var q=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),K=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return E(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(P),G=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return E(t,e),t}(M),W=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return E(t,e),t.prototype[L]=function(){return new G(this)},t.prototype.lift=function(e){var t=new H(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new q;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new q;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new q;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new q;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new q;return this.hasError?(e.error(this.thrownError),P.EMPTY):this.isStopped?(e.complete(),P.EMPTY):(this.observers.push(e),new K(this,e))},t.prototype.asObservable=function(){var e=new B;return e.source=this,e},t.create=function(e,t){return new H(e,t)},t}(B),H=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return E(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):P.EMPTY},t}(W),Q=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return E(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new q;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(W);function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function J(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ie(e){var t=re();return function(){var n,r=ne(e);if(t){var i=ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}(this,n)}}function ae(e,t,n){return ae=re()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ee(i,n.prototype),i},ae.apply(null,arguments)}function oe(e){var t="function"===typeof Map?new Map:void 0;return oe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ae(e,arguments,ne(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ee(n,e)},oe(e)}var ue=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ue(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new ce;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ce=function(e){te(n,e);var t=ie(n);function n(){var e;return Y(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return J(n)}(oe(Error)),le=function(e){return function(e){var t=ue(e);return se.encodeByteArray(t,!0)}(e).replace(/\./g,"")},fe=function(e){try{return se.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function he(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=he(e[n],t[n]));return e}var de=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},pe=function(){try{return de()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/chess-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&fe(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ve=function(){var e;return null===(e=pe())||void 0===e?void 0:e.config},ye=function(){function e(){var t=this;Y(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return J(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function me(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ge(){var e,t=null===(e=pe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function ke(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function be(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function we(){var e=me();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xe(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ie=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Z(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Z(a),Ee.prototype.create),a}return J(n)}(oe(Error)),Ee=function(){function e(t,n,r){Y(this,e),this.service=t,this.serviceName=n,this.errors=r}return J(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Te,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ie(n,a,t)}}]),e}();var Te=/\{\$([^}]+)}/g;function _e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Se(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ce(u)&&Ce(s)){if(!Se(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ce(e){return null!==e&&"object"===typeof e}function De(e){for(var t=[],n=function(){var e=d(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Oe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=d(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ne(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ae(e,t){var n=new Pe(e,t);return n.subscribe.bind(n)}var Pe=function(){function e(t,n){var r=this;Y(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return J(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=X(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Re),void 0===r.error&&(r.error=Re),void 0===r.complete&&(r.complete=Re);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Re(){}function Le(e){return e&&e._delegate?e._delegate:e}var Me=function(){function e(t,n,r){Y(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return J(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Fe="[DEFAULT]",Ue=function(){function e(t,n){Y(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return J(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ye;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch(s){}var t,n=X(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(b(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),b(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=X(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=d(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=X(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(GI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Fe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(GI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;return this.component?this.component.multipleInstances?e:Fe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var je,Ve,Be=function(){function e(t){Y(this,e),this.name=t,this.providers=new Map}return J(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ue(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ze=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ve||(Ve={}));var qe={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Ke=Ve.INFO,Ge=(v(je={},Ve.DEBUG,"log"),v(je,Ve.VERBOSE,"log"),v(je,Ve.INFO,"info"),v(je,Ve.WARN,"warn"),v(je,Ve.ERROR,"error"),je),We=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ge[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},He=function(){function e(t){Y(this,e),this.name=t,this._logLevel=Ke,this._logHandler=We,this._userLogHandler=null,ze.push(this)}return J(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ve))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?qe[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ve.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ve.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.INFO].concat(t)),this._logHandler.apply(this,[this,Ve.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.WARN].concat(t)),this._logHandler.apply(this,[this,Ve.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.ERROR].concat(t)),this._logHandler.apply(this,[this,Ve.ERROR].concat(t))}}]),e}();var Qe,Ye,$e=function(e,t){return t.some((function(t){return e instanceof t}))};var Je=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap;var nt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Xe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ze.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return at(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function rt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ye||(Ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ot(this),n),at(Je.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return at(e.apply(ot(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ot(this),t].concat(r));return Ze.set(a,t.sort?t.sort():[t]),at(a)}}function it(e){return"function"===typeof e?rt(e):(e instanceof IDBTransaction&&function(e){if(!Xe.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Xe.set(e,t)}}(e),$e(e,Qe||(Qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,nt):e)}function at(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(at(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Je.set(t,e)})).catch((function(){})),tt.set(t,e),t}(e);if(et.has(e))return et.get(e);var t=it(e);return t!==e&&(et.set(e,t),tt.set(t,e)),t}var ot=function(e){return tt.get(e)};var ut,st,ct=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],ft=new Map;function ht(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ft.get(t))return ft.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=lt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ct.includes(n))){var a=function(){var e=s(o().mark((function e(t){var a,u,s,c,l,f,h=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ft.set(t,a),a}}}nt=function(e){return m(m({},e),{},{get:function(t,n,r){return ht(t,n)||e.get(t,n,r)},has:function(t,n){return!!ht(t,n)||e.has(t,n)}})}(nt);var dt=function(){function e(t){Y(this,e),this.container=t}return J(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var pt="@firebase/app",vt="0.9.7",yt=new He("@firebase/app"),mt="[DEFAULT]",gt=(v(ut={},pt,"fire-core"),v(ut,"@firebase/app-compat","fire-core-compat"),v(ut,"@firebase/analytics","fire-analytics"),v(ut,"@firebase/analytics-compat","fire-analytics-compat"),v(ut,"@firebase/app-check","fire-app-check"),v(ut,"@firebase/app-check-compat","fire-app-check-compat"),v(ut,"@firebase/auth","fire-auth"),v(ut,"@firebase/auth-compat","fire-auth-compat"),v(ut,"@firebase/database","fire-rtdb"),v(ut,"@firebase/database-compat","fire-rtdb-compat"),v(ut,"@firebase/functions","fire-fn"),v(ut,"@firebase/functions-compat","fire-fn-compat"),v(ut,"@firebase/installations","fire-iid"),v(ut,"@firebase/installations-compat","fire-iid-compat"),v(ut,"@firebase/messaging","fire-fcm"),v(ut,"@firebase/messaging-compat","fire-fcm-compat"),v(ut,"@firebase/performance","fire-perf"),v(ut,"@firebase/performance-compat","fire-perf-compat"),v(ut,"@firebase/remote-config","fire-rc"),v(ut,"@firebase/remote-config-compat","fire-rc-compat"),v(ut,"@firebase/storage","fire-gcs"),v(ut,"@firebase/storage-compat","fire-gcs-compat"),v(ut,"@firebase/firestore","fire-fst"),v(ut,"@firebase/firestore-compat","fire-fst-compat"),v(ut,"fire-js","fire-js"),v(ut,"firebase","fire-js-all"),ut),kt=new Map,bt=new Map;function wt(e,t){try{e.container.addComponent(t)}catch(n){yt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function xt(e,t){e.container.addOrOverwriteComponent(t)}function It(e){var t=e.name;if(bt.has(t))return yt.debug("There were multiple attempts to register component ".concat(t,".")),!1;bt.set(t,e);var n,r=X(kt.values());try{for(r.s();!(n=r.n()).done;){wt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Et(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt;Et(e,t).clearInstance(n)}function _t(){bt.clear()}var St=(v(st={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(st,"bad-app-name","Illegal App name: '{$appName}"),v(st,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),v(st,"app-deleted","Firebase App named '{$appName}' already deleted"),v(st,"no-options","Need to provide options, when not being deployed to hosting via source."),v(st,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),v(st,"invalid-log-argument","First argument to `onLog` must be null or a function."),v(st,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),v(st,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),v(st,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),v(st,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),st),Ct=new Ee("app","Firebase",St),Dt=function(){function e(t,n,r){var i=this;Y(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Me("app",(function(){return i}),"PUBLIC"))}return J(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}}]),e}(),Ot="9.19.1";function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:mt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ct.create("bad-app-name",{appName:String(i)});if(n||(n=ve()),!n)throw Ct.create("no-options");var a=kt.get(i);if(a){if(Se(n,a.options)&&Se(r,a.config))return a;throw Ct.create("duplicate-app",{appName:i})}var o,u=new Be(i),s=X(bt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Dt(n,r,u);return kt.set(i,l),l}function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=kt.get(e);if(!t&&e===mt)return Nt();if(!t)throw Ct.create("no-app",{appName:e});return t}function Pt(){return Array.from(kt.values())}function Rt(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!kt.has(n)){e.next=6;break}return kt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mt(e,t,n){var r,i=null!==(r=gt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void yt.warn(u.join(" "))}It(new Me("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ft(e,t){if(null!==e&&"function"!==typeof e)throw Ct.create("invalid-log-argument");!function(e,t){var n,r=X(ze);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=qe[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ve[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ut(e){var t;t=e,ze.forEach((function(e){e.setLogLevel(t)}))}var jt="firebase-heartbeat-database",Vt=1,Bt="firebase-heartbeat-store",zt=null;function qt(){return zt||(zt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=at(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(at(u.result),e.oldVersion,e.newVersion,at(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(jt,Vt,{upgrade:function(e,t){if(0===t)e.createObjectStore(Bt)}}).catch((function(e){throw Ct.create("idb-open",{originalErrorMessage:e.message})}))),zt}function Kt(e){return Gt.apply(this,arguments)}function Gt(){return Gt=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Bt).objectStore(Bt).get(Qt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Ie?yt.warn(e.t0.message):(r=Ct.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yt.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Gt.apply(this,arguments)}function Wt(e,t){return Ht.apply(this,arguments)}function Ht(){return Ht=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qt();case 3:return r=e.sent,i=r.transaction(Bt,"readwrite"),a=i.objectStore(Bt),e.next=8,a.put(n,Qt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Ie?yt.warn(e.t0.message):(u=Ct.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yt.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Ht.apply(this,arguments)}function Qt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Yt=function(){function e(t){var n=this;Y(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new en(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return J(e,[{key:"triggerHeartbeat",value:function(){var e=s(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=$t(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=$t(),n=Jt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=le(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function $t(){return(new Date).toISOString().substring(0,10)}function Jt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=X(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),tn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),tn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Xt,Zt,en=function(){function e(t){Y(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return J(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Kt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Wt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Wt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(b(r.heartbeats),b(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function tn(e){return le(JSON.stringify({version:2,heartbeats:e})).length}Xt="",It(new Me("platform-logger",(function(e){return new dt(e)}),"PRIVATE")),It(new Me("heartbeat",(function(e){return new Yt(e)}),"PRIVATE")),Mt(pt,vt,Xt),Mt(pt,vt,"esm2017"),Mt("fire-js","");var nn=function(){function e(t,n){var r=this;Y(this,e),this._delegate=t,this.firebase=n,wt(t,new Me("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return J(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Rt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){wt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){xt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),rn=(v(Zt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(Zt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Zt),an=new Ee("app-compat","Firebase",rn);var on=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Nt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(_e(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Mt,setLogLevel:Ut,onLog:Ft,apps:null,SDK_VERSION:Ot,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(It(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw an.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&he(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!_e(n,e=e||mt))throw an.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(nn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){he(n,e)},createSubscribe:Ae,ErrorFactory:Ee,deepExtend:he}),n}(),un=new He("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){un.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var sn=self.firebase.SDK_VERSION;sn&&sn.indexOf("LITE")>=0&&un.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var cn=on;!function(e){Mt("@firebase/app-compat","0.2.7",e)}();function ln(e){return c(e)||k(e)||f(e)||h()}function fn(){return fn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},fn.apply(this,arguments)}cn.registerVersion("firebase","9.19.1","app-compat");function hn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var dn;Object.create;var pn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},vn="EMAIL_SIGNIN",yn="PASSWORD_RESET",mn="RECOVER_EMAIL",gn="REVERT_SECOND_FACTOR_ADDITION",kn="VERIFY_AND_CHANGE_EMAIL",bn="VERIFY_EMAIL";function wn(){return v({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var xn=function(){var e;return v(e={},"admin-restricted-operation","This operation is restricted to administrators only."),v(e,"argument-error",""),v(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),v(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),v(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),v(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),v(e,"cordova-not-ready","Cordova framework is not ready."),v(e,"cors-unsupported","This browser is not supported."),v(e,"credential-already-in-use","This credential is already associated with a different user account."),v(e,"custom-token-mismatch","The custom token corresponds to a different audience."),v(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),v(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),v(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),v(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),v(e,"email-already-in-use","The email address is already in use by another account."),v(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),v(e,"expired-action-code","The action code has expired."),v(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),v(e,"internal-error","An internal AuthError has occurred."),v(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),v(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),v(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),v(e,"invalid-auth-event","An internal AuthError has occurred."),v(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),v(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),v(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),v(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),v(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),v(e,"invalid-email","The email address is badly formatted."),v(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),v(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),v(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),v(e,"invalid-credential","The supplied auth credential is malformed or has expired."),v(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),v(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),v(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),v(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),v(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),v(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),v(e,"wrong-password","The password is invalid or the user does not have a password."),v(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),v(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),v(e,"invalid-provider-id","The specified provider ID is invalid."),v(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),v(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),v(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),v(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),v(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),v(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),v(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),v(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),v(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),v(e,"missing-continue-uri","A continue URL must be provided in the request."),v(e,"missing-iframe-start","An internal AuthError has occurred."),v(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),v(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),v(e,"missing-password","A non-empty password must be provided"),v(e,"missing-multi-factor-info","No second factor identifier is provided."),v(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),v(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),v(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),v(e,"app-deleted","This instance of FirebaseApp has been deleted."),v(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),v(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),v(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),v(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),v(e,"no-auth-event","An internal AuthError has occurred."),v(e,"no-such-provider","User was not linked to an account with the given provider."),v(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),v(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),v(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),v(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),v(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),v(e,"provider-already-linked","User can only be linked to one identity for the given provider."),v(e,"quota-exceeded","The project's quota for this operation has been exceeded."),v(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),v(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),v(e,"rejected-credential","The request contains malformed or mismatching credentials."),v(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),v(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),v(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),v(e,"timeout","The operation has timed out."),v(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),v(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),v(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),v(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),v(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),v(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),v(e,"unverified-email","The operation requires a verified email."),v(e,"user-cancelled","The user did not grant your application the permissions it requested."),v(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),v(e,"user-disabled","The user account has been disabled by an administrator."),v(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),v(e,"user-signed-out",""),v(e,"weak-password","The password must be 6 characters long or more."),v(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),v(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},In=wn,En=new Ee("auth","Firebase",wn()),Tn=new He("@firebase/auth");function _n(e){if(Tn.logLevel<=Ve.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Tn.error.apply(Tn,["Auth (".concat(Ot,"): ").concat(e)].concat(n))}}function Sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Nn.apply(void 0,[e].concat(n))}function Cn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Nn.apply(void 0,[e].concat(n))}function Dn(e,t,n){var r=Object.assign(Object.assign({},In()),v({},t,n));return new Ee("auth","Firebase",r).create(t,{appName:e.name})}function On(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Sn(e,"argument-error"),Dn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Nn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=b(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(b(o)))}return En.create.apply(En,[e].concat(n))}function An(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Nn.apply(void 0,[t].concat(r))}}function Pn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw _n(t),new Error(t)}function Rn(e,t){e||Pn(t)}var Ln=new Map;function Mn(e){Rn(e instanceof Function,"Expected a class definition");var t=Ln.get(e);return t?(Rn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ln.set(e,t),t)}function Fn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Un(){return"http:"===jn()||"https:"===jn()}function jn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Vn=function(){function e(t,n){Y(this,e),this.shortDelay=t,this.longDelay=n,Rn(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())||be()}return J(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Un()||ke()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Bn(e,t){Rn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var zn=function(){function e(){Y(this,e)}return J(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Pn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Pn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Pn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),qn=(v(dn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),v(dn,"MISSING_CUSTOM_TOKEN","internal-error"),v(dn,"INVALID_IDENTIFIER","invalid-email"),v(dn,"MISSING_CONTINUE_URI","internal-error"),v(dn,"INVALID_PASSWORD","wrong-password"),v(dn,"MISSING_PASSWORD","missing-password"),v(dn,"EMAIL_EXISTS","email-already-in-use"),v(dn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),v(dn,"INVALID_IDP_RESPONSE","invalid-credential"),v(dn,"INVALID_PENDING_TOKEN","invalid-credential"),v(dn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),v(dn,"MISSING_REQ_TYPE","internal-error"),v(dn,"EMAIL_NOT_FOUND","user-not-found"),v(dn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),v(dn,"EXPIRED_OOB_CODE","expired-action-code"),v(dn,"INVALID_OOB_CODE","invalid-action-code"),v(dn,"MISSING_OOB_CODE","internal-error"),v(dn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),v(dn,"INVALID_ID_TOKEN","invalid-user-token"),v(dn,"TOKEN_EXPIRED","user-token-expired"),v(dn,"USER_NOT_FOUND","user-token-expired"),v(dn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),v(dn,"INVALID_CODE","invalid-verification-code"),v(dn,"INVALID_SESSION_INFO","invalid-verification-id"),v(dn,"INVALID_TEMPORARY_PROOF","invalid-credential"),v(dn,"MISSING_SESSION_INFO","missing-verification-id"),v(dn,"SESSION_EXPIRED","code-expired"),v(dn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),v(dn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),v(dn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),v(dn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),v(dn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),v(dn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),v(dn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),v(dn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),v(dn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),v(dn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),v(dn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),dn),Kn=new Vn(3e4,6e4);function Gn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Wn(e,t,n,r){return Hn.apply(this,arguments)}function Hn(){return Hn=s(o().mark((function e(t,n,r,i){var a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",Qn(t,a,s(o().mark((function e(){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},u={},i&&("GET"===n?u=i:a={body:JSON.stringify(i)}),s=De(Object.assign({key:t.config.apiKey},u)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",zn.fetch()(Xn(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Hn.apply(this,arguments)}function Qn(e,t,n){return Yn.apply(this,arguments)}function Yn(){return Yn=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},qn),n),e.prev=2,a=new Zn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return u=e.sent,a.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw er(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=d(l,2),h=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw er(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw er(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw er(t,"user-disabled",s);case 29:if(v=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw Dn(t,v,p);case 34:Sn(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ie)){e.next=41;break}throw e.t0;case 41:Sn(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Yn.apply(this,arguments)}function $n(e,t,n,r){return Jn.apply(this,arguments)}function Jn(){return Jn=s(o().mark((function e(t,n,r,i){var a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Wn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(u=e.sent)&&Sn(t,"multi-factor-auth-required",{_serverResponse:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)}))),Jn.apply(this,arguments)}function Xn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Bn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Zn=function(){function e(t){var n=this;Y(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Cn(n.auth,"network-request-failed"))}),Kn.get())}))}return J(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function er(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Cn(e,t,r);return i.customData._tokenResponse=n,i}function tr(e,t){return nr.apply(this,arguments)}function nr(){return nr=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),nr.apply(this,arguments)}function rr(e,t){return ir.apply(this,arguments)}function ir(){return ir=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ir.apply(this,arguments)}function ar(e,t){return or.apply(this,arguments)}function or(){return or=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}function ur(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function sr(){return sr=s(o().mark((function e(t){var n,r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=Le(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,An((a=lr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),u="object"===typeof a.firebase?a.firebase:void 0,s=null===u||void 0===u?void 0:u.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ur(cr(a.auth_time)),issuedAtTime:ur(cr(a.iat)),expirationTime:ur(cr(a.exp)),signInProvider:s||null,signInSecondFactor:(null===u||void 0===u?void 0:u.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function cr(e){return 1e3*Number(e)}function lr(e){var t=d(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return _n("JWT malformed, contained fewer than 3 sections"),null;try{var a=fe(r);return a?JSON.parse(a):(_n("Failed to decode base64 JWT payload"),null)}catch(o){return _n("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function fr(e,t){return hr.apply(this,arguments)}function hr(){return hr=s(o().mark((function e(t,n){var r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ie&&dr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),hr.apply(this,arguments)}function dr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var pr=function(){function e(t){Y(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return J(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),vr=function(){function e(t,n){Y(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return J(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function yr(e){return mr.apply(this,arguments)}function mr(){return mr=s(o().mark((function e(t){var n,r,i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,fr(t,ar(r,{idToken:i}));case 6:An(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),u=a.users[0],t._notifyReloadListener(u),s=(null===(n=u.providerUserInfo)||void 0===n?void 0:n.length)?u.providerUserInfo.map((function(e){var t=e.providerId,n=hn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=kr(t.providerData,s),l=t.isAnonymous,f=!(t.email&&u.passwordHash)&&!(null===c||void 0===c?void 0:c.length),h=!!l&&f,d={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new vr(u.createdAt,u.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),mr.apply(this,arguments)}function gr(){return(gr=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le(t),e.next=3,yr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(b(n),b(t))}function br(e,t){return wr.apply(this,arguments)}function wr(){return wr=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,{},s(o().mark((function e(){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=De({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,u=i.apiKey,s=Xn(t,a,"/v1/token","key=".concat(u)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",zn.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}var xr=function(){function e(){Y(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return J(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){An(e.idToken,"internal-error"),An("undefined"!==typeof e.idToken,"internal-error"),An("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=lr(e);return An(t,"internal-error"),An("undefined"!==typeof t.exp,"internal-error"),An("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],An(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,u=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Pn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(An("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(An("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(An("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ir(e,t){An("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Er=function(){function e(t){Y(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=hn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?b(a.providerData):[],this.metadata=new vr(a.createdAt||void 0,a.lastLoginAt||void 0)}return J(e,[{key:"getIdToken",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(An(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return sr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return gr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(An(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){An(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=s(o().mark((function e(t){var n,r,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,yr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,fr(this,tr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;An(k&&I,t,"internal-error");var E=xr.fromJSON(this.name,I);An("string"===typeof k,t,"internal-error"),Ir(f,t.name),Ir(h,t.name),An("boolean"===typeof b,t,"internal-error"),An("boolean"===typeof w,t,"internal-error"),Ir(d,t.name),Ir(p,t.name),Ir(v,t.name),Ir(y,t.name),Ir(m,t.name),Ir(g,t.name);var T=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(T.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=s(o().mark((function t(n,r){var i,a,u,s=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new xr).updateFromServerResponse(r),u=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,yr(u);case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Tr=function(){function e(){Y(this,e),this.type="NONE",this.storage={}}return J(e,[{key:"_isAvailable",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Tr.type="NONE";var _r=Tr;function Sr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Cr=function(){function e(t,n,r){Y(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Sr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Sr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return J(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Er._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=s(o().mark((function t(n,r){var i,a,u,c,l,f,h,d,p,v,y,m=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Mn(_r),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),u=a[0]||Mn(_r),c=Sr(i,n.config.apiKey,n.name),l=null,f=X(r),t.prev=10,f.s();case 12:if((h=f.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(c);case 17:if(!(p=t.sent)){t.next=23;break}return v=Er._fromJSON(n,p),d!==u&&(l=v),u=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),f.e(t.t1);case 34:return t.prev=34,f.f(),t.finish(34);case 37:if(y=a.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(u,n,i));case 40:if(u=y[0],!l){t.next=44;break}return t.next=44,u._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(u,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Dr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Or(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Lr(t))return"Blackberry";if(Mr(t))return"Webos";if(Nr(t))return"Safari";if((t.includes("chrome/")||Ar(t))&&!t.includes("edge/"))return"Chrome";if(Rr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/firefox\//i.test(e)}function Nr(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:me()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/crios\//i.test(e)}function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/iemobile/i.test(e)}function Rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/android/i.test(e)}function Lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/blackberry/i.test(e)}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/webos/i.test(e)}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return Fr(e)||Rr(e)||Mr(e)||Lr(e)||/windows phone/i.test(e)||Pr(e)}function jr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Dr(me());break;case"Worker":t="".concat(Dr(me()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ot,"/").concat(r)}var Vr=function(){function e(t){Y(this,e),this.auth=t,this.queue=[]}return J(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=X(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),u=X(n);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(o){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Br=function(){function e(t,n,r){Y(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qr(this),this.idTokenSubscription=new qr(this),this.beforeStateQueue=new Vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=En,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return J(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Mn(t)),this._initializationPromise=this.queue(s(o().mark((function r(){var i,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Cr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return An(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Le(t):null)&&An(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=s(o().mark((function e(t){var n,r=this,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&An(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Mn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ee("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return An(n=t&&Mn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Cr.create(this,[Mn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return An(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return An(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=s(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function zr(e){return Le(e)}var qr=function(){function e(t){var n=this;Y(this,e),this.auth=t,this.observer=null,this.addObserver=Ae((function(e){return n.observer=e}))}return J(e,[{key:"next",get:function(){return An(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Kr(e,t,n){var r=zr(e);An(r._canInitEmulator,r,"emulator-config-failed"),An(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Gr(t),o=function(e){var t=Gr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Wr(r.substr(a.length+1))}}var o=d(r.split(":"),2);return{host:o[0],port:Wr(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Gr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Hr=function(){function e(t,n){Y(this,e),this.providerId=t,this.signInMethod=n}return J(e,[{key:"toJSON",value:function(){return Pn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Pn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Pn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Pn("not implemented")}}]),e}();function Qr(e,t){return Yr.apply(this,arguments)}function Yr(){return Yr=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:resetPassword",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}function $r(e,t){return Jr.apply(this,arguments)}function Jr(){return Jr=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function Xr(e,t){return Zr.apply(this,arguments)}function Zr(){return Zr=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:update",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return ti=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$n(t,"POST","/v1/accounts:signInWithPassword",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:sendOobCode",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(e,t){return ai.apply(this,arguments)}function ai(){return ai=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ni(t,n));case 1:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}function oi(e,t){return ui.apply(this,arguments)}function ui(){return ui=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ni(t,n));case 1:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}function si(e,t){return ci.apply(this,arguments)}function ci(){return ci=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ni(t,n));case 1:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}function li(e,t){return fi.apply(this,arguments)}function fi(){return fi=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ni(t,n));case 1:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}function hi(e,t){return di.apply(this,arguments)}function di(){return di=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$n(t,"POST","/v1/accounts:signInWithEmailLink",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$n(t,"POST","/v1/accounts:signInWithEmailLink",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}var yi=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Y(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return J(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ei(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",hi(t,{email:this._email,oobCode:this._password}));case 5:Sn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$r(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",pi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Sn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Hr);function mi(e,t){return gi.apply(this,arguments)}function gi(){return gi=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$n(t,"POST","/v1/accounts:signInWithIdp",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}var ki=function(e){te(n,e);var t=ie(n);function n(){var e;return Y(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return J(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return mi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,mi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,mi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=De(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=hn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Hr);function bi(e,t){return wi.apply(this,arguments)}function wi(){return wi=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:sendVerificationCode",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function xi(){return xi=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$n(t,"POST","/v1/accounts:signInWithPhoneNumber",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function Ii(){return Ii=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(t,"POST","/v1/accounts:signInWithPhoneNumber",Gn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw er(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}var Ei=v({},"USER_NOT_FOUND","user-not-found");function Ti(){return Ti=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",$n(t,"POST","/v1/accounts:signInWithPhoneNumber",Gn(t,r),Ei));case 2:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}var _i=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this,"phone","phone")).params=e,r}return J(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return xi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ii.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ti.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Hr);var Si=function(){function e(t){var n,r,i,a,o,u;Y(this,e);var s=Oe(Ne(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);An(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return J(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Oe(Ne(e)).link,n=t?Oe(Ne(t)).deep_link_id:null,r=Oe(Ne(e)).deep_link_id;return(r?Oe(Ne(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(GI){return null}}}]),e}();var Ci=function(){function e(){Y(this,e),this.providerId=e.PROVIDER_ID}return J(e,null,[{key:"credential",value:function(e,t){return yi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Si.parseLink(t);return An(n,"argument-error"),yi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ci.PROVIDER_ID="password",Ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Di=function(){function e(t){Y(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return J(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Oi=function(e){te(n,e);var t=ie(n);function n(){var e;return Y(this,n),(e=t.apply(this,arguments)).scopes=[],e}return J(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return b(this.scopes)}}]),n}(Di),Ni=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return An(e.idToken||e.accessToken,"argument-error"),ki._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return An("providerId"in t&&"signInMethod"in t,"argument-error"),ki._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Oi),Ai=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.call(this,"facebook.com")}return J(n,null,[{key:"credential",value:function(e){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(GI){return null}}}]),n}(Oi);Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ai.PROVIDER_ID="facebook.com";var Pi=function(e){te(n,e);var t=ie(n);function n(){var e;return Y(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return J(n,null,[{key:"credential",value:function(e,t){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(GI){return null}}}]),n}(Oi);Pi.GOOGLE_SIGN_IN_METHOD="google.com",Pi.PROVIDER_ID="google.com";var Ri=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.call(this,"github.com")}return J(n,null,[{key:"credential",value:function(e){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(GI){return null}}}]),n}(Oi);Ri.GITHUB_SIGN_IN_METHOD="github.com",Ri.PROVIDER_ID="github.com";var Li=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return J(n,[{key:"_getIdTokenResponse",value:function(e){return mi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,mi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,mi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Hr),Mi=function(e){te(n,e);var t=ie(n);function n(e){return Y(this,n),An(e.startsWith("saml."),"argument-error"),t.call(this,e)}return J(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Li.fromJSON(e);return An(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Li._create(r,n)}catch(i){return null}}}]),n}(Di),Fi=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.call(this,"twitter.com")}return J(n,null,[{key:"credential",value:function(e,t){return ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(GI){return null}}}]),n}(Oi);function Ui(e,t){return ji.apply(this,arguments)}function ji(){return ji=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$n(t,"POST","/v1/accounts:signUp",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}Fi.TWITTER_SIGN_IN_METHOD="twitter.com",Fi.PROVIDER_ID="twitter.com";var Vi=function(){function e(t){Y(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return J(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=s(o().mark((function t(n,r,i){var a,u,s,c,l=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Er._fromIdTokenResponse(n,i,a);case 3:return u=t.sent,s=Bi(i),c=new e({user:u,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=s(o().mark((function t(n,r,i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Bi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Bi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function zi(e){return qi.apply(this,arguments)}function qi(){return qi=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Vi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ui(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Vi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}var Ki=function(e){te(n,e);var t=ie(n);function n(e,r,i,a){var o,u;return Y(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Z(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return J(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ie);function Gi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ki._fromErrorAndOperation(e,n,t,r);throw n}))}function Wi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Hi(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le(t),e.next=3,Ji(!0,r,n);case 3:return e.t0=rr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,u=Wi(a||[]),r.providerData=r.providerData.filter((function(e){return u.has(e.providerId)})),u.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Yi(e,t){return $i.apply(this,arguments)}function $i(){return $i=s(o().mark((function e(t,n){var r,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=fr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Vi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Ji(e,t,n){return Xi.apply(this,arguments)}function Xi(){return(Xi=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yr(n);case 2:i=Wi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",An(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return ea=s(o().mark((function e(t,n){var r,i,a,u,s,c,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,fr(t,Gi(i,a,n,t),r);case 6:return An((u=e.sent).idToken,i,"internal-error"),An(s=lr(u.idToken),i,"internal-error"),c=s.sub,An(t.uid===c,i,"user-mismatch"),e.abrupt("return",Vi._forOperation(t,a,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Sn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ea.apply(this,arguments)}function ta(e,t){return na.apply(this,arguments)}function na(){return na=s(o().mark((function e(t,n){var r,i,a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Gi(t,i,n);case 4:return a=e.sent,e.next=7,Vi._fromIdTokenResponse(t,i,a);case 7:if(u=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ta(zr(t),n));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return(oa=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le(t),e.next=3,Ji(!1,r,n.providerId);case 3:return e.abrupt("return",Yi(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t){return sa.apply(this,arguments)}function sa(){return(sa=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zi(Le(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return la=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$n(t,"POST","/v1/accounts:signInWithCustomToken",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(){return fa=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zr(t),e.next=3,ca(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Vi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}var ha=function(){function e(t,n){Y(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return J(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?da._fromServerResponse(e,t):"totpInfo"in t?pa._fromServerResponse(e,t):Sn(e,"internal-error")}}]),e}(),da=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return J(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ha),pa=function(e){te(n,e);var t=ie(n);function n(e){return Y(this,n),t.call(this,"totp",e)}return J(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ha);function va(e,t,n){var r;An((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),An("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(An(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(An(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ya(){return ya=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Le(t),a={requestType:"PASSWORD_RESET",email:n},r&&va(i,a,r),e.next=5,oi(i,a);case 5:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ma(){return ma=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr(Le(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ga(){return ga=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xr(Le(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){return ba.apply(this,arguments)}function ba(){return ba=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le(t),e.next=3,Qr(r,{oobCode:n});case 3:i=e.sent,An(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return An(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:An(i.mfaInfo,r,"internal-error");case 13:An(i.email,r,"internal-error");case 14:return u=null,i.mfaInfo&&(u=ha._fromServerResponse(zr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:u},operation:a});case 17:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function wa(){return wa=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka(Le(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function xa(e,t,n){return Ia.apply(this,arguments)}function Ia(){return Ia=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,Ui(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Vi._fromIdTokenResponse(i,"signIn",a);case 6:return u=e.sent,e.next=9,i._updateCurrentUser(u.user);case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}function Ea(){return Ea=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Le(t),a={requestType:"EMAIL_SIGNIN",email:n},An(r.handleCodeInApp,i,"argument-error"),r&&va(i,a,r),e.next=6,si(i,a);case 6:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ta(){return Ta=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Le(t),An((a=Ci.credentialWithLink(n,r||Fn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ra(i,a));case 4:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}function _a(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:createAuthUri",Gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ca(){return Ca=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Un()?Fn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,_a(Le(t),i);case 4:return a=e.sent,u=a.signinMethods,e.abrupt("return",u||[]);case 7:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Da(){return(Da=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&va(r.auth,a,n),e.next=8,ii(r.auth,a);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(){return(Oa=s(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Le(t),e.next=3,t.getIdToken();case 3:return a=e.sent,u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&va(i.auth,u,r),e.next=8,li(i.auth,u);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Aa.apply(this,arguments)}function Pa(){return(Pa=s(o().mark((function e(t,n){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Le(t),e.next=6,a.getIdToken();case 6:return u=e.sent,s={idToken:u,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,fr(a,Na(a.auth,s));case 10:return c=e.sent,a.displayName=c.displayName||null,a.photoURL=c.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(e,t,n){return La.apply(this,arguments)}function La(){return La=s(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,u={idToken:a,returnSecureToken:!0},n&&(u.email=n),r&&(u.password=r),e.next=9,fr(t,$r(i,u));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}var Ma=J((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Fa=function(e){te(n,e);var t=ie(n);function n(e,r,i,a){var o;return Y(this,n),(o=t.call(this,e,r,i)).username=a,o}return J(n)}(Ma),Ua=function(e){te(n,e);var t=ie(n);function n(e,r){return Y(this,n),t.call(this,e,"facebook.com",r)}return J(n)}(Ma),ja=function(e){te(n,e);var t=ie(n);function n(e,r){return Y(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return J(n)}(Fa),Va=function(e){te(n,e);var t=ie(n);function n(e,r){return Y(this,n),t.call(this,e,"google.com",r)}return J(n)}(Ma),Ba=function(e){te(n,e);var t=ie(n);function n(e,r,i){return Y(this,n),t.call(this,e,"twitter.com",r,i)}return J(n)}(Fa);function za(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=lr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ma(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ua(a,i);case"github.com":return new ja(a,i);case"google.com":return new Va(a,i);case"twitter.com":return new Ba(a,i,e.screenName||null);case"custom":case"anonymous":return new Ma(a,null);default:return new Ma(a,r,i)}}(n)}var qa=function(){function e(t,n,r){Y(this,e),this.type=t,this.credential=n,this.auth=r}return J(e,[{key:"toJSON",value:function(){return{multiFactorSession:v({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ka=function(){function e(t,n,r){Y(this,e),this.session=t,this.hints=n,this.signInResolver=r}return J(e,[{key:"resolveSignIn",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=zr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ha._fromServerResponse(r,e)}));An(i.mfaPendingCredential,r,"internal-error");var u=qa._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,a,function(){var e=s(o().mark((function e(t){var a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Vi._fromIdTokenResponse(r,n.operationType,s);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return An(n.user,r,"internal-error"),e.abrupt("return",Vi._forOperation(n.user,n.operationType,s));case 17:Sn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ga(e,t){return Wn(e,"POST","/v2/accounts/mfaEnrollment:start",Gn(e,t))}function Wa(e,t){return Wn(e,"POST","/v2/accounts/mfaEnrollment:start",Gn(e,t))}function Ha(e,t){return Wn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Gn(e,t))}function Qa(e,t){return Wn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Gn(e,t))}var Ya=function(){function e(t){var n=this;Y(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ha._fromServerResponse(t.auth,e)})))}))}return J(e,[{key:"getSession",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=qa,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,fr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,fr(this.user,Qa(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),$a=new WeakMap;var Ja="__sak",Xa=function(){function e(t,n){Y(this,e),this.storageRetriever=t,this.type=n}return J(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ja,"1"),this.storage.removeItem(Ja),Promise.resolve(!0)):Promise.resolve(!1)}catch(GI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Za=function(e){te(n,e);var t=ie(n);function n(){var e;return Y(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=me();return Nr(e)||Fr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ur(),e._shouldAllowMigration=!0,e}return J(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);we()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn(ne(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn(ne(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn(ne(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Xa);Za.type="LOCAL";var eo=Za,to=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return J(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Xa);to.type="SESSION";var no=to;function ro(e){return Promise.all(e.map(function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var io=function(){function e(t){Y(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return J(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,u=r.data,null===(c=this.handlersMap[a])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),l=Array.from(c).map(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ro(l);case 9:f=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ao(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}io.receivers=[];var oo=function(){function e(t){Y(this,e),this.target=t,this.handlers=new Set}return J(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s=this,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,o){var c=ao("",20);i.port1.start();var l=setTimeout((function(){o(new Error("unsupported_event"))}),r);u={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),o(new Error("invalid_response"))}}},s.handlers.add(u),i.port1.addEventListener("message",u.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){u&&s.removeMessageHandler(u)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function uo(){return window}function so(){return"undefined"!==typeof uo().WorkerGlobalScope&&"function"===typeof uo().importScripts}function co(){return lo.apply(this,arguments)}function lo(){return(lo=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function fo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ho="firebaseLocalStorageDb",po="firebaseLocalStorage",vo="fbase_key",yo=function(){function e(t){Y(this,e),this.request=t}return J(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function mo(e,t){return e.transaction([po],t?"readwrite":"readonly").objectStore(po)}function go(){var e=indexedDB.deleteDatabase(ho);return new yo(e).toPromise()}function ko(){var e=indexedDB.open(ho,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(po,{keyPath:vo})}catch(r){n(r)}})),e.addEventListener("success",s(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(po)){n.next=12;break}return r.close(),n.next=5,go();case 5:return n.t0=t,n.next=8,ko();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function bo(e,t,n){return wo.apply(this,arguments)}function wo(){return wo=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=mo(t,!0).put((v(i={},vo,n),v(i,"value",r),i)),e.abrupt("return",new yo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),wo.apply(this,arguments)}function xo(e,t){return Io.apply(this,arguments)}function Io(){return Io=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mo(t,!1).get(n),e.next=3,new yo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function Eo(e,t){var n=mo(e,!0).delete(t);return new yo(n).toPromise()}var To=function(){function e(){Y(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return J(e,[{key:"_openDb",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,ko();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",so()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=io._getInstance(so()?self:null),this.receiver._subscribe("keyChanged",function(){var e=s(o().mark((function e(n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=s(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,co();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new oo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&fo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ko();case 5:return t=e.sent,e.next=8,bo(t,Ja,"1");case 8:return e.next=10,Eo(t,Ja);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=s(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return bo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return xo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Eo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=mo(e,!1).getAll();return new yo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=X(t);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.fbase_key,c=u.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(o){i.e(o)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();To.type="LOCAL";var _o=To;function So(e,t){return Wn(e,"POST","/v2/accounts/mfaSignIn:start",Gn(e,t))}function Co(e,t){return Wn(e,"POST","/v2/accounts/mfaSignIn:finalize",Gn(e,t))}function Do(e){return Oo.apply(this,arguments)}function Oo(){return Oo=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function No(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Cn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ao(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Po=1e12,Ro=function(){function e(t){Y(this,e),this.auth=t,this.counter=Po,this._widgets=new Map}return J(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Lo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Po;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Po;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Po,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Lo=function(){function e(t,n,r){var i=this;Y(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;An(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return J(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Mo=Ao("rcb"),Fo=new Vn(3e4,6e4),Uo=function(){function e(){var t;Y(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=uo().grecaptcha)||void 0===t?void 0:t.render)}return J(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return An(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(uo().grecaptcha):new Promise((function(r,i){var a=uo().setTimeout((function(){i(Cn(e,"network-request-failed"))}),Fo.get());uo()[Mo]=function(){uo().clearTimeout(a),delete uo()[Mo];var o=uo().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Cn(e,"internal-error"))},No("".concat("https://www.google.com/recaptcha/api.js?","?").concat(De({onload:Mo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Cn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=uo().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var jo=function(){function e(){Y(this,e)}return J(e,[{key:"load",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ro(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Vo="recaptcha",Bo={theme:"light",type:"image"},zo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Bo),r=arguments.length>2?arguments[2]:void 0;Y(this,e),this.parameters=n,this.type=Vo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zr(r),this.isInvisible="invisible"===this.parameters.size,An("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;An(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jo:new Uo,this.validateStartingState()}return J(e,[{key:"verify",value:function(){var e=s(o().mark((function e(){var t,n,r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){An(!this.parameters.sitekey,this.auth,"argument-error"),An(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),An("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=uo()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){An(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An(Un()&&!so(),this.auth,"internal-error"),e.next=3,qo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Do(this.auth);case 8:An(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return An(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function qo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ko=function(){function e(t,n){Y(this,e),this.verificationId=t,this.onConfirmation=n}return J(e,[{key:"confirm",value:function(e){var t=_i._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Go(){return Go=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),e.next=3,Yo(i,n,Le(r));case 3:return a=e.sent,e.abrupt("return",new Ko(a,(function(e){return ra(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Wo(e,t,n){return Ho.apply(this,arguments)}function Ho(){return(Ho=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Le(t),e.next=3,Ji(!1,i,"phone");case 3:return e.next=5,Yo(i.auth,n,Le(r));case 5:return a=e.sent,e.abrupt("return",new Ko(a,(function(e){return aa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(){return(Qo=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Le(t),e.next=3,Yo(i.auth,n,Le(r));case 3:return a=e.sent,e.abrupt("return",new Ko(a,(function(e){return ua(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e,t,n){return $o.apply(this,arguments)}function $o(){return $o=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,An("string"===typeof a,t,"argument-error"),An(r.type===Vo,t,"argument-error"),!("session"in(u="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=u.session,!("phoneNumber"in u)){e.next=17;break}return An("enroll"===s.type,t,"internal-error"),e.next=13,Ga(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return An("signin"===s.type,t,"internal-error"),An(l=(null===(i=u.multiFactorHint)||void 0===i?void 0:i.uid)||u.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,So(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,bi(t,{phoneNumber:u.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),$o.apply(this,arguments)}function Jo(){return(Jo=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi(Le(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xo=function(){function e(t){Y(this,e),this.providerId=e.PROVIDER_ID,this.auth=zr(t)}return J(e,[{key:"verifyPhoneNumber",value:function(e,t){return Yo(this.auth,e,Le(t))}}],[{key:"credential",value:function(e,t){return _i._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_i._fromTokenResponse(n,r):null}}]),e}();function Zo(e,t){return t?Mn(t):(An(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xo.PROVIDER_ID="phone",Xo.PHONE_SIGN_IN_METHOD="phone";var eu=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this,"custom","custom")).params=e,r}return J(n,[{key:"_getIdTokenResponse",value:function(e){return mi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return mi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return mi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Hr);function tu(e){return ta(e.auth,new eu(e),e.bypassAuthState)}function nu(e){var t=e.auth,n=e.user;return An(n,t,"internal-error"),Zi(n,new eu(e),e.bypassAuthState)}function ru(e){return iu.apply(this,arguments)}function iu(){return iu=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,An(r=t.user,n,"internal-error"),e.abrupt("return",Yi(r,new eu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}var au=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Y(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return J(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=s(o().mark((function t(n,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=s(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,u=t.error,s=t.type,!u){e.next=4;break}return this.reject(u),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tu;case"linkViaPopup":case"linkViaRedirect":return ru;case"reauthViaPopup":case"reauthViaRedirect":return nu;default:Sn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ou=new Vn(2e3,1e4);function uu(e,t,n){return su.apply(this,arguments)}function su(){return su=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),On(t,n,Di),a=Zo(i,r),u=new hu(i,"signInViaPopup",n,a),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}function cu(){return(cu=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=Le(t)).auth,n,Di),a=Zo(i.auth,r),u=new hu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lu(e,t,n){return fu.apply(this,arguments)}function fu(){return(fu=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=Le(t)).auth,n,Di),a=Zo(i.auth,r),u=new hu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hu=function(e){te(n,e);var t=ie(n);function n(e,r,i,a,o){var u;return Y(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Z(u),u}return J(n,[{key:"executeNotNull",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return An(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn(1===this.filter.length,"Popup operations only handle one event"),t=ao(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Cn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Cn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Cn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ou.get())}()}}]),n}(au);hu.currentPopupAction=null;var du="pendingRedirect",pu=new Map,vu=function(e){te(n,e);var t=ie(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Y(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return J(n,[{key:"execute",value:function(){var e=s(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,yu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,fn(ne(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:pu.set(this.auth._key(),t);case 21:return this.bypassAuthState||pu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",fn(ne(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",fn(ne(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(au);function yu(e,t){return mu.apply(this,arguments)}function mu(){return mu=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xu(n),i=wu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}function gu(e,t){return ku.apply(this,arguments)}function ku(){return ku=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t)._set(xu(n),"true"));case 1:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}function bu(e,t){pu.set(e._key(),t)}function wu(e){return Mn(e._redirectPersistence)}function xu(e){return Sr(du,e.config.apiKey,e.name)}function Iu(e,t,n){return function(e,t,n){return Eu.apply(this,arguments)}(e,t,n)}function Eu(){return Eu=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zr(t),On(t,n,Di),e.next=4,i._initializationPromise;case 4:return a=Zo(i,r),e.next=7,gu(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),Eu.apply(this,arguments)}function Tu(e,t,n){return function(e,t,n){return _u.apply(this,arguments)}(e,t,n)}function _u(){return(_u=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=Le(t)).auth,n,Di),e.next=4,i.auth._initializationPromise;case 4:return a=Zo(i.auth,r),e.next=7,gu(a,i.auth);case 7:return e.next=9,Pu(i);case 9:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",u));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t,n){return function(e,t,n){return Cu.apply(this,arguments)}(e,t,n)}function Cu(){return(Cu=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return On((i=Le(t)).auth,n,Di),e.next=4,i.auth._initializationPromise;case 4:return a=Zo(i.auth,r),e.next=7,Ji(!1,i,n.providerId);case 7:return e.next=9,gu(a,i.auth);case 9:return e.next=11,Pu(i);case 11:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",u));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Du(e,t){return Ou.apply(this,arguments)}function Ou(){return Ou=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(t)._initializationPromise;case 2:return e.abrupt("return",Nu(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Ou.apply(this,arguments)}function Nu(e,t){return Au.apply(this,arguments)}function Au(){return Au=s(o().mark((function e(t,n){var r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=zr(t),a=Zo(i,n),u=new vu(i,a,r),e.next=6,u.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}function Pu(e){return Ru.apply(this,arguments)}function Ru(){return(Ru=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ao("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lu=function(){function e(t){Y(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return J(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Fu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Cn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Mu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Mu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Fu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Uu(e){return ju.apply(this,arguments)}function ju(){return ju=s(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Wn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}var Vu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bu=/^https?/;function zu(){return zu=s(o().mark((function e(t){var n,r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Uu(t);case 4:n=e.sent,r=n.authorizedDomains,i=X(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(u=a.value,e.prev=11,!qu(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Sn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),zu.apply(this,arguments)}function qu(e){var t=Fn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Bu.test(r))return!1;if(Vu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ku=new Vn(3e4,6e4);function Gu(){var e=uo().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=b(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Wu=null;function Hu(e){return Wu=Wu||function(e){return new Promise((function(t,n){var r,i,a;function o(){Gu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Gu(),n(Cn(e,"network-request-failed"))},timeout:Ku.get()})}if(null===(i=null===(r=uo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=uo().gapi)||void 0===a?void 0:a.load)){var u=Ao("iframefcb");return uo()[u]=function(){gapi.load?o():n(Cn(e,"network-request-failed"))},No("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Wu=null,e}))}(e),Wu}var Qu=new Vn(5e3,15e3),Yu="__/auth/iframe",$u="emulator/auth/iframe",Ju={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zu(e){var t=e.config;An(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Bn(t,$u):"https://".concat(e.config.authDomain,"/").concat(Yu),r={apiKey:t.apiKey,appName:e.name,v:Ot},i=Xu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(De(r).slice(1))}function es(e){return ts.apply(this,arguments)}function ts(){return ts=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu(t);case 2:return n=e.sent,An(r=uo().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Zu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ju,dontclear:!0},(function(e){return new Promise(function(){var n=s(o().mark((function n(r,i){var a,u,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){uo().clearTimeout(u),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Cn(t,"network-request-failed"),u=uo().setTimeout((function(){i(a)}),Qu.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}var ns={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rs=function(){function e(t){Y(this,e),this.window=t,this.associatedEvent=null}return J(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function is(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ns),{width:r.toString(),height:i.toString(),top:a,left:o}),c=me().toLowerCase();n&&(u=Ar(c)?"_blank":n),Or(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=d(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Fr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:me())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new rs(null);var f=window.open(t||"",u,l);An(f,e,"popup-blocked");try{f.focus()}catch(h){}return new rs(f)}var as="__/auth/handler",os="emulator/auth/handler";function us(e,t,n,r,i,a){An(e.config.authDomain,e,"auth-domain-config-required"),An(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ot,eventId:i};if(t instanceof Di){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=d(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Oi){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(as);return Bn(t,os)}(e),"?").concat(De(p).slice(1))}var ss="webStorageSupport",cs=function(){function e(){Y(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=no,this._completeRedirectFn=Nu,this._overrideRedirectResult=bu}return J(e,[{key:"_openPopup",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),u=us(t,n,r,Fn(),i),e.abrupt("return",is(t,u,ao()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=us(t,n,r,Fn(),i),uo().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Rn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es(t);case 2:return n=e.sent,r=new Lu(t),n.register("authEvent",(function(e){return An(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(ss,{type:ss},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ss];void 0!==i&&t(!!i),Sn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return zu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ur()||Nr()||Fr()}}]),e}(),ls=cs,fs=function(){function e(t){Y(this,e),this.factorId=t}return J(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Pn("unexpected MultiFactorSessionType")}}}]),e}(),hs=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this,"phone")).credential=e,r}return J(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Wn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Gn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Wn(e,"POST","/v2/accounts/mfaSignIn:finalize",Gn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(fs),ds=function(){function e(){Y(this,e)}return J(e,null,[{key:"assertion",value:function(e){return hs._fromCredential(e)}}]),e}();ds.FACTOR_ID="phone";var ps=function(){function e(){Y(this,e)}return J(e,null,[{key:"assertionForEnrollment",value:function(e,t){return vs._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return vs._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,Wa(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",ys._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ps.FACTOR_ID="totp";var vs=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return J(n,[{key:"_finalizeEnroll",value:function(){var e=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Ha(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return An(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Co(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(fs),ys=function(){function e(t,n,r,i,a,o,u){Y(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return J(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(ms(e)||ms(t))&&(r=!0),r&&(ms(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),ms(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function ms(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var gs="@firebase/auth",ks="0.22.0",bs=function(){function e(t){Y(this,e),this.auth=t,this.internalListeners=new Map}return J(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){An(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var ws;!function(e){var t;null===(t=pe())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function xs(){return window}ws="Browser",It(new Me("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){An(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),An(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:ws,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jr(ws)},i=new Br(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),It(new Me("auth-internal",(function(e){return function(e){return new bs(e)}(zr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Mt(gs,ks,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ws)),Mt(gs,ks,"esm2017");var Is=2e3;function Es(e,t,n){return Ts.apply(this,arguments)}function Ts(){return Ts=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=xs(),u=a.BuildInfo,Rn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ns(n.sessionId);case 4:return s=e.sent,c={},Fr()?c.ibi=u.packageName:Rr()?c.apn=u.packageName:Sn(t,"operation-not-supported-in-this-environment"),u.displayName&&(c.appDisplayName=u.displayName),c.sessionId=s,e.abrupt("return",us(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),Ts.apply(this,arguments)}function _s(){return _s=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xs(),r=n.BuildInfo,i={},Fr()?i.iosBundleId=r.packageName:Rr()?i.androidPackageName=r.packageName:Sn(t,"operation-not-supported-in-this-environment"),e.next=5,Uu(t,i);case 5:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}function Ss(e){var t=xs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Cs(e,t,n){return Ds.apply(this,arguments)}function Ds(){return Ds=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xs(),a=i.cordova,u=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var o=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){o||(o=window.setTimeout((function(){i(Cn(t,"redirect-cancelled-by-user"))}),Is))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Rr()&&document.addEventListener("visibilitychange",l,!1),u=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}}));case 5:return e.prev=5,u(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ds.apply(this,arguments)}function Os(e){var t,n,r,i,a,o,u,s,c,l,f=xs();An("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),An("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),An("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),An("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),An("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Ns(e){return As.apply(this,arguments)}function As(){return(As=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ps(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ps(e){if(Rn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Rs=20,Ls=function(e){te(n,e);var t=ie(n);function n(){var e;return Y(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return J(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),fn(ne(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Lu);function Ms(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Bs(),postBody:null,tenantId:e.tenantId,error:Cn(e,"no-auth-event")}}function Fs(e,t){return zs()._set(qs(e),t)}function Us(e){return js.apply(this,arguments)}function js(){return js=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zs()._get(qs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,zs()._remove(qs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Vs(e,t){var n,r,i=function(e){var t=Ks(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ks(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ks(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ks(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Cn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Bs(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Rs;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function zs(){return Mn(eo)}function qs(e){return Sr("authEvent",e.config.apiKey,e.name)}function Ks(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=ln(e.split("?"));t[0];return Oe(t.slice(1).join("?"))}var Gs=function(){function e(){Y(this,e),this._redirectPersistence=no,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nu,this._overrideRedirectResult=bu}return J(e,[{key:"_initialize",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ls(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Sn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Os(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),pu.clear(),e.next=10,this._originValidation(t);case 10:return u=Ms(t,r,i),e.next=13,Fs(t,u);case 13:return e.next=15,Es(t,u,n);case 15:return s=e.sent,e.next=18,Ss(s);case 18:return c=e.sent,e.abrupt("return",Cs(t,a,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return _s.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=xs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,u=setTimeout(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Us(e);case 2:t.onEvent(Hs());case 3:case"end":return n.stop()}}),n)}))),500),c=function(){var n=s(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(u),n.next=3,Us(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Vs(i,r.url)),t.onEvent(a||Hs());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,c);var l=i,f="".concat(a.packageName.toLowerCase(),"://");xs().handleOpenURL=function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&c({url:t}),"function"===typeof l)try{l(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Ws=Gs;function Hs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Cn("no-auth-event")}}var Qs=1e3;function Ys(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function $s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return!("file:"!==Ys()&&"ionic:"!==Ys()&&"capacitor:"!==Ys()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return we()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me();return/Edge\/\d+/.test(e)}(e)}function Xs(){try{var e=self.localStorage,t=ao();if(e)return e.setItem(t,"1"),e.removeItem(t),!Js()||xe()}catch(n){return Zs()&&xe()}return!1}function Zs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ec(){return("http:"===Ys()||"https:"===Ys()||ke()||$s())&&!(be()||ge())&&Xs()&&!Zs()}function tc(){return $s()&&"undefined"!==typeof document}function nc(){return rc.apply(this,arguments)}function rc(){return(rc=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Qs);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ic={LOCAL:"local",NONE:"none",SESSION:"session"},ac=An,oc="persistence";function uc(e,t){ac(Object.values(ic).includes(t),e,"invalid-persistence-type"),be()?ac(t!==ic.SESSION,e,"unsupported-persistence-type"):ge()?ac(t===ic.NONE,e,"unsupported-persistence-type"):Zs()?ac(t===ic.NONE||t===ic.LOCAL&&xe(),e,"unsupported-persistence-type"):ac(t===ic.NONE||Xs(),e,"unsupported-persistence-type")}function sc(e){return cc.apply(this,arguments)}function cc(){return cc=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=lc(),r=Sr(oc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),cc.apply(this,arguments)}function lc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var fc=An,hc=function(){function e(){Y(this,e),this.browserResolver=Mn(ls),this.cordovaResolver=Mn(Ws),this.underlyingResolver=null,this._redirectPersistence=no,this._completeRedirectFn=Nu,this._overrideRedirectResult=bu}return J(e,[{key:"_initialize",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=s(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return tc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return fc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,nc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function dc(e){return e.unwrap()}function pc(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new kc(e,function(e,t){var n,r=Le(e),i=t;return An(t.customData.operationType,r,"argument-error"),An(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ka._fromError(r,i)}(e,t));else if(r){var i=vc(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function vc(e){var t=(e instanceof Ie?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ie)&&"temporaryProof"in t&&"phoneNumber"in t)return Xo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===pn.PASSWORD)return null;switch(r){case pn.GOOGLE:n=Pi;break;case pn.FACEBOOK:n=Ai;break;case pn.GITHUB:n=Ri;break;case pn.TWITTER:n=Fi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Li._create(r,u):ki._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ni(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ie?n.credentialFromError(e):n.credentialFromResult(e)}function yc(e,t){return t.catch((function(t){throw t instanceof Ie&&pc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,vc(t)),additionalUserInfo:za(e),user:bc.getOrCreate(r)}}))}function mc(e,t){return gc.apply(this,arguments)}function gc(){return gc=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return yc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),gc.apply(this,arguments)}var kc=function(){function e(t,n){Y(this,e),this.resolver=n,this.auth=t.wrapped()}return J(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return yc(dc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),bc=function(){function e(t){Y(this,e),this._delegate=t,this.multiFactor=function(e){var t=Le(e);return $a.has(t)||$a.set(t,Ya._fromUser(t)),$a.get(t)}(t)}return J(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yc(this.auth,aa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc(this.auth,Wo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yc(this.auth,lu(this._delegate,t,hc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(zr(this.auth));case 2:return e.abrupt("return",Su(this._delegate,t,hc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yc(this.auth,ua(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return mc(this.auth,function(e,t,n){return Qo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return yc(this.auth,function(e,t,n){return cu.apply(this,arguments)}(this._delegate,e,hc))}},{key:"reauthenticateWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc(zr(this.auth));case 2:return e.abrupt("return",Tu(this._delegate,t,hc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Da.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ra(Le(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ra(Le(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Jo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Pa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Oa.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();bc.USER_MAP=new WeakMap;var wc=An,xc=function(){function e(t,n){if(Y(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;wc(r,"invalid-api-key",{appName:t.name}),wc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?hc:void 0;this._delegate=n.initialize({options:{persistence:Ec(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(xn),this.linkUnderlyingAuth()}return J(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?bc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Kr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ga.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ka(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ma.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yc(this._delegate,xa(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ca.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Si.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wc(ec(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Du(this._delegate,hc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",yc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){zr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ic(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ic(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ea.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ya.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uc(this._delegate,t),e.t0=t,e.next=e.t0===ic.SESSION?4:e.t0===ic.LOCAL?6:e.t0===ic.NONE?11:13;break;case 4:return n=no,e.abrupt("break",14);case 6:return e.next=8,Mn(_o)._isAvailable();case 8:return r=e.sent,n=r?_o:eo,e.abrupt("break",14);case 11:return n=_r,e.abrupt("break",14);case 13:return e.abrupt("return",Sn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return yc(this._delegate,zi(this._delegate))}},{key:"signInWithCredential",value:function(e){return yc(this._delegate,ra(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return yc(this._delegate,function(e,t){return fa.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return yc(this._delegate,function(e,t,n){return ra(Le(e),Ci.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return yc(this._delegate,function(e,t,n){return Ta.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return mc(this._delegate,function(e,t,n){return Go.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wc(ec(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",yc(this._delegate,uu(this._delegate,t,hc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wc(ec(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,sc(this._delegate);case 3:return e.abrupt("return",Iu(this._delegate,t,hc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return wa.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ic(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&bc.getOrCreate(e))},error:t,complete:n}}function Ec(e,t){var n=function(e,t){var n=lc();if(!n)return[];var r=Sr(oc,e,t);switch(n.getItem(r)){case ic.NONE:return[_r];case ic.LOCAL:return[_o,no];case ic.SESSION:return[no];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(_o)||n.push(_o),"undefined"!==typeof window)for(var r=0,i=[eo,no];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(_r)||n.push(_r),n}xc.Persistence=ic;var Tc=function(){function e(){Y(this,e),this.providerId="phone",this._delegate=new Xo(dc(cn.auth()))}return J(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Xo.credential(e,t)}}]),e}();Tc.PHONE_SIGN_IN_METHOD=Xo.PHONE_SIGN_IN_METHOD,Tc.PROVIDER_ID=Xo.PROVIDER_ID;var _c,Sc=An,Cc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn.app();Y(this,e),Sc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new zo(t,n,i.auth()),this.type=this._delegate.type}return J(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(_c=cn).INTERNAL.registerComponent(new Me("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new xc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:vn,PASSWORD_RESET:yn,RECOVER_EMAIL:mn,REVERT_SECOND_FACTOR_ADDITION:gn,VERIFY_AND_CHANGE_EMAIL:kn,VERIFY_EMAIL:bn}},EmailAuthProvider:Ci,FacebookAuthProvider:Ai,GithubAuthProvider:Ri,GoogleAuthProvider:Pi,OAuthProvider:Ni,SAMLAuthProvider:Mi,PhoneAuthProvider:Tc,PhoneMultiFactorGenerator:ds,RecaptchaVerifier:Cc,TwitterAuthProvider:Fi,Auth:xc,AuthCredential:Hr,Error:Ie}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_c.registerVersion("@firebase/auth-compat","0.3.7");var Dc,Oc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Nc={},Ac=Ac||{},Pc=Oc||self;function Rc(){}function Lc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Mc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Fc="closure_uid_"+(1e9*Math.random()>>>0),Uc=0;function jc(e,t,n){return e.call.apply(e.bind,arguments)}function Vc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bc(e,t,n){return(Bc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jc:Vc).apply(null,arguments)}function zc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qc(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Kc(){this.s=this.s,this.o=this.o}Kc.prototype.s=!1,Kc.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Fc)&&e[Fc]||(e[Fc]=++Uc))},Kc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Gc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Wc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Hc(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Lc(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Qc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Qc.prototype.h=function(){this.defaultPrevented=!0};var Yc=function(){if(!Pc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Pc.addEventListener("test",Rc,t),Pc.removeEventListener("test",Rc,t)}catch(n){}return e}();function $c(e){return/^[\s\xa0]*$/.test(e)}var Jc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Xc(e,t){return e<t?-1:e>t?1:0}function Zc(){var e=Pc.navigator;return e&&(e=e.userAgent)?e:""}function el(e){return-1!=Zc().indexOf(e)}function tl(e){return tl[" "](e),e}tl[" "]=Rc;var nl,rl=el("Opera"),il=el("Trident")||el("MSIE"),al=el("Edge"),ol=al||il,ul=el("Gecko")&&!(-1!=Zc().toLowerCase().indexOf("webkit")&&!el("Edge"))&&!(el("Trident")||el("MSIE"))&&!el("Edge"),sl=-1!=Zc().toLowerCase().indexOf("webkit")&&!el("Edge");function cl(){var e=Pc.document;return e?e.documentMode:void 0}e:{var ll="",fl=function(){var e=Zc();return ul?/rv:([^\);]+)(\)|;)/.exec(e):al?/Edge\/([\d\.]+)/.exec(e):il?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):sl?/WebKit\/(\S+)/.exec(e):rl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fl&&(ll=fl?fl[1]:""),il){var hl=cl();if(null!=hl&&hl>parseFloat(ll)){nl=String(hl);break e}}nl=ll}var dl,pl={};function vl(){return function(e){var t=pl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Jc(String(nl)).split("."),n=Jc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Xc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Xc(0==a[2].length,0==o[2].length)||Xc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Pc.document&&il){var yl=cl();dl=yl||(parseInt(nl,10)||void 0)}else dl=void 0;var ml=dl;function gl(e,t){if(Qc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ul){e:{try{tl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:kl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&gl.X.h.call(this)}}qc(gl,Qc);var kl={2:"touch",3:"pen",4:"mouse"};gl.prototype.h=function(){gl.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var bl="closure_listenable_"+(1e6*Math.random()|0),wl=0;function xl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++wl,this.ba=this.ea=!1}function Il(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function El(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Tl(e){var t={};for(var n in e)t[n]=e[n];return t}var _l="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<_l.length;a++)n=_l[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Cl(e){this.src=e,this.g={},this.h=0}function Dl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Gc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Il(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ol(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Cl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ol(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new xl(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Nl="closure_lm_"+(1e6*Math.random()|0),Al={};function Pl(e,t,n,r,i){if(r&&r.once)return Ll(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Pl(e,t[a],n,r,i);return null}return n=zl(n),e&&e[bl]?e.N(t,n,Mc(r)?!!r.capture:!!r,i):Rl(e,t,n,!1,r,i)}function Rl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Mc(i)?!!i.capture:!!i,u=Vl(e);if(u||(e[Nl]=u=new Cl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=jl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ul(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ll(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ll(e,t[a],n,r,i);return null}return n=zl(n),e&&e[bl]?e.O(t,n,Mc(r)?!!r.capture:!!r,i):Rl(e,t,n,!0,r,i)}function Ml(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ml(e,t[a],n,r,i);else r=Mc(r)?!!r.capture:!!r,n=zl(n),e&&e[bl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ol(a=e.g[t],n,r,i))&&(Il(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Vl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ol(t,n,r,i)),(n=-1<e?t[e]:null)&&Fl(n))}function Fl(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[bl])Dl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ul(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Vl(t))?(Dl(n,e),0==n.h&&(n.src=null,t[Nl]=null)):Il(e)}}}function Ul(e){return e in Al?Al[e]:Al[e]="on"+e}function jl(e,t){if(e.ba)e=!0;else{t=new gl(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Fl(e),e=n.call(r,t)}return e}function Vl(e){return(e=e[Nl])instanceof Cl?e:null}var Bl="__closure_events_fn_"+(1e9*Math.random()>>>0);function zl(e){return"function"===typeof e?e:(e[Bl]||(e[Bl]=function(t){return e.handleEvent(t)}),e[Bl])}function ql(){Kc.call(this),this.i=new Cl(this),this.P=this,this.I=null}function Kl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Qc(t,e);else if(t instanceof Qc)t.target=t.target||e;else{var i=t;Sl(t=new Qc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Gl(o,r,!0,t)&&i}if(i=Gl(o=t.g=e,r,!0,t)&&i,i=Gl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Gl(o=t.g=n[a],r,!1,t)&&i}function Gl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Dl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}qc(ql,Kc),ql.prototype[bl]=!0,ql.prototype.removeEventListener=function(e,t,n,r){Ml(this,e,t,n,r)},ql.prototype.M=function(){if(ql.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Il(n[r]);delete t.g[e],t.h--}}this.I=null},ql.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ql.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Wl=Pc.JSON.stringify;function Hl(){var e=tf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ql,Yl=function(){function e(){Y(this,e),this.h=this.g=null}return J(e,[{key:"add",value:function(e,t){var n=$l.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),$l=new(function(){function e(t,n){Y(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return J(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Jl}),(function(e){return e.reset()})),Jl=function(){function e(){Y(this,e),this.next=this.g=this.h=null}return J(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Xl(e){Pc.setTimeout((function(){throw e}),0)}function Zl(e,t){Ql||function(){var e=Pc.Promise.resolve(void 0);Ql=function(){e.then(nf)}}(),ef||(Ql(),ef=!0),tf.add(e,t)}var ef=!1,tf=new Yl;function nf(){for(var e;e=Hl();){try{e.h.call(e.g)}catch(n){Xl(n)}var t=$l;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ef=!1}function rf(e,t){ql.call(this),this.h=e||1,this.g=t||Pc,this.j=Bc(this.lb,this),this.l=Date.now()}function af(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function of(e,t,n){if("function"===typeof e)n&&(e=Bc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Pc.setTimeout(e,t||0)}function uf(e){e.g=of((function(){e.g=null,e.i&&(e.i=!1,uf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}qc(rf,ql),(Dc=rf.prototype).ca=!1,Dc.R=null,Dc.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Kl(this,"tick"),this.ca&&(af(this),this.start()))}},Dc.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dc.M=function(){rf.X.M.call(this),af(this),delete this.g};var sf=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return J(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:uf(this)}},{key:"M",value:function(){fn(ne(n.prototype),"M",this).call(this),this.g&&(Pc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Kc);function cf(e){Kc.call(this),this.h=e,this.g={}}qc(cf,Kc);var lf=[];function ff(e,t,n,r){Array.isArray(n)||(n&&(lf[0]=n.toString()),n=lf);for(var i=0;i<n.length;i++){var a=Pl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function hf(e){El(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Fl(e)}),e),e.g={}}function df(){this.g=!0}function pf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Wl(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}cf.prototype.M=function(){cf.X.M.call(this),hf(this)},cf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},df.prototype.Aa=function(){this.g=!1},df.prototype.info=function(){};var vf={},yf=null;function mf(){return yf=yf||new ql}function gf(e){Qc.call(this,vf.Pa,e)}function kf(e){var t=mf();Kl(t,new gf(t))}function bf(e,t){Qc.call(this,vf.STAT_EVENT,e),this.stat=t}function wf(e){var t=mf();Kl(t,new bf(t,e))}function xf(e,t){Qc.call(this,vf.Qa,e),this.size=t}function If(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Pc.setTimeout((function(){e()}),t)}vf.Pa="serverreachability",qc(gf,Qc),vf.STAT_EVENT="statevent",qc(bf,Qc),vf.Qa="timingevent",qc(xf,Qc);var Ef={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Tf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function _f(){}function Sf(e){return e.h||(e.h=e.i())}function Cf(){}_f.prototype.h=null;var Df,Of={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Nf(){Qc.call(this,"d")}function Af(){Qc.call(this,"c")}function Pf(){}function Rf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new cf(this),this.O=Mf,e=ol?125:void 0,this.T=new rf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Lf}function Lf(){this.i=null,this.g="",this.h=!1}qc(Nf,Qc),qc(Af,Qc),qc(Pf,_f),Pf.prototype.g=function(){return new XMLHttpRequest},Pf.prototype.i=function(){return{}},Df=new Pf;var Mf=45e3,Ff={},Uf={};function jf(e,t,n){e.K=1,e.v=ih(Zf(t)),e.s=n,e.P=!0,Vf(e,null)}function Vf(e,t){e.F=Date.now(),Kf(e),e.A=Zf(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),mh(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Lf,e.g=gd(e.l,n?t:null,!e.s),0<e.N&&(e.L=new sf(Bc(e.La,e,e.g),e.N)),ff(e.S,e.g,"readystatechange",e.ib),t=e.H?Tl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),kf(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Bf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function zf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=qf(e,n))==Uf){4==t&&(e.o=4,wf(14),i=!1),pf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ff){e.o=4,wf(15),pf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}pf(e.j,e.m,r,null),Yf(e,r)}Bf(e)&&r!=Uf&&r!=Ff&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,wf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ld(t),t.K=!0,wf(11))):(pf(e.j,e.m,n,"[Invalid Chunked Response]"),Qf(e),Hf(e))}function qf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Uf:(n=Number(t.substring(n,r)),isNaN(n)?Ff:(r+=1)+n>t.length?Uf:(t=t.substr(r,n),e.C=r+n,t))}function Kf(e){e.V=Date.now()+e.O,Gf(e,e.O)}function Gf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=If(Bc(e.gb,e),t)}function Wf(e){e.B&&(Pc.clearTimeout(e.B),e.B=null)}function Hf(e){0==e.l.G||e.I||dd(e.l,e)}function Qf(e){Wf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,af(e.T),hf(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Yf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Th(n.h,e)))if(!e.J&&Th(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;hd(n),nd(n)}cd(n),wf(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=If(Bc(n.cb,n),6e3));if(1>=Eh(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else vd(n,11)}else if((e.J||n.g==e)&&hd(n),!$c(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(_h(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,rh(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=md(r,r.H?r.ka:null,r.V),d.J){Sh(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Wf(p),Kf(p)),r.g=d}else sd(r);0<n.i.length&&id(n)}else"stop"!=a[0]&&"close"!=a[0]||vd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?vd(n,7):td(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}kf()}catch(a){}}function $f(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Lc(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Lc(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Lc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Dc=Rf.prototype).setTimeout=function(e){this.O=e},Dc.ib=function(e){e=e.target;var t=this.L;t&&3==Yh(e)?t.l():this.La(e)},Dc.La=function(e){try{if(e==this.g)e:{var t=Yh(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||ol||this.g&&(this.h.h||this.g.fa()||$h(this.g)))){this.I||4!=t||7==n||kf(),Wf(this);var r=this.g.aa();this.Y=r;t:if(Bf(this)){var i=$h(this.g);e="";var a=i.length,o=4==Yh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qf(this),Hf(this);var u="";break t}this.h.i=new Pc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$c(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,wf(12),Qf(this),Hf(this);break e}pf(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yf(this,r)}this.P?(zf(this,t,u),ol&&this.i&&3==t&&(ff(this.S,this.T,"tick",this.hb),this.T.start())):(pf(this.j,this.m,u,null),Yf(this,u)),4==t&&Qf(this),this.i&&!this.I&&(4==t?dd(this.l,this):(this.i=!1,Kf(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,wf(12)):(this.o=0,wf(13)),Qf(this),Hf(this)}}}catch(t){}},Dc.hb=function(){if(this.g){var e=Yh(this.g),t=this.g.fa();this.C<t.length&&(Wf(this),zf(this,e,t),this.i&&4!=e&&Kf(this))}},Dc.cancel=function(){this.I=!0,Qf(this)},Dc.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(kf(),wf(17)),Qf(this),this.o=2,Hf(this)):Gf(this,this.V-e)};var Jf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xf(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xf){this.h=void 0!==t?t:e.h,eh(this,e.j),this.s=e.s,this.g=e.g,th(this,e.m),this.l=e.l,t=e.i;var n=new dh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),nh(this,n),this.o=e.o}else e&&(n=String(e).match(Jf))?(this.h=!!t,eh(this,n[1]||"",!0),this.s=ah(n[2]||""),this.g=ah(n[3]||"",!0),th(this,n[4]),this.l=ah(n[5]||"",!0),nh(this,n[6]||"",!0),this.o=ah(n[7]||"")):(this.h=!!t,this.i=new dh(null,this.h))}function Zf(e){return new Xf(e)}function eh(e,t,n){e.j=n?ah(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function th(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function nh(e,t,n){t instanceof dh?(e.i=t,function(e,t){t&&!e.j&&(ph(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(vh(this,t),mh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=oh(t,fh)),e.i=new dh(t,e.h))}function rh(e,t,n){e.i.set(t,n)}function ih(e){return rh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ah(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function oh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,uh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function uh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(oh(t,sh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(oh(t,sh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(oh(n,"/"==n.charAt(0)?lh:ch,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",oh(n,hh)),e.join("")};var sh=/[#\/\?@]/g,ch=/[#\?:]/g,lh=/[#\?]/g,fh=/[#\?@]/g,hh=/#/g;function dh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ph(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vh(e,t){ph(e),t=gh(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yh(e,t){return ph(e),t=gh(e,t),e.g.has(t)}function mh(e,t,n){vh(e,t),0<n.length&&(e.i=null,e.g.set(gh(e,t),Wc(n)),e.h+=n.length)}function gh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Dc=dh.prototype).add=function(e,t){ph(this),this.i=null,e=gh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Dc.forEach=function(e,t){ph(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Dc.oa=function(){ph(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Dc.W=function(e){ph(this);var t=[];if("string"===typeof e)yh(this,e)&&(t=t.concat(this.g.get(gh(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Dc.set=function(e,t){return ph(this),this.i=null,yh(this,e=gh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Dc.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Dc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var kh=J((function e(t,n){Y(this,e),this.h=t,this.g=n}));function bh(e){this.l=e||xh,Pc.PerformanceNavigationTiming?e=0<(e=Pc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Pc.g&&Pc.g.Ga&&Pc.g.Ga()&&Pc.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wh,xh=10;function Ih(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Eh(e){return e.h?1:e.g?e.g.size:0}function Th(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function _h(e,t){e.g?e.g.add(t):e.h=t}function Sh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ch(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=X(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Wc(e.i)}function Dh(){}function Oh(){this.g=new Dh}function Nh(e,t,n){var r=n||"";try{$f(e,(function(e,n){var i=e;Mc(e)&&(i=Wl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ah(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ph(e){this.l=e.ac||null,this.j=e.jb||!1}function Rh(e,t){ql.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Lh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bh.prototype.cancel=function(){if(this.i=Ch(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=X(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Dh.prototype.stringify=function(e){return Pc.JSON.stringify(e,void 0)},Dh.prototype.parse=function(e){return Pc.JSON.parse(e,void 0)},qc(Ph,_f),Ph.prototype.g=function(){return new Rh(this.l,this.j)},Ph.prototype.i=(wh={},function(){return wh}),qc(Rh,ql);var Lh=0;function Mh(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Fh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Uh(e)}function Uh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Dc=Rh.prototype).open=function(e,t){if(this.readyState!=Lh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Uh(this)},Dc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Pc).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Dc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fh(this)),this.readyState=Lh},Dc.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Pc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mh(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Dc.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Fh(this):Uh(this),3==this.readyState&&Mh(this)}},Dc.Va=function(e){this.g&&(this.response=this.responseText=e,Fh(this))},Dc.Ua=function(e){this.g&&(this.response=e,Fh(this))},Dc.ga=function(){this.g&&Fh(this)},Dc.setRequestHeader=function(e,t){this.v.append(e,t)},Dc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Dc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var jh=Pc.JSON.parse;function Vh(e){ql.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bh,this.K=this.L=!1}qc(Vh,ql);var Bh="",zh=/^https?$/i,qh=["POST","PUT"];function Kh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Gh(e),Hh(e)}function Gh(e){e.D||(e.D=!0,Kl(e,"complete"),Kl(e,"error"))}function Wh(e){if(e.h&&"undefined"!=typeof Ac&&(!e.C[1]||4!=Yh(e)||2!=e.aa()))if(e.v&&4==Yh(e))of(e.Ha,0,e);else if(Kl(e,"readystatechange"),4==Yh(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Jf)[1]||null;if(!a&&Pc.self&&Pc.self.location){var o=Pc.self.location.protocol;a=o.substr(0,o.length-1)}i=!zh.test(a?a.toLowerCase():"")}t=i}if(t)Kl(e,"complete"),Kl(e,"success");else{e.m=6;try{var u=2<Yh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Gh(e)}}finally{Hh(e)}}}function Hh(e,t){if(e.g){Qh(e);var n=e.g,r=e.C[0]?Rc:null;e.g=null,e.C=null,t||Kl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Qh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Pc.clearTimeout(e.A),e.A=null)}function Yh(e){return e.g?e.g.readyState:0}function $h(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Bh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ld){return null}}function Jh(e){var t="";return El(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Xh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jh(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):rh(e,t,n))}function Zh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ed(e){this.Ca=0,this.i=[],this.j=new df,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Zh("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Zh("baseRetryDelayMs",5e3,e),this.bb=Zh("retryDelaySeedMs",1e4,e),this.$a=Zh("forwardChannelMaxRetries",2,e),this.ta=Zh("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new bh(e&&e.concurrentRequestLimit),this.Fa=new Oh,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function td(e){if(rd(e),3==e.G){var t=e.U++,n=Zf(e.F);rh(n,"SID",e.I),rh(n,"RID",t),rh(n,"TYPE","terminate"),od(e,n),(t=new Rf(e,e.j,t,void 0)).K=2,t.v=ih(Zf(n)),n=!1,Pc.navigator&&Pc.navigator.sendBeacon&&(n=Pc.navigator.sendBeacon(t.v.toString(),"")),!n&&Pc.Image&&((new Image).src=t.v,n=!0),n||(t.g=gd(t.l,null),t.g.da(t.v)),t.F=Date.now(),Kf(t)}yd(e)}function nd(e){e.g&&(ld(e),e.g.cancel(),e.g=null)}function rd(e){nd(e),e.u&&(Pc.clearTimeout(e.u),e.u=null),hd(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Pc.clearTimeout(e.m),e.m=null)}function id(e){Ih(e.h)||e.m||(e.m=!0,Zl(e.Ja,e),e.C=0)}function ad(e,t){var n;n=t?t.m:e.U++;var r=Zf(e.F);rh(r,"SID",e.I),rh(r,"RID",n),rh(r,"AID",e.T),od(e,r),e.o&&e.s&&Xh(r,e.o,e.s),n=new Rf(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=ud(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),_h(e.h,n),jf(n,r,t)}function od(e,t){e.ia&&El(e.ia,(function(e,n){rh(t,n,e)})),e.l&&$f({},(function(e,n){rh(t,n,e)}))}function ud(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Bc(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Nh(l,o,"req"+c+"_")}catch(Gd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function sd(e){e.g||e.u||(e.Z=1,Zl(e.Ia,e),e.A=0)}function cd(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=If(Bc(e.Ia,e),pd(e,e.A)),e.A++,!0)}function ld(e){null!=e.B&&(Pc.clearTimeout(e.B),e.B=null)}function fd(e){e.g=new Rf(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Zf(e.sa);rh(t,"RID","rpc"),rh(t,"SID",e.I),rh(t,"CI",e.L?"0":"1"),rh(t,"AID",e.T),rh(t,"TYPE","xmlhttp"),od(e,t),e.o&&e.s&&Xh(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=ih(Zf(t)),n.s=null,n.P=!0,Vf(n,e)}function hd(e){null!=e.v&&(Pc.clearTimeout(e.v),e.v=null)}function dd(e,t){var n=null;if(e.g==t){hd(e),ld(e),e.g=null;var r=2}else{if(!Th(e.h,t))return;n=t.D,Sh(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Kl(r=mf(),new xf(r,n)),id(e)}else sd(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Eh(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=If(Bc(e.Ja,e,t),pd(e,e.C)),e.C++,!0))}(e,t)||2==r&&cd(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:vd(e,5);break;case 4:vd(e,10);break;case 3:vd(e,6);break;default:vd(e,2)}}function pd(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function vd(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Bc(e.kb,e);n||(n=new Xf("//www.google.com/images/cleardot.gif"),Pc.location&&"http"==Pc.location.protocol||eh(n,"https"),ih(n)),function(e,t){var n=new df;if(Pc.Image){var r=new Image;r.onload=zc(Ah,n,r,"TestLoadImage: loaded",!0,t),r.onerror=zc(Ah,n,r,"TestLoadImage: error",!1,t),r.onabort=zc(Ah,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=zc(Ah,n,r,"TestLoadImage: timeout",!1,t),Pc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else wf(2);e.G=0,e.l&&e.l.va(t),yd(e),rd(e)}function yd(e){if(e.G=0,e.la=[],e.l){var t=Ch(e.h);0==t.length&&0==e.i.length||(Hc(e.la,t),Hc(e.la,e.i),e.h.i.length=0,Wc(e.i),e.i.length=0),e.l.ua()}}function md(e,t,n){var r=n instanceof Xf?Zf(n):new Xf(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),th(r,r.m);else{var i=Pc.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Xf(null,void 0);r&&eh(a,r),t&&(a.g=t),i&&th(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&rh(r,n,t),rh(r,"VER",e.ma),od(e,r),r}function gd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Vh(new Ph({jb:!0})):new Vh(e.ra)).Ka(e.H),t}function kd(){}function bd(){if(il&&!(10<=Number(ml)))throw Error("Environmental error: no available transport.")}function wd(e,t){ql.call(this),this.g=new ed(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!$c(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$c(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ed(this)}function xd(e){Nf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Id(){Af.call(this),this.status=1}function Ed(e){this.g=e}(Dc=Vh.prototype).Ka=function(e){this.L=e},Dc.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Df.g(),this.C=this.u?Sf(this.u):Sf(Df),this.g.onreadystatechange=Bc(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Kh(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=X(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Pc.FormData&&e instanceof Pc.FormData,!(0<=Gc(qh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=X(n);try{for(c.s();!(s=c.n()).done;){var l=d(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qh(this),0<this.B&&((this.K=function(e){return il&&vl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bc(this.qa,this)):this.A=of(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Kh(this,u)}},Dc.qa=function(){"undefined"!=typeof Ac&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kl(this,"timeout"),this.abort(8))},Dc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Kl(this,"complete"),Kl(this,"abort"),Hh(this))},Dc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hh(this,!0)),Vh.X.M.call(this)},Dc.Ha=function(){this.s||(this.F||this.v||this.l?Wh(this):this.fb())},Dc.fb=function(){Wh(this)},Dc.aa=function(){try{return 2<Yh(this)?this.g.status:-1}catch(wh){return-1}},Dc.fa=function(){try{return this.g?this.g.responseText:""}catch(wh){return""}},Dc.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jh(t)}},Dc.Ea=function(){return this.m},Dc.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Dc=ed.prototype).ma=8,Dc.G=1,Dc.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Rf(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Sl(n=Tl(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ud(this,t,r),rh(i=Zf(this.F),"RID",e),rh(i,"CVER",22),this.D&&rh(i,"X-HTTP-Session-Id",this.D),od(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Jh(n)))+"&"+r:this.o&&Xh(i,this.o,n)),_h(this.h,t),this.Ya&&rh(i,"TYPE","init"),this.O?(rh(i,"$req",r),rh(i,"SID","null"),t.Z=!0,jf(t,i,null)):jf(t,i,r),this.G=2}}else 3==this.G&&(e?ad(this,e):0==this.i.length||Ih(this.h)||ad(this))},Dc.Ia=function(){if(this.u=null,fd(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=If(Bc(this.eb,this),e)}},Dc.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wf(10),nd(this),fd(this))},Dc.cb=function(){null!=this.v&&(this.v=null,nd(this),cd(this),wf(19))},Dc.kb=function(e){e?(this.j.info("Successfully pinged google.com"),wf(2)):(this.j.info("Failed to ping google.com"),wf(1))},(Dc=kd.prototype).xa=function(){},Dc.wa=function(){},Dc.va=function(){},Dc.ua=function(){},Dc.Ra=function(){},bd.prototype.g=function(e,t){return new wd(e,t)},qc(wd,ql),wd.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;wf(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=md(e,null,e.V),id(e)},wd.prototype.close=function(){td(this.g)},wd.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Wl(e),e=n);t.i.push(new kh(t.ab++,e)),3==t.G&&id(t)},wd.prototype.M=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,wd.X.M.call(this)},qc(xd,Nf),qc(Id,Af),qc(Ed,kd),Ed.prototype.xa=function(){Kl(this.g,"a")},Ed.prototype.wa=function(e){Kl(this.g,new xd(e))},Ed.prototype.va=function(e){Kl(this.g,new Id)},Ed.prototype.ua=function(){Kl(this.g,"b")},bd.prototype.createWebChannel=bd.prototype.g,wd.prototype.send=wd.prototype.u,wd.prototype.open=wd.prototype.m,wd.prototype.close=wd.prototype.close,Ef.NO_ERROR=0,Ef.TIMEOUT=8,Ef.HTTP_ERROR=6,Tf.COMPLETE="complete",Cf.EventType=Of,Of.OPEN="a",Of.CLOSE="b",Of.ERROR="c",Of.MESSAGE="d",ql.prototype.listen=ql.prototype.N,Vh.prototype.listenOnce=Vh.prototype.O,Vh.prototype.getLastError=Vh.prototype.Oa,Vh.prototype.getLastErrorCode=Vh.prototype.Ea,Vh.prototype.getStatus=Vh.prototype.aa,Vh.prototype.getResponseJson=Vh.prototype.Sa,Vh.prototype.getResponseText=Vh.prototype.fa,Vh.prototype.send=Vh.prototype.da,Vh.prototype.setWithCredentials=Vh.prototype.Ka;var Td=Nc.createWebChannelTransport=function(){return new bd},_d=Nc.getStatEventTarget=function(){return mf()},Sd=Nc.ErrorCode=Ef,Cd=Nc.EventType=Tf,Dd=Nc.Event=vf,Od=Nc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Nd=Nc.FetchXmlHttpFactory=Ph,Ad=Nc.WebChannel=Cf,Pd=Nc.XhrIo=Vh,Rd="@firebase/firestore",Ld=function(){function e(t){Y(this,e),this.uid=t}return J(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ld.UNAUTHENTICATED=new Ld(null),Ld.GOOGLE_CREDENTIALS=new Ld("google-credentials-uid"),Ld.FIRST_PARTY=new Ld("first-party-uid"),Ld.MOCK_USER=new Ld("mock-user");var Md="9.19.0",Fd=new He("@firebase/firestore");function Ud(){return Fd.logLevel}function jd(e){if(Fd.logLevel<=Ve.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zd);Fd.debug.apply(Fd,["Firestore (".concat(Md,"): ").concat(e)].concat(b(i)))}}function Vd(e){if(Fd.logLevel<=Ve.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zd);Fd.error.apply(Fd,["Firestore (".concat(Md,"): ").concat(e)].concat(b(i)))}}function Bd(e){if(Fd.logLevel<=Ve.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zd);Fd.warn.apply(Fd,["Firestore (".concat(Md,"): ").concat(e)].concat(b(i)))}}function zd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function qd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Md,") INTERNAL ASSERTION FAILED: ")+e;throw Vd(t),new Error(t)}function Kd(e,t){e||qd()}function Gd(e,t){return e}var Wd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hd=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return J(n)}(Ie),Qd=J((function e(){var t=this;Y(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Yd=J((function e(t,n){Y(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),$d=function(){function e(){Y(this,e)}return J(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ld.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jd=function(){function e(t){Y(this,e),this.token=t,this.changeListener=null}return J(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Xd=function(){function e(t){Y(this,e),this.t=t,this.currentUser=Ld.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return J(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=a;e.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){jd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(jd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qd)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Kd("string"==typeof n.accessToken),new Yd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Kd(null===e||"string"==typeof e),new Ld(e)}}]),e}(),Zd=function(){function e(t,n,r){Y(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Ld.FIRST_PARTY,this.g=new Map}return J(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),ep=function(){function e(t,n,r){Y(this,e),this.h=t,this.l=n,this.m=r}return J(e,[{key:"getToken",value:function(){return Promise.resolve(new Zd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ld.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),tp=J((function e(t){Y(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),np=function(){function e(t){Y(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return J(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,jd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):jd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Kd("string"==typeof t.token),e.T=t.token,new tp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function rp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ip=function(){function e(){Y(this,e)}return J(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=rp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function ap(e,t){return e<t?-1:e>t?1:0}function op(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function up(e){return e+"\0"}var sp=function(){function e(t,n){if(Y(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hd(Wd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return J(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ap(this.nanoseconds,e.nanoseconds):ap(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),cp=function(){function e(t){Y(this,e),this.timestamp=t}return J(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new sp(0,0))}},{key:"max",value:function(){return new e(new sp(253402300799,999999999))}}]),e}(),lp=function(){function e(t,n,r){Y(this,e),void 0===n?n=0:n>t.length&&qd(),void 0===r?r=t.length-n:r>t.length-n&&qd(),this.segments=t,this.offset=n,this.len=r}return J(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),fp=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,b(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lp),hp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dp=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Hd(Wd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Hd(Wd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Hd(Wd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lp),pp=function(){function e(t){Y(this,e),this.path=t}return J(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===fp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(fp.fromString(t))}},{key:"fromName",value:function(t){return new e(fp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(fp.emptyPath())}},{key:"comparator",value:function(e,t){return fp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new fp(t.slice()))}}]),e}(),vp=J((function e(t,n,r,i){Y(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function yp(e){return e.fields.find((function(e){return 2===e.kind}))}function mp(e){return e.fields.filter((function(e){return 2!==e.kind}))}vp.UNKNOWN_ID=-1;var gp=J((function e(t,n){Y(this,e),this.fieldPath=t,this.kind=n}));var kp=function(){function e(t,n){Y(this,e),this.sequenceNumber=t,this.offset=n}return J(e,null,[{key:"empty",value:function(){return new e(0,xp.min())}}]),e}();function bp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cp.fromTimestamp(1e9===r?new sp(n+1,0):new sp(n,r));return new xp(i,pp.empty(),t)}function wp(e){return new xp(e.readTime,e.key,-1)}var xp=function(){function e(t,n,r){Y(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return J(e,null,[{key:"min",value:function(){return new e(cp.min(),pp.empty(),-1)}},{key:"max",value:function(){return new e(cp.max(),pp.empty(),-1)}}]),e}();function Ip(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=pp.comparator(e.documentKey,t.documentKey))?n:ap(e.largestBatchId,t.largestBatchId)}var Ep="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tp=function(){function e(){Y(this,e),this.onCommittedListeners=[]}return J(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function _p(e){return Sp.apply(this,arguments)}function Sp(){return Sp=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Wd.FAILED_PRECONDITION&&t.message===Ep){e.next=2;break}throw t;case 2:jd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}var Cp=function(){function e(t){var n=this;Y(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return J(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&qd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=X(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Dp=function(){function e(t,n){var r=this;Y(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new Qd,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Ap(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Fp(e.target.error);r.R.reject(new Ap(t,n))}}return J(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(jd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Rp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ap(n,t)}}}]),e}(),Op=function(){function e(t,n,r){Y(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(me())&&Vd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return J(e,[{key:"$",value:function(){var e=s(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ap(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Hd(Wd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Hd(Wd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ap(t,n))},i.onupgradeneeded=function(e){jd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){jd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s,c,l=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,u=0,s=o().mark((function e(){var n,s,c,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,l.$(t);case 4:return l.db=e.sent,n=Dp.open(l.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Cp.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.v;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,f="FirebaseError"!==c.name&&u<3,jd("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),l.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jd("SimpleDb","Removing database:",e),Lp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!xe())return!1;if(e.C())return!0;var t=me(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/chess-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Np=function(){function e(t){Y(this,e),this.L=t,this.q=!1,this.U=null}return J(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Lp(this.L.delete())}}]),e}(),Ap=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,Wd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return J(n)}(Hd);function Pp(e){return"IndexedDbTransactionError"===e.name}var Rp=function(){function e(t){Y(this,e),this.store=t}return J(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Lp(n)}},{key:"add",value:function(e){return jd("SimpleDb","ADD",this.store.name,e,e),Lp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Lp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jd("SimpleDb","DELETE",this.store.name,e),Lp(this.store.delete(e))}},{key:"count",value:function(){return jd("SimpleDb","COUNT",this.store.name),Lp(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Cp((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Cp((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){jd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Cp((function(n,r){t.onerror=function(e){var t=Fp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Cp((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Np(i),o=t(i.primaryKey,i.value,a);if(o instanceof Cp){var u=o.catch((function(e){return a.done(),Cp.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Cp.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Lp(e){return new Cp((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Fp(e.target.error);n(t)}}))}var Mp=!1;function Fp(e){var t=Op.S(me());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Hd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Mp||(Mp=!0,setTimeout((function(){throw r}),0)),r}}return e}var Up=function(){function e(t,n){Y(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return J(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;jd("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=jd,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Pp(e.t4)){e.next=17;break}jd("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,_p(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),jp=function(){function e(t,n){Y(this,e),this.localStore=t,this.persistence=n}return J(e,[{key:"nt",value:function(){var e=s(o().mark((function e(){var t,n=this,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Cp.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return jd("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return jd("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=wp(t);Ip(r,n)>0&&(n=r)})),new xp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Vp=function(){function e(t,n){var r=this;Y(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return J(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Bp(e){return null==e}function zp(e){return 0===e&&1/e==-1/0}function qp(e){return"number"==typeof e&&Number.isInteger(e)&&!zp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Kp(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Wp(t)),t=Gp(e.get(n),t);return Wp(t)}function Gp(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Wp(e){return e+"\x01\x01"}function Hp(e){var t=e.length;if(Kd(t>=2),2===t)return Kd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&qd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:qd()}a=o+2}return new fp(r)}Vp.ct=-1;var Qp=["userId","batchId"];function Yp(e,t){return[e,Kp(t)]}function $p(e,t,n){return[e,Kp(t),n]}var Jp={},Xp=["prefixPath","collectionGroup","readTime","documentId"],Zp=["prefixPath","collectionGroup","documentId"],ev=["collectionGroup","readTime","prefixPath","documentId"],tv=["canonicalId","targetId"],nv=["targetId","path"],rv=["path","targetId"],iv=["collectionId","parent"],av=["indexId","uid"],ov=["uid","sequenceNumber"],uv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sv=["indexId","uid","orderedDocumentKey"],cv=["userId","collectionPath","documentId"],lv=["userId","collectionPath","largestBatchId"],fv=["userId","collectionGroup","largestBatchId"],hv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),dv=[].concat(b(hv),["documentOverlays"]),pv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vv=pv,yv=[].concat(vv,["indexConfiguration","indexState","indexEntries"]),mv=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return J(n)}(Tp);function gv(e,t){var n=Gd(e);return Op.O(n.at,t)}function kv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var xv=function(){function e(t,n){Y(this,e),this.comparator=t,this.root=n||Ev.EMPTY}return J(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ev.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ev.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Iv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Iv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Iv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Iv(this.root,e,this.comparator,!0)}}]),e}(),Iv=function(){function e(t,n,r,i){Y(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return J(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ev=function(){function e(t,n,r,i,a){Y(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return J(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw qd();if(this.right.isRed())throw qd();var e=this.left.check();if(e!==this.right.check())throw qd();return e+(this.isRed()?0:1)}}]),e}();Ev.EMPTY=null,Ev.RED=!0,Ev.BLACK=!1,Ev.EMPTY=new(function(){function e(){Y(this,e),this.size=0}return J(e,[{key:"key",get:function(){throw qd()}},{key:"value",get:function(){throw qd()}},{key:"color",get:function(){throw qd()}},{key:"left",get:function(){throw qd()}},{key:"right",get:function(){throw qd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ev(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Tv=function(){function e(t){Y(this,e),this.comparator=t,this.data=new xv(this.comparator)}return J(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new _v(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new _v(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),_v=function(){function e(t){Y(this,e),this.iter=t}return J(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Sv(e){return e.hasNext()?e.getNext():void 0}var Cv=function(){function e(t){Y(this,e),this.fields=t,t.sort(dp.comparator)}return J(e,[{key:"unionWith",value:function(t){var n,r=new Tv(dp.comparator),i=X(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=X(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=X(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return op(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Dv=function(e){te(n,e);var t=ie(n);function n(){var e;return Y(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return J(n)}(oe(Error));var Ov=function(e){function t(e){Y(this,t),this.binaryString=e}return J(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ap(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Dv("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ov.EMPTY_BYTE_STRING=new Ov("");var Nv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Av(e){if(Kd(!!e),"string"==typeof e){var t=0,n=Nv.exec(e);if(Kd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Pv(e.seconds),nanos:Pv(e.nanos)}}function Pv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Rv(e){return"string"==typeof e?Ov.fromBase64String(e):Ov.fromUint8Array(e)}function Lv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mv(e){var t=e.mapValue.fields.__previous_value__;return Lv(t)?Mv(t):t}function Fv(e){var t=Av(e.mapValue.fields.__local_write_time__.timestampValue);return new sp(t.seconds,t.nanos)}var Uv=J((function e(t,n,r,i,a,o,u,s){Y(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),jv=function(){function e(t,n){Y(this,e),this.projectId=t,this.database=n||"(default)"}return J(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Vv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bv={nullValue:"NULL_VALUE"};function zv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lv(e)?4:ny(e)?9007199254740991:10:qd()}function qv(e,t){if(e===t)return!0;var n=zv(e);if(n!==zv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fv(e).isEqual(Fv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Av(e.timestampValue),r=Av(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Rv(e.bytesValue).isEqual(Rv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pv(e.geoPointValue.latitude)===Pv(t.geoPointValue.latitude)&&Pv(e.geoPointValue.longitude)===Pv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pv(e.integerValue)===Pv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Pv(e.doubleValue),r=Pv(t.doubleValue);return n===r?zp(n)===zp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return op(e.arrayValue.values||[],t.arrayValue.values||[],qv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(kv(n)!==kv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qv(n[i],r[i])))return!1;return!0}(e,t);default:return qd()}}function Kv(e,t){return void 0!==(e.values||[]).find((function(e){return qv(e,t)}))}function Gv(e,t){if(e===t)return 0;var n=zv(e),r=zv(t);if(n!==r)return ap(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ap(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Pv(e.integerValue||e.doubleValue),r=Pv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wv(e.timestampValue,t.timestampValue);case 4:return Wv(Fv(e),Fv(t));case 5:return ap(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Rv(e),r=Rv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ap(n[i],r[i]);if(0!==a)return a}return ap(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ap(Pv(e.latitude),Pv(t.latitude));return 0!==n?n:ap(Pv(e.longitude),Pv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Gv(n[i],r[i]);if(a)return a}return ap(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vv.mapValue&&t===Vv.mapValue)return 0;if(e===Vv.mapValue)return 1;if(t===Vv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ap(r[o],a[o]);if(0!==u)return u;var s=Gv(n[r[o]],i[a[o]]);if(0!==s)return s}return ap(r.length,a.length)}(e.mapValue,t.mapValue);default:throw qd()}}function Wv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ap(e,t);var n=Av(e),r=Av(t),i=ap(n.seconds,r.seconds);return 0!==i?i:ap(n.nanos,r.nanos)}function Hv(e){return Qv(e)}function Qv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Av(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Rv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,pp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=X(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Qv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=X(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Qv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):qd();var t,n}function Yv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function $v(e){return!!e&&"integerValue"in e}function Jv(e){return!!e&&"arrayValue"in e}function Xv(e){return!!e&&"nullValue"in e}function Zv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ey(e){return!!e&&"mapValue"in e}function ty(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return bv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ty(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ty(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ny(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ry(e){return"nullValue"in e?Bv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Yv(jv.empty(),pp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:qd()}function iy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Yv(jv.empty(),pp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Vv:qd()}function ay(e,t){var n=Gv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function oy(e,t){var n=Gv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var uy=function(){function e(t){Y(this,e),this.value=t}return J(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ey(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ty(t)}},{key:"setAll",value:function(e){var t=this,n=dp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ty(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ey(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return qv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ey(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){bv(t,(function(t,n){return e[t]=n}));var r,i=X(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ty(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function sy(e){var t=[];return bv(e.fields,(function(e,n){var r=new dp([e]);if(ey(n)){var i=sy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=X(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Cv(t)}var cy=function(){function e(t,n,r,i,a,o,u){Y(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return J(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(cp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=uy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=uy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=cp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,cp.min(),cp.min(),cp.min(),uy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,cp.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,cp.min(),cp.min(),uy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,cp.min(),cp.min(),uy.empty(),2)}}]),e}(),ly=J((function e(t,n){Y(this,e),this.position=t,this.inclusive=n}));function fy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?pp.comparator(pp.fromName(o.referenceValue),n.key):Gv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function hy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!qv(e.position[n],t.position[n]))return!1;return!0}var dy=J((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Y(this,e),this.field=t,this.dir=n}));function py(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var vy=J((function e(){Y(this,e)})),yy=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return J(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Gv(t,this.value)):null!==t&&zv(this.value)===zv(t)&&this.matchesComparison(Gv(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qd()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _y(e,t,r):"array-contains"===t?new Oy(e,r):"in"===t?new Ny(e,r):"not-in"===t?new Ay(e,r):"array-contains-any"===t?new Py(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Sy(e,n):new Cy(e,n)}}]),n}(vy),my=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return J(n,[{key:"matches",value:function(e){return gy(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=X(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(vy);function gy(e){return"and"===e.op}function ky(e){return"or"===e.op}function by(e){return wy(e)&&gy(e)}function wy(e){var t,n=X(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof my)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function xy(e){if(e instanceof yy)return e.field.canonicalString()+e.op.toString()+Hv(e.value);if(by(e))return e.filters.map((function(e){return xy(e)})).join(",");var t=e.filters.map((function(e){return xy(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Iy(e,t){return e instanceof yy?function(e,t){return t instanceof yy&&e.op===t.op&&e.field.isEqual(t.field)&&qv(e.value,t.value)}(e,t):e instanceof my?function(e,t){return t instanceof my&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Iy(n,t.filters[r])}),!0)}(e,t):void qd()}function Ey(e,t){var n=e.filters.concat(t);return my.create(n,e.op)}function Ty(e){return e instanceof yy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Hv(e.value))}(e):e instanceof my?function(e){return e.op.toString()+" {"+e.getFilters().map(Ty).join(" ,")+"}"}(e):"Filter"}var _y=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this,e,r,i)).key=pp.fromName(i.referenceValue),a}return J(n,[{key:"matches",value:function(e){var t=pp.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(yy),Sy=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e,"in",r)).keys=Dy("in",r),i}return J(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(yy),Cy=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e,"not-in",r)).keys=Dy("not-in",r),i}return J(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(yy);function Dy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return pp.fromName(e.referenceValue)}))}var Oy=function(e){te(n,e);var t=ie(n);function n(e,r){return Y(this,n),t.call(this,e,"array-contains",r)}return J(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Jv(t)&&Kv(t.arrayValue,this.value)}}]),n}(yy),Ny=function(e){te(n,e);var t=ie(n);function n(e,r){return Y(this,n),t.call(this,e,"in",r)}return J(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Kv(this.value.arrayValue,t)}}]),n}(yy),Ay=function(e){te(n,e);var t=ie(n);function n(e,r){return Y(this,n),t.call(this,e,"not-in",r)}return J(n,[{key:"matches",value:function(e){if(Kv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Kv(this.value.arrayValue,t)}}]),n}(yy),Py=function(e){te(n,e);var t=ie(n);function n(e,r){return Y(this,n),t.call(this,e,"array-contains-any",r)}return J(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Jv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Kv(t.value.arrayValue,e)}))}}]),n}(yy),Ry=J((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Y(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Ly(e){return new Ry(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function My(e){var t=Gd(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return xy(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Bp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Hv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Hv(e)})).join(",")),t.ft=n}return t.ft}function Fy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!py(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Iy(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hy(e.startAt,t.startAt)&&hy(e.endAt,t.endAt)}function Uy(e){return pp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function jy(e,t){return e.filters.filter((function(e){return e instanceof yy&&e.field.isEqual(t)}))}function Vy(e,t,n){var r,i=Bv,a=!0,o=X(jy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Bv,c=!0;switch(u.op){case"<":case"<=":s=ry(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Bv}ay({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ay({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function By(e,t,n){var r,i=Vv,a=!0,o=X(jy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Vv,c=!0;switch(u.op){case">=":case">":s=iy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Vv}oy({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];oy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var zy=J((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Y(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this.wt=null,this.startAt,this.endAt}));function qy(e,t,n,r,i,a,o,u){return new zy(e,t,n,r,i,a,o,u)}function Ky(e){return new zy(e)}function Gy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wy(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hy(e){var t,n=X(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Qy(e){return null!==e.collectionGroup}function Yy(e){var t=Gd(e);if(null===t.dt){t.dt=[];var n=Hy(t),r=Wy(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new dy(n)),t.dt.push(new dy(dp.keyField(),"asc"));else{var i,a=!1,o=X(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new dy(dp.keyField(),s))}}}return t.dt}function $y(e){var t=Gd(e);if(!t.wt)if("F"===t.limitType)t.wt=Ly(t.path,t.collectionGroup,Yy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=X(Yy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new dy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ly(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ly(t.startAt.position,t.startAt.inclusive):null;t.wt=Ly(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Jy(e,t){t.getFirstInequalityField(),Hy(e);var n=e.filters.concat([t]);return new zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Xy(e,t,n){return new zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zy(e,t){return Fy($y(e),$y(t))&&e.limitType===t.limitType}function em(e){return"".concat(My($y(e)),"|lt:").concat(e.limitType)}function tm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ty(e)})).join(", "),"]")),Bp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Hv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Hv(e)})).join(",")),"Target(".concat(t,")")}($y(e)),"; limitType=").concat(e.limitType,")")}function nm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=X(Yy(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=X(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=fy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Yy(e),t))&&!(e.endAt&&!function(e,t,n){var r=fy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Yy(e),t))}(e,t)}function rm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function im(e){return function(t,n){var r,i=!1,a=X(Yy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=am(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function am(e,t,n){var r=e.field.isKeyField()?pp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Gv(r,i):qd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qd()}}var om=function(){function e(t,n){Y(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return J(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=X(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){bv(this.inner,(function(t,n){var r,i=X(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return wv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),um=new xv(pp.comparator);function sm(){return um}var cm=new xv(pp.comparator);function lm(){for(var e=cm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function fm(e){var t=cm;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function hm(){return pm()}function dm(){return pm()}function pm(){return new om((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var vm=new xv(pp.comparator),ym=new Tv(pp.comparator);function mm(){for(var e=ym,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gm=new Tv(ap);function km(){return gm}function bm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zp(t)?"-0":t}}function wm(e){return{integerValue:""+e}}function xm(e,t){return qp(t)?wm(t):bm(e,t)}var Im=J((function e(){Y(this,e),this._=void 0}));function Em(e,t,n){return e instanceof Sm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cm?Dm(e,t):e instanceof Om?Nm(e,t):function(e,t){var n=_m(e,t),r=Pm(n)+Pm(e._t);return $v(n)&&$v(e._t)?wm(r):bm(e.serializer,r)}(e,t)}function Tm(e,t,n){return e instanceof Cm?Dm(e,t):e instanceof Om?Nm(e,t):n}function _m(e,t){return e instanceof Am?$v(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Sm=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n)}(Im),Cm=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this)).elements=e,r}return J(n)}(Im);function Dm(e,t){var n,r=Rm(t),i=X(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return qv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Om=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this)).elements=e,r}return J(n)}(Im);function Nm(e,t){var n,r=Rm(t),i=X(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!qv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Am=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return J(n)}(Im);function Pm(e){return Pv(e.integerValue||e.doubleValue)}function Rm(e){return Jv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Lm=J((function e(t,n){Y(this,e),this.field=t,this.transform=n}));var Mm=J((function e(t,n){Y(this,e),this.version=t,this.transformResults=n})),Fm=function(){function e(t,n){Y(this,e),this.updateTime=t,this.exists=n}return J(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Um(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var jm=J((function e(){Y(this,e)}));function Vm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Xm(e.key,Fm.none()):new Gm(e.key,e.data,Fm.none());var n,r=e.data,i=uy.empty(),a=new Tv(dp.comparator),o=X(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Wm(e.key,i,new Cv(a.toArray()),Fm.none())}function Bm(e,t,n){e instanceof Gm?function(e,t,n){var r=e.value.clone(),i=Qm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wm?function(e,t,n){if(Um(e.precondition,t)){var r=Qm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Hm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zm(e,t,n,r){return e instanceof Gm?function(e,t,n,r){if(!Um(e.precondition,t))return n;var i=e.value.clone(),a=Ym(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wm?function(e,t,n,r){if(!Um(e.precondition,t))return n;var i=Ym(e.fieldTransforms,r,t),a=t.data;return a.setAll(Hm(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Um(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qm(e,t){var n,r=null,i=X(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_m(a.transform,o||null);null!=u&&(null===r&&(r=uy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Km(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&op(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cm&&t instanceof Cm||e instanceof Om&&t instanceof Om?op(e.elements,t.elements,qv):e instanceof Am&&t instanceof Am?qv(e._t,t._t):e instanceof Sm&&t instanceof Sm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Gm=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Y(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return J(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jm),Wm=function(e){te(n,e);var t=ie(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Y(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return J(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(jm);function Hm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Qm(e,t,n){var r=new Map;Kd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Tm(o,u,n[i]))}return r}function Ym(e,t,n){var r,i=new Map,a=X(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Em(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var $m,Jm,Xm=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return J(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jm),Zm=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return J(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jm),eg=function(){function e(t,n,r,i){Y(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return J(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=X(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=zm(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=X(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=zm(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=dm();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Vm(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(cp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),mm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&op(this.mutations,e.mutations,(function(e,t){return Km(e,t)}))&&op(this.baseMutations,e.baseMutations,(function(e,t){return Km(e,t)}))}}]),e}(),tg=function(){function e(t,n,r,i){Y(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return J(e,null,[{key:"from",value:function(t,n,r){Kd(t.mutations.length===r.length);for(var i=vm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ng=function(){function e(t,n){Y(this,e),this.largestBatchId=t,this.mutation=n}return J(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),rg=J((function e(t){Y(this,e),this.count=t}));function ig(e){switch(e){default:return qd();case Wd.CANCELLED:case Wd.UNKNOWN:case Wd.DEADLINE_EXCEEDED:case Wd.RESOURCE_EXHAUSTED:case Wd.INTERNAL:case Wd.UNAVAILABLE:case Wd.UNAUTHENTICATED:return!1;case Wd.INVALID_ARGUMENT:case Wd.NOT_FOUND:case Wd.ALREADY_EXISTS:case Wd.PERMISSION_DENIED:case Wd.FAILED_PRECONDITION:case Wd.ABORTED:case Wd.OUT_OF_RANGE:case Wd.UNIMPLEMENTED:case Wd.DATA_LOSS:return!0}}function ag(e){if(void 0===e)return Vd("GRPC error has no .code"),Wd.UNKNOWN;switch(e){case $m.OK:return Wd.OK;case $m.CANCELLED:return Wd.CANCELLED;case $m.UNKNOWN:return Wd.UNKNOWN;case $m.DEADLINE_EXCEEDED:return Wd.DEADLINE_EXCEEDED;case $m.RESOURCE_EXHAUSTED:return Wd.RESOURCE_EXHAUSTED;case $m.INTERNAL:return Wd.INTERNAL;case $m.UNAVAILABLE:return Wd.UNAVAILABLE;case $m.UNAUTHENTICATED:return Wd.UNAUTHENTICATED;case $m.INVALID_ARGUMENT:return Wd.INVALID_ARGUMENT;case $m.NOT_FOUND:return Wd.NOT_FOUND;case $m.ALREADY_EXISTS:return Wd.ALREADY_EXISTS;case $m.PERMISSION_DENIED:return Wd.PERMISSION_DENIED;case $m.FAILED_PRECONDITION:return Wd.FAILED_PRECONDITION;case $m.ABORTED:return Wd.ABORTED;case $m.OUT_OF_RANGE:return Wd.OUT_OF_RANGE;case $m.UNIMPLEMENTED:return Wd.UNIMPLEMENTED;case $m.DATA_LOSS:return Wd.DATA_LOSS;default:return qd()}}(Jm=$m||($m={}))[Jm.OK=0]="OK",Jm[Jm.CANCELLED=1]="CANCELLED",Jm[Jm.UNKNOWN=2]="UNKNOWN",Jm[Jm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jm[Jm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jm[Jm.NOT_FOUND=5]="NOT_FOUND",Jm[Jm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jm[Jm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jm[Jm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jm[Jm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jm[Jm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jm[Jm.ABORTED=10]="ABORTED",Jm[Jm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jm[Jm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jm[Jm.INTERNAL=13]="INTERNAL",Jm[Jm.UNAVAILABLE=14]="UNAVAILABLE",Jm[Jm.DATA_LOSS=15]="DATA_LOSS";var og=function(){function e(){Y(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return J(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return ug}},{key:"getOrCreateInstance",value:function(){return null===ug&&(ug=new e),ug}}]),e}(),ug=null,sg=function(){function e(t,n,r,i,a){Y(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return J(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,cg.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(cp.min(),i,km(),sm(),mm())}}]),e}(),cg=function(){function e(t,n,r,i,a){Y(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return J(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,mm(),mm(),mm())}}]),e}(),lg=J((function e(t,n,r,i){Y(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),fg=J((function e(t,n){Y(this,e),this.targetId=t,this.Et=n})),hg=J((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ov.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Y(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),dg=function(){function e(){Y(this,e),this.At=0,this.Rt=yg(),this.vt=Ov.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return J(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=mm(),t=mm(),n=mm();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qd()}})),new cg(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=yg()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),pg=function(){function e(t){Y(this,e),this.Ft=t,this.Bt=new Map,this.Lt=sm(),this.qt=vg(),this.Ut=new Tv(ap)}return J(e,[{key:"Kt",value:function(e){var t,n=X(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=X(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:qd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Uy(a))if(0===r){var o=new pp(a.path);this.Qt(n,o,cy.newNoDocument(o,cp.min()))}else Kd(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=og.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Uy(a.target)){var o=new pp(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,cy.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=mm();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new sg(e,n,this.Ut,this.Lt,r);return this.Lt=sm(),this.qt=vg(),this.Ut=new Tv(ap),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new dg,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Tv(ap),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||jd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new dg),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function vg(){return new xv(pp.comparator)}function yg(){return new xv(pp.comparator)}var mg={asc:"ASCENDING",desc:"DESCENDING"},gg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kg={and:"AND",or:"OR"},bg=J((function e(t,n){Y(this,e),this.databaseId=t,this.useProto3Json=n}));function wg(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function xg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ig(e,t){return wg(e,t.toTimestamp())}function Eg(e){return Kd(!!e),cp.fromTimestamp(function(e){var t=Av(e);return new sp(t.seconds,t.nanos)}(e))}function Tg(e,t){return function(e){return new fp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _g(e){var t=fp.fromString(e);return Kd(Yg(t)),t}function Sg(e,t){return Tg(e.databaseId,t.path)}function Cg(e,t){var n=_g(t);if(n.get(1)!==e.databaseId.projectId)throw new Hd(Wd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hd(Wd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pp(Ag(n))}function Dg(e,t){return Tg(e.databaseId,t)}function Og(e){var t=_g(e);return 4===t.length?fp.emptyPath():Ag(t)}function Ng(e){return new fp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ag(e){return Kd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Pg(e,t,n){return{name:Sg(e,t),fields:n.value.mapValue.fields}}function Rg(e,t,n){var r=Cg(e,t.name),i=Eg(t.updateTime),a=t.createTime?Eg(t.createTime):cp.min(),o=new uy({mapValue:{fields:t.fields}}),u=cy.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Lg(e,t){return"found"in t?function(e,t){Kd(!!t.found),t.found.name,t.found.updateTime;var n=Cg(e,t.found.name),r=Eg(t.found.updateTime),i=t.found.createTime?Eg(t.found.createTime):cp.min(),a=new uy({mapValue:{fields:t.found.fields}});return cy.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Kd(!!t.missing),Kd(!!t.readTime);var n=Cg(e,t.missing),r=Eg(t.readTime);return cy.newNoDocument(n,r)}(e,t):qd()}function Mg(e,t){var n;if(t instanceof Gm)n={update:Pg(e,t.key,t.value)};else if(t instanceof Xm)n={delete:Sg(e,t.key)};else if(t instanceof Wm)n={update:Pg(e,t.key,t.data),updateMask:Qg(t.fieldMask)};else{if(!(t instanceof Zm))return qd();n={verify:Sg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Sm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Om)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Am)return{fieldPath:t.field.canonicalString(),increment:n._t};throw qd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ig(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qd()}(e,t.precondition)),n}function Fg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Fm.updateTime(Eg(e.updateTime)):void 0!==e.exists?Fm.exists(e.exists):Fm.none()}(t.currentDocument):Fm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Kd("REQUEST_TIME"===t.setToServerValue),n=new Sm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Cm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Om(i)}else"increment"in t?n=new Am(e,t.increment):qd();var a=dp.fromServerFormat(t.fieldPath);return new Lm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Cg(e,t.update.name),a=new uy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Cv(t.map((function(e){return dp.fromServerFormat(e)})))}(t.updateMask);return new Wm(i,a,o,n,r)}return new Gm(i,a,n,r)}if(t.delete){var u=Cg(e,t.delete);return new Xm(u,n)}if(t.verify){var s=Cg(e,t.verify);return new Zm(s,n)}return qd()}function Ug(e,t){return{documents:[Dg(e,t.path)]}}function jg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Dg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Dg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Hg(my.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Gg(e.field),direction:zg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||Bp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Vg(e){var t=Og(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Bg(e);return t instanceof my&&by(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new dy(Wg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Bp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ly(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ly(n,t)}(n.endAt)),qy(t,i,u,o,s,"F",c,l)}function Bg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Wg(e.unaryFilter.field);return yy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Wg(e.unaryFilter.field);return yy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wg(e.unaryFilter.field);return yy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wg(e.unaryFilter.field);return yy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return qd()}}(e):void 0!==e.fieldFilter?function(e){return yy.create(Wg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qd()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return my.create(e.compositeFilter.filters.map((function(e){return Bg(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qd()}}(e.compositeFilter.op))}(e):qd()}function zg(e){return mg[e]}function qg(e){return gg[e]}function Kg(e){return kg[e]}function Gg(e){return{fieldPath:e.canonicalString()}}function Wg(e){return dp.fromServerFormat(e.fieldPath)}function Hg(e){return e instanceof yy?function(e){if("=="===e.op){if(Zv(e.value))return{unaryFilter:{field:Gg(e.field),op:"IS_NAN"}};if(Xv(e.value))return{unaryFilter:{field:Gg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zv(e.value))return{unaryFilter:{field:Gg(e.field),op:"IS_NOT_NAN"}};if(Xv(e.value))return{unaryFilter:{field:Gg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gg(e.field),op:qg(e.op),value:e.value}}}(e):e instanceof my?function(e){var t=e.getFilters().map((function(e){return Hg(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Kg(e.op),filters:t}}}(e):qd()}function Qg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Yg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var $g=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ov.EMPTY_BYTE_STRING;Y(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return J(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Jg=J((function e(t){Y(this,e),this.se=t}));function Xg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Zg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Sg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:wg(e,t.version.toTimestamp()),createTime:wg(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ek(t.version)};else{if(!t.isUnknownDocument())return qd();r.unknownDocument={path:n.path.toArray(),version:ek(t.version)}}return r}function Zg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ek(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function tk(e){var t=new sp(e.seconds,e.nanoseconds);return cp.fromTimestamp(t)}function nk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Fg(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Fg(e.se,t)})),u=sp.fromMillis(t.localWriteTimeMs);return new eg(t.batchId,u,n,o)}function rk(e){var t,n,r=tk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?tk(e.lastLimboFreeSnapshotVersion):cp.min();return void 0!==e.query.documents?(Kd(1===(n=e.query).documents.length),t=$y(Ky(Og(n.documents[0])))):t=function(e){return $y(Vg(e))}(e.query),new $g(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ov.fromBase64String(e.resumeToken))}function ik(e,t){var n,r=ek(t.snapshotVersion),i=ek(t.lastLimboFreeSnapshotVersion);n=Uy(t.target)?Ug(e.se,t.target):jg(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:My(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ak(e){var t=Vg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xy(t,t.limit,"L"):t}function ok(e,t){return new ng(t.largestBatchId,Fg(e.se,t.overlayMutation))}function uk(e,t){var n=t.path.lastSegment();return[e,Kp(t.path.popLast()),n]}function sk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ek(r.readTime),documentKey:Kp(r.documentKey.path),largestBatchId:r.largestBatchId}}var ck=function(){function e(){Y(this,e)}return J(e,[{key:"getBundleMetadata",value:function(e,t){return lk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:tk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return lk(e).put({bundleId:(n=t).id,createTime:ek(Eg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return fk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ak(t.bundledQuery),readTime:tk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return fk(e).put(function(e){return{name:e.name,readTime:ek(Eg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function lk(e){return gv(e,"bundles")}function fk(e){return gv(e,"namedQueries")}var hk=function(){function e(t,n){Y(this,e),this.serializer=t,this.userId=n}return J(e,[{key:"getOverlay",value:function(e,t){var n=this;return dk(e).get(uk(this.userId,t)).next((function(e){return e?ok(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=hm();return Cp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new ng(t,a);i.push(r.re(e,o))})),Cp.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Kp(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(dk(e).J("collectionPathOverlayIndex",i))})),Cp.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=hm(),a=Kp(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return dk(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=X(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ok(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=hm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dk(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ok(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return dk(e).put(function(e,t,n){var r=d(uk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Mg(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function dk(e){return gv(e,"documentOverlays")}var pk=function(){function e(){Y(this,e)}return J(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Pv(e.integerValue));else if("doubleValue"in e){var n=Pv(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),zp(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Rv(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?ny(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):qd()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=X(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),pp.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function vk(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function yk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=vk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}pk.pe=new pk;var mk=function(){function e(){Y(this,e),this.buffer=new Uint8Array(1024),this.position=0}return J(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=X(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=X(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=yk(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=yk(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),gk=function(){function e(t){Y(this,e),this.Me=t}return J(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),kk=function(){function e(t){Y(this,e),this.Me=t}return J(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),bk=function(){function e(){Y(this,e),this.Me=new mk,this.Fe=new gk(this.Me),this.Be=new kk(this.Me)}return J(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),wk=function(){function e(t,n,r,i){Y(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return J(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function xk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ik(e.arrayValue,t.arrayValue))?n:0!==(n=Ik(e.directionalValue,t.directionalValue))?n:pp.comparator(e.documentKey,t.documentKey)}function Ik(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Ek=function(){function e(t){Y(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=X(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ge=i:this.Ke.push(i)}}catch(a){r.e(a)}finally{r.f()}}return J(e,[{key:"Qe",value:function(e){Kd(e.collectionGroup===this.collectionId);var t=yp(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=mp(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=X(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Tk(e){var t,n;if(Kd(e instanceof yy||e instanceof my),e instanceof yy){if(e instanceof Ny){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return yy.create(e.field,"==",t)})))||[];return my.create(r,"or")}return e}var i=e.filters.map((function(e){return Tk(e)}));return my.create(i,e.op)}function _k(e){if(0===e.getFilters().length)return[];var t=Ok(Tk(e));return Kd(Dk(t)),Sk(t)||Ck(t)?[t]:t.getFilters()}function Sk(e){return e instanceof yy}function Ck(e){return e instanceof my&&by(e)}function Dk(e){return Sk(e)||Ck(e)||function(e){if(e instanceof my&&ky(e)){var t,n=X(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Sk(r)&&!Ck(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Ok(e){if(Kd(e instanceof yy||e instanceof my),e instanceof yy)return e;if(1===e.filters.length)return Ok(e.filters[0]);var t=e.filters.map((function(e){return Ok(e)})),n=my.create(t,e.op);return Dk(n=Pk(n))?n:(Kd(n instanceof my),Kd(gy(n)),Kd(n.filters.length>1),n.filters.reduce((function(e,t){return Nk(e,t)})))}function Nk(e,t){var n;return Kd(e instanceof yy||e instanceof my),Kd(t instanceof yy||t instanceof my),n=e instanceof yy?t instanceof yy?function(e,t){return my.create([e,t],"and")}(e,t):Ak(e,t):t instanceof yy?Ak(t,e):function(e,t){if(Kd(e.filters.length>0&&t.filters.length>0),gy(e)&&gy(t))return Ey(e,t.getFilters());var n=ky(e)?e:t,r=ky(e)?t:e,i=n.filters.map((function(e){return Nk(e,r)}));return my.create(i,"or")}(e,t),Pk(n)}function Ak(e,t){if(gy(t))return Ey(t,e.getFilters());var n=t.filters.map((function(t){return Nk(e,t)}));return my.create(n,"or")}function Pk(e){if(Kd(e instanceof yy||e instanceof my),e instanceof yy)return e;var t=e.getFilters();if(1===t.length)return Pk(t[0]);if(wy(e))return e;var n=t.map((function(e){return Pk(e)})),r=[];return n.forEach((function(t){t instanceof yy?r.push(t):t instanceof my&&(t.op===e.op?r.push.apply(r,b(t.filters)):r.push(t))})),1===r.length?r[0]:my.create(r,e.op)}var Rk=function(){function e(){Y(this,e),this.He=new Lk}return J(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Cp.resolve()}},{key:"getCollectionParents",value:function(e,t){return Cp.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Cp.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Cp.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Cp.resolve(null)}},{key:"getIndexType",value:function(e,t){return Cp.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Cp.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Cp.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Cp.resolve(xp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Cp.resolve(xp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Cp.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Cp.resolve()}}]),e}(),Lk=function(){function e(){Y(this,e),this.index={}}return J(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Tv(fp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Tv(fp.comparator)).toArray()}}]),e}(),Mk=new Uint8Array(0),Fk=function(){function e(t,n){Y(this,e),this.user=t,this.databaseId=n,this.Je=new Lk,this.Ye=new om((function(e){return My(e)}),(function(e,t){return Fy(e,t)})),this.uid=t.uid||""}return J(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:Kp(i)};return Uk(e).put(a)}return Cp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[up(t),""],!1,!0);return Uk(e).j(r).next((function(e){var r,i=X(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Hp(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Vk(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Bk(e);return a.next((function(e){o.put(sk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Vk(e),r=Bk(e),i=jk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=jk(e),i=!0,a=new Map;return Cp.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=mm(),o=[];return Cp.forEach(a,(function(i,a){var u;jd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(My(t)));var s=function(e,t){var n=yp(t);if(void 0===n)return null;var r,i=X(jy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=X(mp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=X(jy(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=X(mp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Vy(e,o.fieldPath,e.startAt):By(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ly(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=X(mp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?By(e,o.fieldPath,e.endAt):Vy(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ly(r,i)}(a,i),h=n.tn(i,a,l),d=n.tn(i,a,f),p=n.en(i,a,c),v=n.nn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Cp.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=pp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Cp.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:_k(my.create(e.filters,"and")).map((function(t){return Ly(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.sn(t[h/c]):Mk,f=u.rn(e,s,n[h%c],r),d=u.on(e,s,i[h%c],a),p=o.map((function(t){return u.rn(e,s,t,!0)}));l.push.apply(l,b(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"rn",value:function(e,t,n,r){var i=new wk(e,pp.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new wk(e,pp.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new Ek(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=X(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return Cp.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Tv(dp.comparator),r=!1,i=X(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=X(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=X(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new bk,i=X(mp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Le(a.kind);pk.pe.oe(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new bk;return pk.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new bk;return pk.pe.oe(Yv(this.databaseId,t),n.Le(function(e){var t=mp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new bk);var i,a=0,o=X(mp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=X(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.an(t,s.fieldPath)&&Jv(c))r=this.hn(r,s,c);else{var h=f.Le(s.kind);pk.pe.oe(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=b(e),a=[],o=X(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=X(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new bk;f.seed(l.$e()),pk.pe.oe(s,f.Le(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof yy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Vk(e),i=Bk(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Cp.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new kp(t.sequenceNumber,new xp(tk(t.readTime),new pp(Hp(t.documentKey)),t.largestBatchId)):kp.empty(),r=e.fields.map((function(e){var t=d(e,2),n=t[0],r=t[1];return new gp(dp.fromServerFormat(n),r)}));return new vp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ap(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Vk(e),a=Bk(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Cp.forEach(t,(function(t){return a.put(sk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Cp.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Cp.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Cp.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Cp.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return jk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return jk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=jk(e),i=new Tv(xk);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new wk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Tv(xk),r=this.un(t,e);if(null==r)return n;var i=yp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Jv(a)){var o,u=X(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new wk(t.indexId,e.key,this.sn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new wk(t.indexId,e.key,Mk,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;jd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Sv(a),s=Sv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Sv(o)):l?(i(u),u=Sv(a)):(u=Sv(a),s=Sv(o))}}(r,i,xk,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),Cp.waitFor(o)}},{key:"fn",value:function(e){var t=1;return Bk(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return xk(e,t)})).filter((function(e,t,n){return!t||0!==xk(e,n[t-1])}));var r=[];r.push(e);var i,a=X(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=xk(o,e),s=xk(o,t);if(0===u)r[0]=e.qe();else if(u>0&&s<0)r.push(o),r.push(o.qe());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Mk,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Mk,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"yn",value:function(e,t){return xk(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(zk)}},{key:"getMinOffset",value:function(e,t){var n=this;return Cp.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||qd()}))})).next(zk)}}]),e}();function Uk(e){return gv(e,"collectionParents")}function jk(e){return gv(e,"indexEntries")}function Vk(e){return gv(e,"indexConfiguration")}function Bk(e){return gv(e,"indexState")}function zk(e){Kd(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Ip(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xp(t.readTime,t.documentKey,n)}var qk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kk=function(){function e(t,n,r){Y(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return J(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Gk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Kd(1===u)})));var c,l=[],f=X(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=$p(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Cp.waitFor(a).next((function(){return l}))}function Wk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw qd();t=e.noDocument}return JSON.stringify(t).length}Kk.DEFAULT_COLLECTION_PERCENTILE=10,Kk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kk.DEFAULT=new Kk(41943040,Kk.DEFAULT_COLLECTION_PERCENTILE,Kk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kk.DISABLED=new Kk(-1,0,0);var Hk=function(){function e(t,n,r,i){Y(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.pn={}}return J(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yk(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=$k(e),o=Yk(e);return o.add({}).next((function(u){Kd("number"==typeof u);var s,c=new eg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Mg(e.se,t)})),i=n.mutations.map((function(t){return Mg(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Tv((function(e,t){return ap(e.canonicalString(),t.canonicalString())})),d=X(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=$p(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Jp))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[u]=c.keys()})),Cp.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Yk(e).get(t).next((function(e){return e?(Kd(e.userId===n.userId),nk(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?Cp.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Yk(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Kd(t.batchId>=r),a=nk(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Yk(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yk(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return nk(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Yp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return $k(e).Z({range:i},(function(r,i,o){var u=d(r,3),s=u[0],c=u[1],l=u[2],f=Hp(c);if(s===n.userId&&t.path.isEqual(f))return Yk(e).get(l).next((function(e){if(!e)throw qd();Kd(e.userId===n.userId),a.push(nk(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Tv(ap),i=[];return t.forEach((function(t){var a=Yp(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=$k(e).Z({range:o},(function(e,i,a){var o=d(e,3),u=o[0],s=o[1],c=o[2],l=Hp(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Cp.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Yp(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Tv(ap);return $k(e).Z({range:o},(function(e,t,a){var o=d(e,3),s=o[0],c=o[1],l=o[2],f=Hp(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Tn(e,u)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Yk(e).get(t).next((function(e){if(null===e)throw qd();Kd(e.userId===n.userId),r.push(nk(n.serializer,e))})))})),Cp.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Gk(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),Cp.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Cp.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return $k(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Hp(e[1]);i.push(a)}else r.done()})).next((function(){Kd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Qk(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return Jk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return Kd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Qk(e,t,n){var r=Yp(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return $k(e).Z({range:a,Y:!0},(function(e,n,r){var a=d(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Yk(e){return gv(e,"mutations")}function $k(e){return gv(e,"documentMutations")}function Jk(e){return gv(e,"mutationQueues")}var Xk=function(){function e(t){Y(this,e),this.Rn=t}return J(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),Zk=function(){function e(t,n){Y(this,e),this.referenceDelegate=t,this.serializer=n}return J(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new Xk(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return cp.fromTimestamp(new sp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return eb(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return Kd(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return eb(e).Z((function(o,u){var s=rk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Cp.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return eb(e).Z((function(e,n){var r=rk(n);t(r)}))}},{key:"Pn",value:function(e){return tb(e).get("targetGlobalKey").next((function(e){return Kd(null!==e),e}))}},{key:"Vn",value:function(e,t){return tb(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return eb(e).put(ik(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=My(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return eb(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=rk(n);Fy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=nb(e);return t.forEach((function(t){var o=Kp(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Cp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=nb(e);return Cp.forEach(t,(function(t){var a=Kp(t.path);return Cp.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=nb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=nb(e),i=mm();return r.Z({range:n,Y:!0},(function(e,t,n){var r=Hp(e[1]),a=new pp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Kp(t.path),r=IDBKeyRange.bound([n],[up(n)],!1,!0),i=0;return nb(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=d(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return eb(e).get(t).next((function(e){return e?rk(e):null}))}}]),e}();function eb(e){return gv(e,"targets")}function tb(e){return gv(e,"targetGlobal")}function nb(e){return gv(e,"targetDocuments")}function rb(e,t){var n=d(e,2),r=n[0],i=n[1],a=d(t,2),o=a[0],u=a[1],s=ap(r,o);return 0===s?ap(i,u):s}var ib=function(){function e(t){Y(this,e),this.Cn=t,this.buffer=new Tv(rb),this.xn=0}return J(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();rb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ab=function(){function e(t,n,r){Y(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return J(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;jd("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Pp(e.t0)){e.next=12;break}jd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,_p(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ob=function(){function e(t,n){Y(this,e),this.Mn=t,this.params=n}return J(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Cp.resolve(Vp.ct);var r=new ib(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jd("LruGarbageCollector","Garbage collection skipped; disabled"),Cp.resolve(qk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),qk):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ud()<=Ve.DEBUG&&jd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Cp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ub=function(){function e(t,n){Y(this,e),this.db=t,this.garbageCollector=function(e,t){return new ob(e,t)}(this,n)}return J(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return sb(e,n)}},{key:"removeReference",value:function(e,t,n){return sb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return sb(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return Jk(e).X((function(r){return Qk(e,r,t).next((function(e){return e&&(n=!0),Cp.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,u){if(u<=t){var s=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,cp.min()),nb(e).delete([0,Kp(o.path)])}))}));i.push(s)}})).next((function(){return Cp.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return sb(e,t)}},{key:"Un",value:function(e,t){var n,r=nb(e),i=Vp.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=d(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Vp.ct&&t(new pp(Hp(n)),i),i=s,n=u):i=Vp.ct})).next((function(){i!==Vp.ct&&t(new pp(Hp(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function sb(e,t){return nb(e).put(function(e,t){return{targetId:0,path:Kp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var cb=function(){function e(){Y(this,e),this.changes=new om((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return J(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,cy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Cp.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),lb=function(){function e(t){Y(this,e),this.serializer=t}return J(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return pb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return pb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Zg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=cy.newInvalidDocument(t);return pb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vb(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:cy.newInvalidDocument(t)};return pb(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vb(t))},(function(e,i){r={document:n.Qn(t,i),size:Wk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=sm();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=sm(),i=new xv(pp.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,Wk(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return Cp.resolve();var r=new Tv(mb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(vb(r.first()),vb(r.last())),a=r.getIterator(),o=a.getNext();return pb(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=pp.fromSegments([].concat(b(t.prefixPath),[t.collectionGroup,t.documentId]));o&&mb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(vb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Zg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pb(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=sm(),o=X(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Qn(pp.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(nm(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=sm(),o=yb(t,n),u=yb(t,xp.max());return pb(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Qn(pp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new hb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return db(e).get("remoteDocumentGlobalKey").next((function(e){return Kd(!!e),e}))}},{key:"Gn",value:function(e,t){return db(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Rg(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=pp.fromSegments(t.noDocument.path),i=tk(t.noDocument.readTime);n=cy.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return qd();var a=pp.fromSegments(t.unknownDocument.path),o=tk(t.unknownDocument.version);n=cy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new sp(e[0],e[1]);return cp.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(cp.min()))return n}return cy.newInvalidDocument(e)}}]),e}();function fb(e){return new lb(e)}var hb=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).Jn=e,i.trackRemovals=r,i.Yn=new om((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return J(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Tv((function(e,t){return ap(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Xg(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=Wk(s);r+=c-u.size,n.push(t.Jn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Xg(t.Jn.serializer,o.convertToNoDocument(cp.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),Cp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(cb);function db(e){return gv(e,"remoteDocumentGlobal")}function pb(e){return gv(e,"remoteDocumentsV14")}function vb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function yb(e,t){var n=t.documentKey.path.toArray();return[e,Zg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ap(n[a],r[a]))return i;return(i=ap(n.length,r.length))||((i=ap(n[n.length-2],r[r.length-2]))||ap(n[n.length-1],r[r.length-1]))}var gb=J((function e(t,n){Y(this,e),this.overlayedDocument=t,this.mutatedFields=n})),kb=function(){function e(t,n,r,i){Y(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return J(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&zm(r.mutation,e,Cv.empty(),sp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,mm()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mm(),i=hm();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=lm();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=hm();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,mm())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=sm(),a=pm(),o=pm();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wm)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),zm(o.mutation,t,o.mutation.getFieldMask(),sp.now())):a.set(t.key,Cv.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new gb(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=pm(),i=new xv((function(e,t){return e-t})),a=mm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=X(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Cv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||mm()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=dm();c.forEach((function(e){if(!a.has(e)){var n=Vm(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Cp.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return pp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Cp.resolve(hm()),u=-1,s=a;return o.next((function(t){return Cp.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Cp.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,mm())})).next((function(e){return{batchId:u,changes:fm(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new pp(t)).next((function(e){var t=lm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=lm();return this.indexManager.getCollectionParents(e,i).next((function(o){return Cp.forEach(o,(function(o){var u=function(e,t){return new zy(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,cy.newInvalidDocument(r)))}));var n=lm();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&zm(a.mutation,i,Cv.empty(),sp.now()),nm(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),bb=function(){function e(t){Y(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return J(e,[{key:"getBundleMetadata",value:function(e,t){return Cp.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Eg(n.createTime)}),Cp.resolve()}},{key:"getNamedQuery",value:function(e,t){return Cp.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:ak(e.bundledQuery),readTime:Eg(e.readTime)}}(t)),Cp.resolve()}}]),e}(),wb=function(){function e(){Y(this,e),this.overlays=new xv(pp.comparator),this.ts=new Map}return J(e,[{key:"getOverlay",value:function(e,t){return Cp.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=hm();return Cp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Cp.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Cp.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hm(),i=t.length+1,a=new pp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Cp.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new xv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=hm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=hm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Cp.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ng(t,n));var a=this.ts.get(t);void 0===a&&(a=mm(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),xb=function(){function e(){Y(this,e),this.es=new Tv(Ib.ns),this.ss=new Tv(Ib.rs)}return J(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ib(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new Ib(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new pp(new fp([])),r=new Ib(n,e),i=new Ib(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new pp(new fp([])),n=new Ib(t,e),r=new Ib(t,e+1),i=mm();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ib(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ib=function(){function e(t,n){Y(this,e),this.key=t,this.ds=n}return J(e,null,[{key:"ns",value:function(e,t){return pp.comparator(e.key,t.key)||ap(e.ds,t.ds)}},{key:"rs",value:function(e,t){return ap(e.ds,t.ds)||pp.comparator(e.key,t.key)}}]),e}(),Eb=function(){function e(t,n){Y(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new Tv(Ib.ns)}return J(e,[{key:"checkEmpty",value:function(e){return Cp.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new eg(i,t,n,r);this.mutationQueue.push(a);var o,u=X(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new Ib(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Cp.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Cp.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Cp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Cp.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Cp.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ib(t,0),i=new Ib(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),Cp.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Tv(ap);return t.forEach((function(e){var t=new Ib(e,0),i=new Ib(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Cp.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;pp.isDocumentKey(i)||(i=i.child(""));var a=new Ib(new pp(i),0),o=new Tv(ap);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),Cp.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Kd(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Cp.forEach(t.mutations,(function(i){var a=new Ib(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ib(t,0),r=this._s.firstAfterOrEqual(n);return Cp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Cp.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Tb=function(){function e(t){Y(this,e),this.Ts=t,this.docs=new xv(pp.comparator),this.size=0}return J(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Cp.resolve(n?n.document.mutableCopy():cy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sm();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():cy.newInvalidDocument(e))})),Cp.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=sm(),a=t.path,o=new pp(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Ip(wp(l),n)<=0||(r.has(l.key)||nm(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Cp.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){qd()}},{key:"Es",value:function(e,t){return Cp.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _b(this)}},{key:"getSize",value:function(e){return Cp.resolve(this.size)}}]),e}(),_b=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this)).Jn=e,r}return J(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Cp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(cb),Sb=function(){function e(t){Y(this,e),this.persistence=t,this.As=new om((function(e){return My(e)}),Fy),this.lastRemoteSnapshotVersion=cp.min(),this.highestTargetId=0,this.Rs=0,this.vs=new xb,this.targetCount=0,this.bs=Xk.vn()}return J(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Cp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Cp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Cp.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Cp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Cp.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Xk(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Cp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Cp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Cp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Cp.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Cp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Cp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Cp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Cp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Cp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Cp.resolve(n)}},{key:"containsKey",value:function(e,t){return Cp.resolve(this.vs.containsKey(t))}}]),e}(),Cb=function(){function e(t,n){var r=this;Y(this,e),this.Ps={},this.overlays={},this.Vs=new Vp(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new Sb(this),this.indexManager=new Rk,this.remoteDocumentCache=new Tb((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new Jg(n),this.xs=new bb(this.serializer)}return J(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new wb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new Eb(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;jd("MemoryPersistence","Starting transaction:",e);var i=new Db(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Cp.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Db=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return J(n)}(Tp),Ob=function(){function e(t){Y(this,e),this.persistence=t,this.$s=new xb,this.Ms=null}return J(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw qd()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Cp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Cp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Cp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cp.forEach(this.Bs,(function(r){var i=pp.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,cp.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Cp.or([function(){return Cp.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),Nb=function(){function e(t){Y(this,e),this.serializer=t}return J(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Dp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qp,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ab(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Cp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ab(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:cp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qp,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Cp.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:cv});t.createIndex("collectionPathOverlayIndex",lv,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",fv,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Xp});t.createIndex("documentKeyIndex",Zp),t.createIndex("collectionGroupIndex",ev)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:av}).createIndex("sequenceNumberIndex",ov,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:uv}).createIndex("documentKeyIndex",sv,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Wk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Cp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Cp.forEach(r,(function(r){Kd(r.userId===n.userId);var i=nk(t.serializer,r);return Gk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new fp(n),o=function(e){return[0,Kp(e)]}(a);r.push(t.get(o).next((function(n){return n?Cp.resolve():function(n){return t.put({targetId:0,path:Kp(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Cp.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:iv});var n=t.store("collectionParents"),r=new Lk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Kp(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new fp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=d(e,3),r=(n[0],n[1]),a=(n[2],Hp(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=rk(r),a=ik(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new pp(fp.fromString(i.document.name).popFirst(5)):i.noDocument?pp.fromSegments(i.noDocument.path):i.unknownDocument?pp.fromSegments(i.unknownDocument.path):qd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Cp.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=fb(this.serializer),a=new Cb(Ob.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:mm();nk(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Cp.forEach(r,(function(e,r){var o=new Ld(r),u=hk.ie(n.serializer,o),s=a.getIndexManager(o),c=Hk.ie(o,n.serializer,s,a.referenceDelegate);return new kb(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new mv(t,Vp.ct),e).next()}))}))}}]),e}();function Ab(e){e.createObjectStore("targetDocuments",{keyPath:nv}).createIndex("documentTargetsIndex",rv,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tv,{unique:!0}),e.createObjectStore("targetGlobal")}var Pb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Rb=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Y(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=a,this.window=o,this.document=u,this.Hs=c,this.Js=l,this.Ys=f,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new Hd(Wd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ub(this,i),this.si=n+"main",this.serializer=new Jg(s),this.ii=new Op(this.si,this.Ys,new Nb(this.serializer)),this.Ds=new Zk(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fb(this.serializer),this.xs=new ck,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&Vd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return J(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Hd(Wd.FAILED_PRECONDITION,Pb);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new Vp(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=s(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Mb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Pp(t))return jd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return Lb(e).get("owner").next((function(e){return Cp.resolve(t._i(e))}))}},{key:"mi",value:function(e){return Mb(e).delete(this.clientId)}},{key:"gi",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=gv(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Cp.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=X(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?Cp.resolve(!0):Lb(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new Hd(Wd.FAILED_PRECONDITION,Pb);return!1}}return!(!t.networkEnabled||!t.inForeground)||Mb(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new mv(e,Vp.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Mb(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return Hk.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Fk(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return hk.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;jd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Ys)?yv:14===i?vv:13===i?pv:12===i?dv:11===i?hv:void qd();return this.ii.runTransaction(e,o,u,(function(i){return a=new mv(i,r.Vs?r.Vs.next():Vp.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw Vd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new Hd(Wd.FAILED_PRECONDITION,Ep);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return Lb(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Hd(Wd.FAILED_PRECONDITION,Pb)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lb(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=Lb(e);return n.get("owner").next((function(e){return t._i(e)?(jd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Cp.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Vd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return jd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Vd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(qc){Vd("Failed to set zombie client id.",qc)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(qc){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Op.D()}}]),e}();function Lb(e){return gv(e,"owner")}function Mb(e){return gv(e,"clientMetadata")}function Fb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ub=function(){function e(t,n,r,i){Y(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return J(e,null,[{key:"Di",value:function(t,n){var r,i=mm(),a=mm(),o=X(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),jb=function(){function e(){Y(this,e),this.Ci=!1}return J(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(Gy(t))return Cp.resolve(null);var r=$y(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Xy(t,null,"F"),r=$y(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=mm.apply(void 0,b(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,Xy(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return Gy(t)||r.isEqual(cp.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Ud()<=Ve.DEBUG&&jd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tm(t)),i.Fi(e,o,t,bp(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Tv(im(e));return t.forEach((function(t,r){nm(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Ud()<=Ve.DEBUG&&jd("QueryEngine","Using full collection scan to execute query:",tm(t)),this.xi.getDocumentsMatchingQuery(e,t,xp.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Vb=function(){function e(t,n,r,i){Y(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new xv(ap),this.qi=new om((function(e){return My(e)}),Fy),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return J(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kb(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function Bb(e,t,n,r){return new Vb(e,t,n,r)}function zb(e,t){return qb.apply(this,arguments)}function qb(){return qb=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=mm(),s=X(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=X(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=X(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=X(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),qb.apply(this,arguments)}function Kb(e,t){var n=Gd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Cp.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Kd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=mm(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Gb(e){var t=Gd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function Wb(e,t){var n=Gd(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Ov.EMPTY_BYTE_STRING,cp.min()).withLastLimboFreeSnapshotVersion(cp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var u=sm(),s=mm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Hb(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(cp.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Cp.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function Hb(e,t,n){var r=mm(),i=mm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sm();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(cp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):jd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function Qb(e,t){var n=Gd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Yb(e,t){var n=Gd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Cp.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new $g(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function $b(e,t,n){return Jb.apply(this,arguments)}function Jb(){return Jb=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gd(t),a=i.Li.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Pp(e.t1)){e.next=12;break}throw e.t1;case 12:jd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Jb.apply(this,arguments)}function Xb(e,t,n){var r=Gd(e),i=cp.min(),a=mm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Gd(e),i=r.qi.get(n);return void 0!==i?Cp.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,$y(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:cp.min(),n?a:mm())})).next((function(e){return tw(r,rm(t),e),{documents:e,Wi:a}}))}))}function Zb(e,t){var n=Gd(e),r=Gd(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function ew(e,t){var n=Gd(e),r=n.Ui.get(t)||cp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,bp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return tw(n,t,e),e}))}function tw(e,t,n){var r=e.Ui.get(t)||cp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function nw(e,t,n,r){return rw.apply(this,arguments)}function rw(){return rw=s(o().mark((function e(t,n,r,i){var a,u,s,c,l,f,h,d,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Gd(t),u=mm(),s=sm(),c=X(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Hi(f.metadata.name),f.document&&(u=u.add(h)),(d=n.Ji(f)).setReadTime(n.Yi(f.metadata.readTime)),s=s.insert(h,d)}catch(o){c.e(o)}finally{c.f()}return p=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,Yb(a,function(e){return $y(Ky(fp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Hb(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Ds.addMatchingKeys(e,u,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}function iw(e,t){return aw.apply(this,arguments)}function aw(){return aw=s(o().mark((function e(t,n){var r,i,a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:mm(),e.next=3,Yb(t,$y(ak(n.bundledQuery)));case 3:return i=e.sent,a=Gd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Eg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(Ov.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function uw(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function sw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var cw=function(){function e(t,n,r,i){Y(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return J(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Hd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Vd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),lw=function(){function e(t,n,r){Y(this,e),this.targetId=t,this.state=n,this.error=r}return J(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Hd(i.error.code,i.error.message))),a?new e(t,i.state,r):(Vd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),fw=function(){function e(t,n){Y(this,e),this.clientId=t,this.activeTargetIds=n}return J(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=km(),o=0;i&&o<r.activeTargetIds.length;++o)i=qp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Vd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),hw=function(){function e(t,n){Y(this,e),this.clientId=t,this.onlineState=n}return J(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Vd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),dw=function(){function e(){Y(this,e),this.activeTargetIds=km()}return J(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),pw=function(){function e(t,n,r,i,a){Y(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new xv(ap),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=ow(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new dw),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return J(e,[{key:"start",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h,d=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=X(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(ow(this.persistenceKey,i)))&&(u=fw.Zi(i,a))&&(this.rr=this.rr.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(s=this.storage.getItem(this.wr))&&(c=this.gr(s))&&this.yr(c),l=X(this.ur);try{for(l.s();!(f=l.n()).done;)h=f.value,this.ir(h)}catch(o){l.e(o)}finally{l.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(sw(this.persistenceKey,e));if(n){var r=lw.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(sw(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Vd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(s(o().mark((function e(){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(u));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}c=function(e){var t=Vp.ct;if(null!=e)try{var n=JSON.parse(e);Kd("number"==typeof n),t=n}catch(e){Vd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==Vp.ct&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return l=t.kr(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new cw(this.currentUser,e,t,n),i=uw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=uw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=sw(this.persistenceKey,e),i=new lw(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return fw.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return cw.Zi(new Ld(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return lw.Zi(r,t)}},{key:"gr",value:function(e){return hw.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:jd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=km();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),vw=function(){function e(){Y(this,e),this.Br=new dw,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return J(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new dw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),yw=function(){function e(){Y(this,e)}return J(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),mw=function(){function e(){var t=this;Y(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return J(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){jd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=X(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){jd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=X(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),gw=null;function kw(){return null===gw?gw=268435456+Math.round(2147483648*Math.random()):gw++,"0x"+gw.toString(16)}var bw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ww=function(){function e(t){Y(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return J(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),xw="WebChannelConnection",Iw=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return J(n,[{key:"lo",value:function(e,t,n,r){var i=kw();return new Promise((function(a,o){var u=new Pd;u.setWithCredentials(!0),u.listenOnce(Cd.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Sd.NO_ERROR:var t=u.getResponseJson();jd(xw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Sd.TIMEOUT:jd(xw,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Hd(Wd.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:var n=u.getStatus();if(jd(xw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wd).indexOf(t)>=0?t:Wd.UNKNOWN}(s.status);o(new Hd(c,s.message))}else o(new Hd(Wd.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Hd(Wd.UNAVAILABLE,"Connection failed."));break;default:qd()}}finally{jd(xw,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);jd(xw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=kw(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Td(),o=_d(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Nd({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");jd(xw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new ww({Wr:function(t){f?jd(xw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(jd(xw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),jd(xw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Ad.EventType.OPEN,(function(){f||jd(xw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Ad.EventType.CLOSE,(function(){f||(f=!0,jd(xw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Ad.EventType.ERROR,(function(t){f||(f=!0,Bd(xw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new Hd(Wd.UNAVAILABLE,"The operation could not be completed")))})),d(c,Ad.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Kd(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){jd(xw,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=$m[e];if(void 0!==t)return ag(t)}(u),l=o.message;void 0===s&&(s=Wd.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new Hd(s,l)),c.close()}else jd(xw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,Dd.STAT_EVENT,(function(t){t.stat===Od.PROXY?jd(xw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Od.NOPROXY&&jd(xw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){Y(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return J(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=kw(),o=this.ao(e,t);jd("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return jd("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Bd("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Md,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=bw[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function Ew(){return"undefined"!=typeof window?window:null}function Tw(){return"undefined"!=typeof document?document:null}function _w(e){return new bg(e,!0)}var Sw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Y(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return J(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&jd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Cw=function(){function e(t,n,r,i,a,o,u,s){Y(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Sw(t,n)}return J(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===Wd.RESOURCE_EXHAUSTED?(Vd(n.toString()),Vd("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===Wd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=d(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new Hd(Wd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return jd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(jd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Dw=function(e){te(n,e);var t=ie(n);function n(e,r,i,a,o,u){var s;return Y(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return J(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Kd(void 0===t||"string"==typeof t),Ov.fromBase64String(t||"")):(Kd(void 0===t||t instanceof Uint8Array),Ov.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Wd.UNKNOWN:ag(e.code);return new Hd(t,e.message||"")}(o);n=new hg(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Cg(e,s.document.name),l=Eg(s.document.updateTime),f=s.document.createTime?Eg(s.document.createTime):cp.min(),h=new uy({mapValue:{fields:s.document.fields}}),d=cy.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new lg(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Cg(e,y.document),g=y.readTime?Eg(y.readTime):cp.min(),k=cy.newNoDocument(m,g),b=y.removedTargetIds||[];n=new lg([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Cg(e,w.document),I=w.removedTargetIds||[];n=new lg([],I,x,null)}else{if(!("filter"in t))return qd();t.filter;var E=t.filter;E.targetId;var T=E.count||0,_=new rg(T),S=E.targetId;n=new fg(S,_)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return cp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?cp.min():t.readTime?Eg(t.readTime):cp.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Ng(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Uy(r)?{documents:Ug(e,r)}:{query:jg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=xg(e,t.resumeToken):t.snapshotVersion.compareTo(cp.min())>0&&(n.readTime=wg(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Ng(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(Cw),Ow=function(e){te(n,e);var t=ie(n);function n(e,r,i,a,o,u){var s;return Y(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.Ho=!1,s}return J(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,fn(ne(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Kd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Kd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Eg(e.updateTime):Eg(t);return n.isEqual(cp.min())&&(n=Eg(t)),new Mm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Eg(e.commitTime);return this.listener.Zo(n,t)}return Kd(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Ng(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Mg(t.serializer,e)}))};this.Fo(n)}}]),n}(Cw),Nw=function(e){te(n,e);var t=ie(n);function n(e,r,i,a){var o;return Y(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return J(n,[{key:"nu",value:function(){if(this.eu)throw new Hd(Wd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=d(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hd(Wd.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=d(a,2),u=o[0],s=o[1];return i.connection.fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wd.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Hd(Wd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return J((function e(){Y(this,e)}))}());var Aw=function(){function e(t,n){Y(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return J(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Vd(t),this.ru=!1):jd("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),Pw=J((function e(t,n,r,i,a){var u=this;Y(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Kw(u),!e.t0){e.next=5;break}return jd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gd(t)).du.add(4),e.next=4,Mw(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,Rw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new Aw(r,i)}));function Rw(e){return Lw.apply(this,arguments)}function Lw(){return Lw=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Kw(t)){e.next=18;break}n=X(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Lw.apply(this,arguments)}function Mw(e){return Fw.apply(this,arguments)}function Fw(){return Fw=s(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=X(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Fw.apply(this,arguments)}function Uw(e,t){var n=Gd(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),qw(n)?zw(n):kx(n).No()&&Vw(n,t))}function jw(e,t){var n=Gd(e),r=kx(n);n.fu.delete(t),r.No()&&Bw(n,t),0===n.fu.size&&(r.No()?r.$o():Kw(n)&&n.mu.set("Unknown"))}function Vw(e,t){e.gu.Ot(t.targetId),kx(e).jo(t)}function Bw(e,t){e.gu.Ot(t),kx(e).Wo(t)}function zw(e){e.gu=new pg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),kx(e).start(),e.mu.ou()}function qw(e){return Kw(e)&&!kx(e).xo()&&e.fu.size>0}function Kw(e){return 0===Gd(e).du.size}function Gw(e){e.gu=void 0}function Ww(e){return Hw.apply(this,arguments)}function Hw(){return Hw=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Vw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Qw(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gw(t),qw(t)?(t.mu.au(n),zw(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function $w(e,t,n){return Jw.apply(this,arguments)}function Jw(){return Jw=s(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof hg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=X(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(u=a.value,e.t0=t.fu.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.fu.delete(u),t.gu.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Xw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof lg?t.gu.Kt(n):n instanceof fg?t.gu.Jt(n):t.gu.zt(n),r.isEqual(cp.min())){e.next=29;break}return e.prev=14,e.next=17,Gb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Ov.EMPTY_BYTE_STRING,n.snapshotVersion)),Bw(e,t);var r=new $g(n.target,t,1,n.sequenceNumber);Vw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Xw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Jw.apply(this,arguments)}function Xw(e,t,n){return Zw.apply(this,arguments)}function Zw(){return Zw=s(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pp(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,Mw(t);case 5:t.mu.set("Offline"),r||(r=function(){return Gb(t.localStore)}),t.asyncQueue.enqueueRetryable(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,Rw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function ex(e,t){return t().catch((function(n){return Xw(e,n,t)}))}function tx(e){return nx.apply(this,arguments)}function nx(){return nx=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gd(t),r=bx(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!rx(n)){e.next=19;break}return e.prev=3,e.next=6,Qb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,ix(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Xw(n,e.t0);case 17:e.next=2;break;case 19:ax(n)&&ox(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),nx.apply(this,arguments)}function rx(e){return Kw(e)&&e.lu.length<10}function ix(e,t){e.lu.push(t);var n=bx(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function ax(e){return Kw(e)&&!bx(e).xo()&&e.lu.length>0}function ox(e){bx(e).start()}function ux(e){return sx.apply(this,arguments)}function sx(){return sx=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bx(t).tu();case 1:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e){return lx.apply(this,arguments)}function lx(){return lx=s(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=bx(t),r=X(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t,n){return hx.apply(this,arguments)}function hx(){return hx=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=tg.from(i,n,r),e.next=3,ex(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,tx(t);case 5:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t){return px.apply(this,arguments)}function px(){return px=s(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&bx(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ig(i=n.code)||i===Wd.ABORTED){e.next=7;break}return r=t.lu.shift(),bx(t).Oo(),e.next=5,ex(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,tx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ax(t)&&ox(t);case 5:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(e,t){return yx.apply(this,arguments)}function yx(){return yx=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Gd(t)).asyncQueue.verifyOperationInProgress(),jd("RemoteStore","RemoteStore received new credentials"),i=Kw(r),r.du.add(3),e.next=6,Mw(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,Rw(r);case 12:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function mx(e,t){return gx.apply(this,arguments)}function gx(){return gx=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,Rw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,Mw(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}function kx(e){return e.yu||(e.yu=function(e,t,n){var r=Gd(e);return r.nu(),new Dw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:Ww.bind(null,e),Zr:Qw.bind(null,e),zo:$w.bind(null,e)}),e.wu.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),qw(e)?zw(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:Gw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function bx(e){return e.pu||(e.pu=function(e,t,n){var r=Gd(e);return r.nu(),new Ow(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:ux.bind(null,e),Zr:dx.bind(null,e),Xo:cx.bind(null,e),Zo:fx.bind(null,e)}),e.wu.push(function(){var t=s(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,tx(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(jd("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var wx=function(){function e(t,n,r,i,a){Y(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return J(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hd(Wd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function xx(e,t){if(Vd("AsyncQueue","".concat(t,": ").concat(e)),Pp(e))return new Hd(Wd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ix=function(){function e(t){Y(this,e),this.comparator=t?function(e,n){return t(e,n)||pp.comparator(e.key,n.key)}:function(e,t){return pp.comparator(e.key,t.key)},this.keyedMap=lm(),this.sortedSet=new xv(this.comparator)}return J(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Ex=function(){function e(){Y(this,e),this.Iu=new xv(pp.comparator)}return J(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):qd():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Tx=function(){function e(t,n,r,i,a,o,u,s,c){Y(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return J(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ix.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),_x=J((function e(){Y(this,e),this.Eu=void 0,this.listeners=[]})),Sx=J((function e(){Y(this,e),this.queries=new om((function(e){return em(e)}),Zy),this.onlineState="Unknown",this.Au=new Set}));function Cx(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=n.query,a=!1,(u=r.queries.get(i))||(a=!0,u=new _x),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=xx(e.t0,"Initialization of query '".concat(tm(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.Ru(r.onlineState),u.Eu&&n.vu(u.Eu)&&Rx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Dx.apply(this,arguments)}function Ox(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=s(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=n.query,a=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),a=0===u.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t){var n,r=Gd(e),i=!1,a=X(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=X(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Eu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Rx(r)}function Px(e,t,n){var r=Gd(e),i=r.queries.get(t);if(i){var a,o=X(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Rx(e){e.Au.forEach((function(e){e.next()}))}var Lx=function(){function e(t,n,r){Y(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return J(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=X(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Tx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Tx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),Mx=function(){function e(t,n){Y(this,e),this.Nu=t,this.byteLength=n}return J(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),Fx=function(){function e(t){Y(this,e),this.serializer=t}return J(e,[{key:"Hi",value:function(e){return Cg(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?Rg(this.serializer,e.document,!1):cy.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return Eg(e)}}]),e}(),Ux=function(){function e(t,n,r){Y(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jx(t)}return J(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=fp.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Fx(this.serializer),i=X(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hi(a.metadata.name),s=X(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||mm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=s(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nw(this.localStore,new Fx(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=X(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,iw(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function jx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Vx=J((function e(t){Y(this,e),this.key=t})),Bx=J((function e(t){Y(this,e),this.key=t})),zx=function(){function e(t,n){Y(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=mm(),this.mutatedKeys=mm(),this.Ku=im(t),this.Gu=new Ix(this.Ku)}return J(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Ex,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=nm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qd()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Tx(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Ex,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=mm(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Bx(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Vx(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=mm();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Tx.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),qx=J((function e(t,n,r){Y(this,e),this.query=t,this.targetId=n,this.view=r})),Kx=J((function e(t){Y(this,e),this.key=t,this.ec=!1})),Gx=function(){function e(t,n,r,i,a,o){Y(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new om((function(e){return em(e)}),Zy),this.ic=new Map,this.rc=new Set,this.oc=new xv(pp.comparator),this.uc=new Map,this.cc=new xb,this.ac={},this.hc=new Map,this.lc=Xk.bn(),this.onlineState="Unknown",this.fc=void 0}return J(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function Wx(e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=s(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=jI(t),!(u=r.sc.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),a=u.view.tc(),e.next=15;break;case 6:return e.next=8,Yb(r.localStore,$y(n));case 8:return s=e.sent,r.isPrimaryClient&&Uw(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Qx(r,n,i,"current"===c,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Hx.apply(this,arguments)}function Qx(e,t,n,r,i){return Yx.apply(this,arguments)}function Yx(){return Yx=s(o().mark((function e(t,n,r,i,a){var u,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=s(o().mark((function e(t,n,r,i){var a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Xb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,u),e.abrupt("return",(vI(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Xb(t.localStore,n,!0);case 3:return u=e.sent,c=new zx(n,u.Wi),l=c.zu(u.documents),f=cg.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=c.applyChanges(l,t.isPrimaryClient,f),vI(t,r,h.Yu),d=new qx(n,r,c),e.abrupt("return",(t.sc.set(n,d),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function $x(e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gd(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Zy(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,$b(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),jw(r.remoteStore,i.targetId),dI(r,i.targetId)})).catch(_p);case 9:e.next=14;break;case 11:return dI(r,i.targetId),e.next=14,$b(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=s(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=VI(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Gd(e),a=sp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),mm());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=sm(),s=mm();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=X(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=qm(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Wm(c.key,l,sy(l.value.mapValue),Fm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:fm(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new xv(ap)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,gI(i,a.changes);case 9:return e.next=11,tx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=xx(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Zx.apply(this,arguments)}function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.prev=1,e.next=4,Wb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Kd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Kd(n.ec):e.removedDocuments.size>0&&(Kd(n.ec),n.ec=!1))})),e.next=8,gI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,_p(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),tI.apply(this,arguments)}function nI(e,t,n){var r=Gd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=X(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Rx(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function rI(e,t,n){return iI.apply(this,arguments)}function iI(){return iI=s(o().mark((function e(t,n,r){var i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(u=a&&a.key)){e.next=14;break}return s=(s=new xv(pp.comparator)).insert(u,cy.newNoDocument(u,cp.min())),c=mm().add(u),l=new sg(cp.min(),new Map,new Tv(ap),s,c),e.next=9,eI(i,l);case 9:i.oc=i.oc.remove(u),i.uc.delete(n),mI(i),e.next=16;break;case 14:return e.next=16,$b(i.localStore,n,!1).then((function(){return dI(i,n,r)})).catch(_p);case 16:case"end":return e.stop()}}),e)}))),iI.apply(this,arguments)}function aI(e,t){return oI.apply(this,arguments)}function oI(){return oI=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=n.batch.batchId,e.prev=1,e.next=4,Kb(r.localStore,n);case 4:return a=e.sent,hI(r,i,null),fI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,gI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,_p(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),oI.apply(this,arguments)}function uI(e,t,n){return sI.apply(this,arguments)}function sI(){return sI=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gd(t),e.prev=1,e.next=4,function(e,t){var n=Gd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Kd(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,hI(i,n,r),fI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,gI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,_p(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),sI.apply(this,arguments)}function cI(e,t){return lI.apply(this,arguments)}function lI(){return lI=s(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kw((r=Gd(t)).remoteStore)||jd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Gd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=xx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),lI.apply(this,arguments)}function fI(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function hI(e,t,n){var r=Gd(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function dI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=X(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||pI(e,t)}))}function pI(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(jw(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),mI(e))}function vI(e,t,n){var r,i=X(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Vx?(e.cc.addReference(a.key,t),yI(e,a)):a instanceof Bx?(jd("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||pI(e,a.key)):qd()}}catch(o){i.e(o)}finally{i.f()}}function yI(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(jd("SyncEngine","New document in limbo: "+n),e.rc.add(r),mI(e))}function mI(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new pp(fp.fromString(t)),r=e.lc.next();e.uc.set(r,new Kx(n)),e.oc=e.oc.insert(n,r),Uw(e.remoteStore,new $g($y(Ky(n.path)),r,2,Vp.ct))}}function gI(e,t,n){return kI.apply(this,arguments)}function kI(){return kI=s(o().mark((function e(t,n,r){var i,a,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gd(t),a=[],u=[],c=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){c.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Ub.Di(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.nc.zo(a),e.next=9,function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Cp.forEach(n,(function(t){return Cp.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Cp.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Pp(e.t0)){e.next=10;break}throw e.t0;case 10:jd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=X(n);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.targetId,u.fromCache||(c=r.Li.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.Li=r.Li.insert(s,f))}catch(o){i.e(o)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function bI(e,t){return wI.apply(this,arguments)}function wI(){return wI=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Gd(t)).currentUser.isEqual(n)){e.next=11;break}return jd("SyncEngine","User change. New user:",n.toKey()),e.next=5,zb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new Hd(Wd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,gI(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),wI.apply(this,arguments)}function xI(e,t){var n=Gd(e),r=n.uc.get(t);if(r&&r.ec)return mm().add(r.key);var i=mm(),a=n.ic.get(t);if(!a)return i;var o,u=X(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function II(e,t){return EI.apply(this,arguments)}function EI(){return EI=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.next=3,Xb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&vI(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),EI.apply(this,arguments)}function TI(e,t){return _I.apply(this,arguments)}function _I(){return _I=s(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),e.abrupt("return",ew(r.localStore,n).then((function(e){return gI(r,e)})));case 2:case"end":return e.stop()}}),e)}))),_I.apply(this,arguments)}function SI(e,t,n,r){return CI.apply(this,arguments)}function CI(){return CI=s(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gd(t),e.next=3,function(e,t){var n=Gd(e),r=Gd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Cp.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,tx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(hI(a,n,i||null),fI(a,n),function(e,t){Gd(Gd(e).mutationQueue).En(t)}(a.localStore,n)):qd();case 11:return e.next=13,gI(a,u);case 13:e.next=16;break;case 15:jd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),CI.apply(this,arguments)}function DI(e,t){return OI.apply(this,arguments)}function OI(){return OI=s(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jI(r=Gd(t)),VI(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,NI(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,mx(r.remoteStore,!0);case 9:u=X(a);try{for(u.s();!(s=u.n()).done;)c=s.value,Uw(r.remoteStore,c)}catch(o){u.e(o)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return l=[],f=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return dI(r,t),$b(r.localStore,t,!0)})),jw(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,NI(r,l);case 21:return function(e){var t=Gd(e);t.uc.forEach((function(e,n){jw(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new xv(pp.comparator)}(r),r.fc=!1,e.next=25,mx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),OI.apply(this,arguments)}function NI(e,t,n){return AI.apply(this,arguments)}function AI(){return AI=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d,p,v,y,m,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Gd(t),a=[],u=[],s=X(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.ic.get(l))||0===h.length){e.next=34;break}return e.next=11,Yb(i.localStore,$y(h[0]));case 11:f=e.sent,d=X(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.sc.get(v),e.next=20,II(i,y);case 20:(m=e.sent).snapshot&&u.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Zb(i.localStore,l);case 36:return g=e.sent,e.next=39,Yb(i.localStore,g);case 39:return f=e.sent,e.next=42,Qx(i,PI(g),l,!1,f.resumeToken);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(u),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),AI.apply(this,arguments)}function PI(e){return qy(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function RI(e){var t=Gd(e);return Gd(Gd(t.localStore).persistence).bi()}function LI(e,t,n,r){return MI.apply(this,arguments)}function MI(){return MI=s(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Gd(t)).fc){e.next=3;break}return e.abrupt("return",void jd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=a.ic.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,ew(a.localStore,rm(u[0]));case 10:return s=e.sent,c=sg.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ov.EMPTY_BYTE_STRING),e.next=14,gI(a,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,$b(a.localStore,n,!0);case 17:return dI(a,n,i),e.abrupt("break",20);case 19:qd();case 20:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function FI(e,t,n){return UI.apply(this,arguments)}function UI(){return UI=s(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=jI(t)).fc){e.next=45;break}a=X(n),e.prev=3,a.s();case 5:if((u=a.n()).done){e.next=21;break}if(s=u.value,!i.ic.has(s)){e.next=10;break}return jd("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Zb(i.localStore,s);case 12:return c=e.sent,e.next=15,Yb(i.localStore,c);case 15:return l=e.sent,e.next=18,Qx(i,PI(c),l.targetId,!1,l.resumeToken);case 18:Uw(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=X(r),e.prev=30,d=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,$b(i.localStore,t,!1).then((function(){jw(i.remoteStore,t),dI(i,t)})).catch(_p);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),UI.apply(this,arguments)}function jI(e){var t=Gd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=eI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rI.bind(null,t),t.nc.zo=Ax.bind(null,t.eventManager),t.nc.wc=Px.bind(null,t.eventManager),t}function VI(e){var t=Gd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uI.bind(null,t),t}function BI(e,t,n){var r=Gd(e);(function(){var e=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Gd(e),r=Eg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(jx(i)),a=new Ux(i,t.localStore,n.serializer),e.next=15,n._c();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,a.$u(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n._c();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,gI(t,c.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Gd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Bd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var zI=function(){function e(){Y(this,e),this.synchronizeTabs=!1}return J(e,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=_w(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Bb(this.persistence,new jb,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Cb(Ob.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new vw}},{key:"terminate",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qI=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this)).mc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return J(n,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn(ne(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,VI(this.mc.syncEngine);case 6:return e.next=8,tx(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Bb(this.persistence,new jb,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new ab(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new jp(t,this.persistence);return new Up(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Fb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Kk.withCacheSize(this.cacheSizeBytes):Kk.DEFAULT;return new Rb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ew(),Tw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new vw}}]),n}(zI),KI=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e,r,!1)).mc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return J(n,[{key:"initialize",value:function(){var e=s(o().mark((function e(t){var r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn(ne(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof pw,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:SI.bind(null,r),Mr:LI.bind(null,r),Fr:FI.bind(null,r),bi:RI.bind(null,r),Or:TI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DI(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Ew();if(!pw.D(t))throw new Hd(Wd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Fb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(qI),GI=function(){function e(){Y(this,e)}return J(e,[{key:"initialize",value:function(){var e=s(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return nI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=bI.bind(null,this.syncEngine),e.next=12,mx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Sx}},{key:"createDatastore",value:function(e){var t,n=_w(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Iw(t));return function(e,t,n,r){return new Nw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return nI(o.syncEngine,e,0)},a=mw.D()?new mw:new yw,new Pw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Gx(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gd(t),jd("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,Mw(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function WI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return s(o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var HI=function(){function e(t){Y(this,e),this.observer=t,this.muted=!1}return J(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Vd("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),QI=function(){function e(t,n){var r=this;Y(this,e),this.Ic=t,this.serializer=n,this.metadata=new Qd,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return J(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=s(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Mx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=s(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),YI=function(){function e(t){Y(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return J(e,[{key:"lookup",value:function(){var e=s(o().mark((function e(t){var n,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Hd(Wd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=s(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=Ng(r.serializer)+"/documents",a={documents:n.map((function(e){return Sg(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=Lg(r.serializer,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Kd(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Xm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=s(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=pp.fromPath(t);n.mutations.push(new Zm(r,n.precondition(r)))})),e.next=7,function(){var e=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gd(t),i=Ng(r.serializer)+"/documents",a={writes:n.map((function(e){return Mg(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qd();t=cp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Hd(Wd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(cp.min())?Fm.exists(!1):Fm.updateTime(t):Fm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(cp.min()))throw new Hd(Wd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fm.updateTime(t)}return Fm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),$I=function(){function e(t,n,r,i,a){Y(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new Sw(this.asyncQueue,"transaction_retry")}return J(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new YI(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!Bp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ig(t)}return!1}}]),e}(),JI=function(){function e(t,n,r,i){var a=this;Y(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ld.UNAUTHENTICATED,this.clientId=ip.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return J(e,[{key:"getConfiguration",value:function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Hd(Wd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(s(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=xx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function XI(e,t){return ZI.apply(this,arguments)}function ZI(){return ZI=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,zb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ZI.apply(this,arguments)}function eE(e,t){return tE.apply(this,arguments)}function tE(){return tE=s(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,rE(t);case 3:return r=e.sent,jd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return vx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return vx(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e){return"FirebaseError"===e.name?e.code===Wd.FAILED_PRECONDITION||e.code===Wd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function rE(e){return iE.apply(this,arguments)}function iE(){return iE=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return jd("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,XI(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),nE(n=e.t0)){e.next=13;break}throw n;case 13:return Bd("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,XI(t,new zI);case 16:e.next=21;break;case 18:return jd("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,XI(t,new zI);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),iE.apply(this,arguments)}function aE(e){return oE.apply(this,arguments)}function oE(){return oE=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return jd("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,eE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return jd("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,eE(t,new GI);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),oE.apply(this,arguments)}function uE(e){return rE(e).then((function(e){return e.persistence}))}function sE(e){return rE(e).then((function(e){return e.localStore}))}function cE(e){return aE(e).then((function(e){return e.remoteStore}))}function lE(e){return aE(e).then((function(e){return e.syncEngine}))}function fE(e){return aE(e).then((function(e){return e.datastore}))}function hE(e){return dE.apply(this,arguments)}function dE(){return dE=s(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Wx.bind(null,n.syncEngine),r.onUnlisten=$x.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),dE.apply(this,arguments)}function pE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qd;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new HI({next:function(a){t.enqueueAndForget((function(){return Ox(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Hd(Wd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Hd(Wd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Lx(Ky(n.path),a,{includeMetadataChanges:!0,xu:!0});return Cx(e,o)},i.next=3,hE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function vE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qd;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new HI({next:function(n){t.enqueueAndForget((function(){return Ox(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Hd(Wd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Lx(n,a,{includeMetadataChanges:!0,xu:!0});return Cx(e,o)},i.next=3,hE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var yE=new Map;function mE(e,t,n){if(!n)throw new Hd(Wd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gE(e,t,n,r){if(!0===t&&!0===r)throw new Hd(Wd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function kE(e){if(!pp.isDocumentKey(e))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function bE(e){if(pp.isDocumentKey(e))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function wE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":qd()}function xE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hd(Wd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=wE(e);throw new Hd(Wd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function IE(e,t){if(t<=0)throw new Hd(Wd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var EE=function(){function e(t){var n;if(Y(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Hd(Wd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hd(Wd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,gE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return J(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),TE=function(){function e(t,n,r,i){Y(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1}return J(e,[{key:"app",get:function(){if(!this._app)throw new Hd(Wd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Hd(Wd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $d;switch(e.type){case"firstParty":return new ep(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hd(Wd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=yE.get(e);t&&(jd("ComponentProvider","Removing Datastore"),yE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function _E(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=xE(e,TE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Bd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ld.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Hd(Wd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ld(s)}e._authCredentials=new Jd(new Yd(o,u))}}var SE=function(){function e(t,n,r){Y(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return J(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new DE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),CE=function(){function e(t,n,r){Y(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return J(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),DE=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this,e,r,Ky(i)))._path=i,a.type="collection",a}return J(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new SE(this.firestore,null,new pp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(CE);function OE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Le(e),mE("collection","path",t),e instanceof TE){var a=fp.fromString.apply(fp,[t].concat(r));return bE(a),new DE(e,null,a)}if(!(e instanceof SE||e instanceof DE))throw new Hd(Wd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fp.fromString.apply(fp,[t].concat(r)));return bE(o),new DE(e.firestore,null,o)}function NE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Le(e),1===arguments.length&&(t=ip.A()),mE("doc","path",t),e instanceof TE){var a=fp.fromString.apply(fp,[t].concat(r));return kE(a),new SE(e,null,new pp(a))}if(!(e instanceof SE||e instanceof DE))throw new Hd(Wd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fp.fromString.apply(fp,[t].concat(r)));return kE(o),new SE(e.firestore,e instanceof DE?e.converter:null,new pp(o))}function AE(e,t){return e=Le(e),t=Le(t),(e instanceof SE||e instanceof DE)&&(t instanceof SE||t instanceof DE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function PE(e,t){return e=Le(e),t=Le(t),e instanceof CE&&t instanceof CE&&e.firestore===t.firestore&&Zy(e._query,t._query)&&e.converter===t.converter}var RE=function(){function e(){var t=this;Y(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Sw(this,"async_queue_retry"),this.qc=function(){var e=Tw();e&&jd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=Tw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return J(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Tw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new Qd;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Pp(e.t0)){e.next=12;break}throw e.t0;case 12:jd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=wx.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&qd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=X(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=X(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function LE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=X(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ME=function(){function e(){Y(this,e),this._progressObserver={},this._taskCompletionResolver=new Qd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return J(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),FE=function(e){te(n,e);var t=ie(n);function n(e,r,i,a){var o;return Y(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new RE,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return J(n,[{key:"_terminate",value:function(){return this._firestoreClient||jE(this),this._firestoreClient.terminate()}}]),n}(TE);function UE(e){return e._firestoreClient||jE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function jE(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Uv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new JI(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function VE(e,t,n){var r=new Qd;return e.asyncQueue.enqueue(s(o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,XI(e,n);case 3:return i.next=5,eE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),nE(a=i.t0)){i.next=13;break}throw a;case 13:Bd("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function BE(e){return function(e){return e.asyncQueue.enqueue(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,uE(e);case 2:return n=t.sent,t.next=5,cE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Gd(e);return t.du.delete(0),Rw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(UE(e=xE(e,FE)))}function zE(e){return function(e){return e.asyncQueue.enqueue(s(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,uE(e);case 2:return n=t.sent,t.next=5,cE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gd(t)).du.add(0),e.next=4,Mw(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(UE(e=xE(e,FE)))}function qE(e,t){var n=UE(e=xE(e,FE)),r=new ME;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new QI(e,t)}(function(e,t){if(e instanceof Uint8Array)return WI(e,t);if(e instanceof ArrayBuffer)return WI(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,_w(t));e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=BI,t.next=3,lE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function KE(e,t){return function(e,t){return e.asyncQueue.enqueue(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Gd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,sE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(UE(e=xE(e,FE)),t).then((function(t){return t?new CE(e,null,t.query):null}))}function GE(e){if(e._initialized||e._terminated)throw new Hd(Wd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var WE=function(){function e(t){Y(this,e),this._byteString=t}return J(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ov.fromBase64String(t))}catch(t){throw new Hd(Wd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ov.fromUint8Array(t))}}]),e}(),HE=function(){function e(){Y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dp(n)}return J(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var QE=J((function e(t){Y(this,e),this._methodName=t})),YE=function(){function e(t,n){if(Y(this,e),!isFinite(t)||t<-90||t>90)throw new Hd(Wd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hd(Wd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return J(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ap(this._lat,e._lat)||ap(this._long,e._long)}}]),e}(),$E=/^__.*__$/,JE=function(){function e(t,n,r){Y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return J(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Wm(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gm(e,this.data,t,this.fieldTransforms)}}]),e}(),XE=function(){function e(t,n,r){Y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return J(e,[{key:"toMutation",value:function(e,t){return new Wm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ZE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qd()}}var eT=function(){function e(t,n,r,i,a,o){Y(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return J(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return bT(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(ZE(this.Yc)&&$E.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),tT=function(){function e(t,n,r){Y(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||_w(t)}return J(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new eT({Yc:e,methodName:t,oa:n,path:dp.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function nT(e){var t=e._freezeSettings(),n=_w(e._databaseId);return new tT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rT(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);yT("Data must be an object, but it was:",o,r);var u,s,c=pT(r,o);if(a.merge)u=new Cv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=X(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=mT(t,l.value,n);if(!o.contains(d))throw new Hd(Wd.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));wT(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Cv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new JE(new uy(c),u,s)}var iT=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(QE);function aT(e,t,n){return new eT({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var oT=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"_toFieldTransform",value:function(e){return new Lm(e.path,new Sm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(QE),uT=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e)).ca=r,i}return J(n,[{key:"_toFieldTransform",value:function(e){var t=aT(this,e,!0),n=this.ca.map((function(e){return dT(e,t)})),r=new Cm(n);return new Lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(QE),sT=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e)).ca=r,i}return J(n,[{key:"_toFieldTransform",value:function(e){var t=aT(this,e,!0),n=this.ca.map((function(e){return dT(e,t)})),r=new Om(n);return new Lm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(QE),cT=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e)).aa=r,i}return J(n,[{key:"_toFieldTransform",value:function(e){var t=new Am(e.serializer,xm(e.serializer,this.aa));return new Lm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(QE);function lT(e,t,n,r){var i=e.ua(1,t,n);yT("Data must be an object, but it was:",i,r);var a=[],o=uy.empty();bv(r,(function(e,r){var u=kT(t,e,n);r=Le(r);var s=i.na(u);if(r instanceof iT)a.push(u);else{var c=dT(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Cv(a);return new XE(o,u,i.fieldTransforms)}function fT(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[mT(t,r,n)],s=[i];if(a.length%2!=0)throw new Hd(Wd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(mT(t,a[c])),s.push(a[c+1]);for(var l=[],f=uy.empty(),h=u.length-1;h>=0;--h)if(!wT(l,u[h])){var d=u[h],p=s[h];p=Le(p);var v=o.na(d);if(p instanceof iT)l.push(d);else{var y=dT(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Cv(l);return new XE(f,m,o.fieldTransforms)}function hT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return dT(n,e.ua(r?4:3,t))}function dT(e,t){if(vT(e=Le(e)))return yT("Unsupported field value:",t,e),pT(e,t);if(e instanceof QE)return function(e,t){if(!ZE(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=X(e);try{for(a.s();!(n=a.n()).done;){var o=dT(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Le(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=sp.fromDate(e);return{timestampValue:wg(t.serializer,n)}}if(e instanceof sp){var r=new sp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:wg(t.serializer,r)}}if(e instanceof YE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof WE)return{bytesValue:xg(t.serializer,e._byteString)};if(e instanceof SE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Tg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(wE(e)))}(e,t)}function pT(e,t){var n={};return wv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bv(e,(function(e,r){var i=dT(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function vT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof sp||e instanceof YE||e instanceof WE||e instanceof SE||e instanceof QE)}function yT(e,t,n){if(!vT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=wE(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function mT(e,t,n){if((t=Le(t))instanceof HE)return t._internalPath;if("string"==typeof t)return kT(e,t);throw bT("Field path arguments must be of type string or ",e,!1,void 0,n)}var gT=new RegExp("[~\\*/\\[\\]]");function kT(e,t,n){if(t.search(gT)>=0)throw bT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ae(HE,b(t.split(".")))._internalPath}catch(r){throw bT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function bT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Hd(Wd.INVALID_ARGUMENT,u+e+s)}function wT(e,t){return e.some((function(e){return e.isEqual(t)}))}var xT=function(){function e(t,n,r,i,a){Y(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return J(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new SE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new IT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ET("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),IT=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"data",value:function(){return fn(ne(n.prototype),"data",this).call(this)}}]),n}(xT);function ET(e,t){return"string"==typeof t?kT(e,t):t instanceof HE?t._internalPath:t._delegate._internalPath}function TT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hd(Wd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _T=J((function e(){Y(this,e)})),ST=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n)}(_T);function CT(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof _T&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof OT})).length,n=e.filter((function(e){return e instanceof DT})).length;if(t>1||t>0&&n>0)throw new Hd(Wd.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=X(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var DT=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return J(n,[{key:"_apply",value:function(e){var t=this._parse(e);return zT(e._query,t),new CE(e.firestore,e.converter,Jy(e._query,t))}},{key:"_parse",value:function(e){var t=nT(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){BT(o,a);var s,c=[],l=X(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(VT(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=VT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||BT(o,a),u=hT(n,"where",o,"in"===a||"not-in"===a);return yy.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ST);var OT=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return J(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:my.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=X(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;zT(r,a),r=Jy(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new CE(e.firestore,e.converter,Jy(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(_T);var NT=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return J(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new dy(t,n);return function(e,t){if(null===Wy(e)){var n=Hy(e);null!==n&&qT(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new CE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ST);var AT=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return J(n,[{key:"_apply",value:function(e){return new CE(e.firestore,e.converter,Xy(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ST);var PT=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return J(n,[{key:"_apply",value:function(e){var t=jT(e,this.type,this._docOrFields,this._inclusive);return new CE(e.firestore,e.converter,function(e,t){return new zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ST);function RT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PT._create("startAt",t,!0)}function LT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PT._create("startAfter",t,!1)}var MT=function(e){te(n,e);var t=ie(n);function n(e,r,i){var a;return Y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return J(n,[{key:"_apply",value:function(e){var t=jT(e,this.type,this._docOrFields,this._inclusive);return new CE(e.firestore,e.converter,function(e,t){return new zy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ST);function FT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return MT._create("endBefore",t,!1)}function UT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return MT._create("endAt",t,!0)}function jT(e,t,n,r){if(n[0]=Le(n[0]),n[0]instanceof xT)return function(e,t,n,r,i){if(!r)throw new Hd(Wd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=X(Yy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Yv(t,r.key));else{var c=r.data.field(s.field);if(Lv(c))throw new Hd(Wd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ly(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=nT(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Hd(Wd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Qy(e)&&-1!==c.indexOf("/"))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(fp.fromString(c));if(!pp.isDocumentKey(l))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new pp(l);u.push(Yv(t,f))}else{var h=hT(n,r,c);u.push(h)}}return new ly(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function VT(e,t,n){if("string"==typeof(n=Le(n))){if(""===n)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qy(t)&&-1!==n.indexOf("/"))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(fp.fromString(n));if(!pp.isDocumentKey(r))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Yv(e,new pp(r))}if(n instanceof SE)return Yv(e,n._key);throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(wE(n),"."))}function BT(e,t){if(!Array.isArray(e)||0===e.length)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function zT(e,t){if(t.isInequality()){var n=Hy(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Wy(e);null!==i&&qT(e,r,i)}var a=function(e,t){var n,r=X(e);try{for(r.s();!(n=r.n()).done;){var i,a=X(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function qT(e,t,n){if(!n.isEqual(t))throw new Hd(Wd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var KT=function(){function e(){Y(this,e)}return J(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return bv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new YE(Pv(e.latitude),Pv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Mv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Av(e);return new sp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=fp.fromString(e);Kd(Yg(n));var r=new jv(n.get(1),n.get(3)),i=new pp(n.popFirst(5));return r.isEqual(t)||Vd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function GT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var WT=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this)).firestore=e,r}return J(n,[{key:"convertBytes",value:function(e){return new WE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new SE(this.firestore,null,t)}}]),n}(KT);var HT=function(){function e(t,n){Y(this,e),this.hasPendingWrites=t,this.fromCache=n}return J(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),QT=function(e){te(n,e);var t=ie(n);function n(e,r,i,a,o,u){var s;return Y(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return J(n,[{key:"exists",value:function(){return fn(ne(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new YT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ET("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(xT),YT=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fn(ne(n.prototype),"data",this).call(this,e)}}]),n}(QT),$T=function(){function e(t,n,r,i){Y(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new HT(i.hasPendingWrites,i.fromCache),this.query=r}return J(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new YT(n._firestore,n._userDataWriter,r.key,r,new HT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hd(Wd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new YT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new HT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new YT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new HT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:JT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function JT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qd()}}function XT(e,t){return e instanceof QT&&t instanceof QT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $T&&t instanceof $T&&e._firestore===t._firestore&&PE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var ZT=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this)).firestore=e,r}return J(n,[{key:"convertBytes",value:function(e){return new WE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new SE(this.firestore,null,t)}}]),n}(KT);function e_(e){e=xE(e,SE);var t=xE(e.firestore,FE),n=UE(t),r=new ZT(t);return function(e,t){var n=new Qd;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=s(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Gd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Hd(Wd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=xx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,sE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new QT(t,r,e._key,n,new HT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function t_(e){e=xE(e,CE);var t=xE(e.firestore,FE),n=UE(t),r=new ZT(t);return function(e,t){var n=new Qd;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=s(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xb(t,n,!0);case 3:i=e.sent,a=new zx(n,i.Wi),u=a.zu(i.documents),s=a.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=xx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,sE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new $T(t,r,e,n)}))}function n_(e,t,n){e=xE(e,SE);var r=xE(e.firestore,FE),i=GT(e.converter,t,n);return o_(r,[rT(nT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fm.none())])}function r_(e,t,n){e=xE(e,SE);for(var r=xE(e.firestore,FE),i=nT(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return o_(r,[("string"==typeof(t=Le(t))||t instanceof HE?fT(i,"updateDoc",e._key,t,n,o):lT(i,"updateDoc",e._key,t)).toMutation(e._key,Fm.exists(!0))])}function i_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=Le(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||LE(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(LE(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[l+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(e instanceof SE)h=xE(e.firestore,FE),d=Ky(e._key.path),f={next:function(t){n[l]&&n[l](u_(h,e,t))},error:n[l+1],complete:n[l+2]};else{var y=xE(e,CE);h=xE(y.firestore,FE),d=y._query;var m=new ZT(h);f={next:function(e){n[l]&&n[l](new $T(h,m,y,e))},error:n[l+1],complete:n[l+2]},TT(e._query)}return function(e,t,n,r){var i=new HI(r),a=new Lx(t,i,n);return e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Cx,t.next=3,hE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ox,t.next=3,hE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(UE(h),d,p,f)}function a_(e,t){return function(e,t){var n=new HI(t);return e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gd(e).Au.add(t),t.next()},t.next=3,hE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(s(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gd(e).Au.delete(t)},t.next=3,hE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(UE(e=xE(e,FE)),LE(t)?t:{next:t})}function o_(e,t){return function(e,t){var n=new Qd;return e.asyncQueue.enqueueAndForget(s(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Xx,r.next=3,lE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(UE(e),t)}function u_(e,t,n){var r=n.docs.get(t._key),i=new ZT(e);return new QT(e,i,t._key,r,new HT(n.hasPendingWrites,n.fromCache),t.converter)}var s_={maxAttempts:5},c_=function(){function e(t,n){Y(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nT(t)}return J(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=l_(e,this._firestore),i=GT(r.converter,t,n),a=rT(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Fm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=l_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Le(t))||t instanceof HE?fT(this._dataReader,"WriteBatch.update",i._key,t,n,o):lT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Fm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=l_(e,this._firestore);return this._mutations=this._mutations.concat(new Xm(t._key,Fm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Hd(Wd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function l_(e,t){if((e=Le(e)).firestore!==t)throw new Hd(Wd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var f_=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e,r))._firestore=e,i}return J(n,[{key:"get",value:function(e){var t=this,r=l_(e,this._firestore),i=new ZT(this._firestore);return fn(ne(n.prototype),"get",this).call(this,e).then((function(e){return new QT(t._firestore,i,r._key,e._document,new HT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Y(this,e),this._firestore=t,this._transaction=n,this._dataReader=nT(t)}return J(e,[{key:"get",value:function(e){var t=this,n=l_(e,this._firestore),r=new WT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return qd();var i=e[0];if(i.isFoundDocument())return new xT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new xT(t._firestore,r,n._key,null,n.converter);throw qd()}))}},{key:"set",value:function(e,t,n){var r=l_(e,this._firestore),i=GT(r.converter,t,n),a=rT(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=l_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Le(t))||t instanceof HE?fT(this._dataReader,"Transaction.update",i._key,t,n,o):lT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=l_(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function h_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uT("arrayUnion",t)}function d_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sT("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Md=e}(Ot),It(new Me("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new FE(new Xd(e.getProvider("auth-internal")),new np(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hd(Wd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jv(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Mt(Rd,"3.10.0",e),Mt(Rd,"3.10.0","esm2017")}();function p_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Hd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function v_(){if("undefined"===typeof Uint8Array)throw new Hd("unimplemented","Uint8Arrays are not available in this environment.")}function y_(){if("undefined"==typeof atob)throw new Hd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var m_=function(){function e(t){Y(this,e),this._delegate=t}return J(e,[{key:"toBase64",value:function(){return y_(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return v_(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return y_(),new e(WE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return v_(),new e(WE.fromUint8Array(t))}}]),e}();function g_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=X(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var k_=function(){function e(){Y(this,e)}return J(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){GE(e=xE(e,FE));var n=UE(e);if(n._uninitializedComponentsProvider)throw new Hd(Wd.FAILED_PRECONDITION,"SDK cache is already specified.");Bd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new GI;return VE(n,i,new qI(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){GE(e=xE(e,FE));var t=UE(e);if(t._uninitializedComponentsProvider)throw new Hd(Wd.FAILED_PRECONDITION,"SDK cache is already specified.");Bd("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new GI;return VE(t,r,new KI(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Hd(Wd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qd;return e._queue.enqueueAndForgetEvenWhileRestricted(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=s(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Op.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Op.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Fb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),b_=function(){function e(t,n,r){var i=this;Y(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof jv||(this._appCompat=t)}return J(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Bd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_E(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return BE(this._delegate)}},{key:"disableNetwork",value:function(){return zE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&gE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Qd;return e.asyncQueue.enqueueAndForget(s(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=cI,n.next=3,lE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(UE(e=xE(e,FE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return a_(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Hd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new R_(this,OE(this._delegate,e))}catch(t){throw __(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new T_(this,NE(this._delegate,e))}catch(t){throw __(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new N_(this,function(e,t){if(e=xE(e,TE),mE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Hd(Wd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new CE(e,null,function(e){return new zy(fp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw __(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=xE(e,FE);var r=Object.assign(Object.assign({},s_),n);return function(e){if(e.maxAttempts<1)throw new Hd(Wd.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Qd;return e.asyncQueue.enqueueAndForget(s(o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fE(e);case 2:a=i.sent,new $I(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(UE(e),(function(n){return t(new f_(e,n))}),r)}(this._delegate,(function(n){return e(new x_(t,n))}))}},{key:"batch",value:function(){var e=this;return UE(this._delegate),new I_(new c_(this._delegate,(function(t){return o_(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return qE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return KE(this._delegate,e).then((function(e){return e?new N_(t,e):null}))}}]),e}(),w_=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this)).firestore=e,r}return J(n,[{key:"convertBytes",value:function(e){return new m_(new WE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return T_.forKey(t,this.firestore,null)}}]),n}(KT);var x_=function(){function e(t,n){Y(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new w_(t)}return J(e,[{key:"get",value:function(e){var t=this,n=L_(e);return this._delegate.get(n).then((function(e){return new D_(t._firestore,new QT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=L_(e);return n?(p_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=L_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=L_(e);return this._delegate.delete(t),this}}]),e}(),I_=function(){function e(t){Y(this,e),this._delegate=t}return J(e,[{key:"set",value:function(e,t,n){var r=L_(e);return n?(p_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=L_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=L_(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),E_=function(){function e(t,n,r){Y(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return J(e,[{key:"fromFirestore",value:function(e,t){var n=new YT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new O_(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new w_(t),n),i.set(n,a)),a}}]),e}();E_.INSTANCES=new WeakMap;var T_=function(){function e(t,n){Y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new w_(t)}return J(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new R_(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new R_(this.firestore,OE(this._delegate,e))}catch(t){throw __(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Le(e))instanceof SE&&AE(this._delegate,e)}},{key:"set",value:function(e,t){t=p_("DocumentReference.set",t);try{return t?n_(this._delegate,e,t):n_(this._delegate,e)}catch(n){throw __(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?r_(this._delegate,e):r_.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw __(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return o_(xE(e.firestore,FE),[new Xm(e._key,Fm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=S_(n),a=C_(n,(function(t){return new D_(e.firestore,new QT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return i_(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?e_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xE(e,SE);var t=xE(e.firestore,FE);return pE(UE(t),e._key,{source:"server"}).then((function(n){return u_(t,e,n)}))}(this._delegate):function(e){e=xE(e,SE);var t=xE(e.firestore,FE);return pE(UE(t),e._key).then((function(n){return u_(t,e,n)}))}(this._delegate),t.then((function(e){return new D_(n.firestore,new QT(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(E_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Hd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new SE(n._delegate,r,new pp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new SE(n._delegate,r,t))}}]),e}();function __(e,t,n){return e.message=e.message.replace(t,n),e}function S_(e){var t,n=X(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!g_(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function C_(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=g_(e[0])?e[0]:g_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var D_=function(){function e(t,n){Y(this,e),this._firestore=t,this._delegate=n}return J(e,[{key:"ref",get:function(){return new T_(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return XT(this._delegate,e._delegate)}}]),e}(),O_=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||qd()}(void 0!==t),t}}]),n}(D_),N_=function(){function e(t,n){Y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new w_(t)}return J(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,CT(this._delegate,function(e,t,n){var r=t,i=ET("where",e);return DT._create(i,r,n)}(t,n,r)))}catch(i){throw __(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,CT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ET("orderBy",e);return NT._create(n,t)}(t,n)))}catch(r){throw __(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,CT(this._delegate,function(e){return IE("limit",e),AT._create("limit",e,"F")}(t)))}catch(n){throw __(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,CT(this._delegate,function(e){return IE("limitToLast",e),AT._create("limitToLast",e,"L")}(t)))}catch(n){throw __(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,CT(this._delegate,RT.apply(void 0,arguments)))}catch(t){throw __(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,CT(this._delegate,LT.apply(void 0,arguments)))}catch(t){throw __(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,CT(this._delegate,FT.apply(void 0,arguments)))}catch(t){throw __(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,CT(this._delegate,UT.apply(void 0,arguments)))}catch(t){throw __(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return PE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?t_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=xE(e,CE);var t=xE(e.firestore,FE),n=UE(t),r=new ZT(t);return vE(n,e._query,{source:"server"}).then((function(n){return new $T(t,r,e,n)}))}(this._delegate):function(e){e=xE(e,CE);var t=xE(e.firestore,FE),n=UE(t),r=new ZT(t);return TT(e._query),vE(n,e._query).then((function(n){return new $T(t,r,e,n)}))}(this._delegate),t.then((function(e){return new P_(n.firestore,new $T(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=S_(n),a=C_(n,(function(t){return new P_(e.firestore,new $T(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return i_(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(E_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),A_=function(){function e(t,n){Y(this,e),this._firestore=t,this._delegate=n}return J(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new O_(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),P_=function(){function e(t,n){Y(this,e),this._firestore=t,this._delegate=n}return J(e,[{key:"query",get:function(){return new N_(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new O_(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new A_(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new O_(n._firestore,r))}))}},{key:"isEqual",value:function(e){return XT(this._delegate,e._delegate)}}]),e}(),R_=function(e){te(n,e);var t=ie(n);function n(e,r){var i;return Y(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return J(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new T_(this.firestore,e):null}},{key:"doc",value:function(e){try{return new T_(this.firestore,void 0===e?NE(this._delegate):NE(this._delegate,e))}catch(t){throw __(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=xE(e.firestore,FE),r=NE(e),i=GT(e.converter,t);return o_(n,[rT(nT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Fm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new T_(t.firestore,e)}))}},{key:"isEqual",value:function(e){return AE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(E_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(N_);function L_(e){return xE(e,SE)}var M_=function(){function e(){Y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ae(HE,n)}return J(e,[{key:"isEqual",value:function(e){return(e=Le(e))instanceof HE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(dp.keyField().canonicalString())}}]),e}(),F_=function(){function e(t){Y(this,e),this._delegate=t}return J(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new oT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new iT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=h_.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=d_.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new cT("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),U_={Firestore:b_,GeoPoint:YE,Timestamp:sp,Blob:m_,Transaction:x_,WriteBatch:I_,DocumentReference:T_,DocumentSnapshot:D_,Query:N_,QueryDocumentSnapshot:O_,QuerySnapshot:P_,CollectionReference:R_,FieldPath:M_,FieldValue:F_,setLogLevel:function(e){!function(e){Fd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Me("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},U_)))}(e,(function(e,t){return new b_(e,t,new k_)})),e.registerVersion("@firebase/firestore-compat","0.3.6")}(cn);cn.initializeApp({apiKey:"AIzaSyARPrb_k9hwbVmOPQhuRshEYVwVzAU9MNQ",authDomain:"my-chess-806f4.firebaseapp.com",projectId:"my-chess-806f4",storageBucket:"my-chess-806f4.appspot.com",messagingSenderId:"106950577505",appId:"1:106950577505:web:28e3d0d4f5cff3cac1c920"});var j_=cn.firestore(),V_=cn.auth(),B_={includeMetadataChanges:!1};function z_(e,t){return void 0===t&&(t=B_),new B((function(n){return{unsubscribe:i_(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}}))}function q_(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new H_(e,t))}}var K_,G_,W_,H_=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Q_(e,this.project,this.thisArg))},e}(),Q_=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return E(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(M),Y_=["pendingPromotion","gameData"],$_=new(x());function J_(e){return X_.apply(this,arguments)}function X_(){return X_=s(o().mark((function e(t){var n,r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=V_.currentUser,!t){e.next=22;break}return K_=t,e.next=5,t.get().then((function(e){return e.data()}));case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return","notfound");case 8:if(i=r.members.find((function(e){return!0===e.creator})),"waiting"!==r.status||i.uid===n.uid){e.next=16;break}return a={uid:n.uid,name:localStorage.getItem("userName"),piece:"w"===i.piece?"b":"w"},u=[].concat(b(r.members),[a]),e.next=14,t.update({members:u,status:"ready"});case 14:e.next=18;break;case 16:if(r.members.map((function(e){return e.uid})).includes(n.uid)){e.next=18;break}return e.abrupt("return","intruder");case 18:$_.reset(),W_=z_(t).pipe(q_((function(e){var t=e.data(),r=t.pendingPromotion,i=t.gameData,a=g(t,Y_);G_=t.members.find((function(e){return e.uid===n.uid}));var o=t.members.find((function(e){return e.uid!==n.uid}));i&&$_.load(i);var u=$_.game_over();return m({board:$_.board(),pendingPromotion:r,isGameOver:u,position:G_.piece,member:G_,opponent:o,result:u?aS():null},a)}))),e.next=27;break;case 22:K_=null,W_=new Q,(s=localStorage.getItem("savedGame"))&&$_.load(s),rS();case 27:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function Z_(){return eS.apply(this,arguments)}function eS(){return(eS=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K_){e.next=6;break}return e.next=3,rS(null,!0);case 3:$_.reset(),e.next=8;break;case 6:$_.reset(),rS();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tS(e,t,n){var r={from:e,to:t};n&&(r.promotion=n),K_?G_.piece===$_.turn()&&nS(r):nS(r)}function nS(e){$_.move(e)&&rS()}function rS(e,t){return iS.apply(this,arguments)}function iS(){return(iS=s(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$_.game_over(),!K_){e.next=8;break}return i={gameData:$_.fen(),pendingPromotion:t||null},n&&(i.status="over"),e.next=6,K_.update(i);case 6:e.next=11;break;case 8:a={board:$_.board(),pendingPromotion:t,isGameOver:r,position:$_.turn(),result:r?aS():null},localStorage.setItem("savedGame",$_.fen()),W_.next(a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aS(){if($_.isCheckmate()){var e="w"===$_.turn()?"BLACK":"WHITE";return"CHECKMATE - WINNER - ".concat(e)}if($_.in_draw()){var t="50 - MOVES - RULE";return $_.isStalemate()?t="STALEMATE":$_.isThreefoldRepetition()?t="REPETITION":$_.isInsufficientMaterial()&&(t="INSUFFICIENT MATERIAL"),"DRAW - ".concat(t)}return"UNKNOWN REASON"}var oS=n(184);function uS(e){var t=e.children,n=e.black?"black":"white";return(0,oS.jsx)("div",{className:"".concat(n," board-square"),children:t})}function sS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;(a=new Error(t.replace(/%s/g,(function(){return r[o++]})))).name="Invariant Violation"}throw a.framesToPop=1,a}}var cS="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function lS(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}function fS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vS(e,t,n){var i=function(e,t,n){var i=fS((0,r.useState)((function(){return t(e)})),2),a=i[0],o=i[1],u=(0,r.useCallback)((function(){var r=t(e);lS(a,r)||(o(r),n&&n())}),[a,e,n]);return cS(u,[]),[a,u]}(e,t,n),a=dS(i,2),o=a[0],u=a[1];return cS((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(u,{handlerIds:[t]})}),[e,u]),o}function yS(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var mS="function"===typeof Symbol&&Symbol.observable||"@@observable",gS=function(){return Math.random().toString(36).substring(7).split("").join(".")},kS={INIT:"@@redux/INIT"+gS(),REPLACE:"@@redux/REPLACE"+gS(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+gS()}};function bS(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function wS(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(yS(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(yS(1));return n(wS)(e,t)}if("function"!==typeof e)throw new Error(yS(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(yS(3));return a}function f(e){if("function"!==typeof e)throw new Error(yS(4));if(s)throw new Error(yS(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(yS(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!bS(e))throw new Error(yS(7));if("undefined"===typeof e.type)throw new Error(yS(8));if(s)throw new Error(yS(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:kS.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(yS(10));i=e,h({type:kS.REPLACE})}})[mS]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(yS(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[mS]=function(){return this},e},r}var xS="dnd-core/INIT_COORDS",IS="dnd-core/BEGIN_DRAG",ES="dnd-core/PUBLISH_DRAG_SOURCE",TS="dnd-core/HOVER",_S="dnd-core/DROP",SS="dnd-core/END_DRAG",CS=function(e,t){return e===t};function DS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DS(Object(n),!0).forEach((function(t){NS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AS={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function PS(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AS,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case xS:case IS:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case TS:return e=n.clientOffset,t=i.clientOffset,!e&&!t||e&&t&&e.x===t.x&&e.y===t.y?n:OS(OS({},n),{},{clientOffset:i.clientOffset});case SS:case _S:return AS;default:return n}}var RS="dnd-core/ADD_SOURCE",LS="dnd-core/ADD_TARGET",MS="dnd-core/REMOVE_SOURCE",FS="dnd-core/REMOVE_TARGET";function US(e){return US="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},US(e)}function jS(e){return"object"===US(e)}function VS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VS(Object(n),!0).forEach((function(t){zS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qS={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function KS(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qS,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case IS:return BS(BS({},n),{},{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case ES:return BS(BS({},n),{},{isSourcePublic:!0});case TS:return BS(BS({},n),{},{targetIds:i.targetIds});case FS:return-1===n.targetIds.indexOf(i.targetId)?n:BS(BS({},n),{},{targetIds:(e=n.targetIds,t=i.targetId,e.filter((function(e){return e!==t})))});case _S:return BS(BS({},n),{},{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case SS:return BS(BS({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function GS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case RS:case LS:return e+1;case MS:case FS:return e-1;default:return e}}var WS=[],HS=[];function QS(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case TS:break;case RS:case LS:case FS:case MS:return WS;default:return HS}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,i=t.prevTargetIds,a=void 0===i?[]:i,o=function(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e,t){1===e&&i.push(t)})),i}(r,a),u=o.length>0||!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:CS;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(r,a);if(!u)return WS;var s=a[a.length-1],c=r[r.length-1];return s!==c&&(s&&o.push(s),c&&o.push(c)),o}function YS(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function $S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$S(Object(n),!0).forEach((function(t){XS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZS(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:QS(r.dirtyHandlerIds,{type:i.type,payload:JS(JS({},i.payload),{},{prevTargetIds:(e=r,t="dragOperation.targetIds",n=[],t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e))})}),dragOffset:PS(r.dragOffset,i),refCount:GS(r.refCount,i),dragOperation:KS(r.dragOperation,i),stateId:YS(r.stateId)}}function eC(e,t){return{type:xS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}WS.__IS_NONE__=!0,HS.__IS_ALL__=!0;var tC={type:xS,payload:{clientOffset:null,sourceClientOffset:null}};function nC(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,i=void 0===r||r,a=n.clientOffset,o=n.getSourceClientOffset,u=e.getMonitor(),s=e.getRegistry();e.dispatch(eC(a)),function(e,t,n){sS(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){sS(n.getSource(e),"Expected sourceIds to be registered.")}))}(t,u,s);var c=function(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,u);if(null!==c){var l=null;if(a){if(!o)throw new Error("getSourceClientOffset must be defined");!function(e){sS("function"===typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(o),l=o(c)}e.dispatch(eC(a,l));var f=s.getSource(c).beginDrag(u,c);!function(e){sS(jS(e),"Item must be an object.")}(f),s.pinSource(c);var h=s.getSourceType(c);return{type:IS,payload:{itemType:h,item:f,sourceId:c,clientOffset:a||null,sourceClientOffset:l||null,isSourcePublic:!!i}}}e.dispatch(tC)}}function rC(e){return function(){if(e.getMonitor().isDragging())return{type:ES}}}function iC(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function aC(e){return function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset;!function(e){sS(Array.isArray(e),"Expected targetIds to be an array.")}(t);var r=t.slice(0),i=e.getMonitor(),a=e.getRegistry();return function(e,t,n){sS(t.isDragging(),"Cannot call hover while not dragging."),sS(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var i=e[r];sS(e.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array."),sS(n.getTarget(i),"Expected targetIds to be registered.")}}(r,i,a),function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];iC(t.getTargetType(i),n)||e.splice(r,1)}}(r,a,i.getItemType()),function(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}(r,i,a),{type:TS,payload:{targetIds:r,clientOffset:n||null}}}}function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oC(Object(n),!0).forEach((function(t){sC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cC(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();!function(e){sS(e.isDragging(),"Cannot call drop while not dragging."),sS(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);var i=function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);i.forEach((function(i,a){var o=function(e,t,n,r){var i=n.getTarget(e),a=i?i.drop(r,e):void 0;(function(e){sS("undefined"===typeof e||jS(e),"Drop result must either be an object or undefined.")})(a),"undefined"===typeof a&&(a=0===t?{}:r.getDropResult());return a}(i,a,r,n),u={type:_S,payload:{dropResult:uC(uC({},t),o)}};e.dispatch(u)}))}}function lC(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){sS(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:SS}}}function fC(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dC,pC=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=n}var t,n,r;return t=e,n=[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0}).handlerIds;sS("function"===typeof e,"listener must be a function."),sS("undefined"===typeof n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var r=this.store.getState().stateId;return this.store.subscribe((function(){var i=t.store.getState(),a=i.stateId;try{var o=a===r||a===r+1&&!function(e,t){if(e===WS)return!1;if(e===HS||"undefined"===typeof t)return!0;var n,r=(n=e,t.filter((function(e){return n.indexOf(e)>-1})));return r.length>0}(i.dirtyHandlerIds,n);o||e()}finally{r=a}}))}},{key:"subscribeToOffsetChange",value:function(e){var t=this;sS("function"===typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return sS(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return sS(t,"Expected to find a valid target."),!(!this.isDragging()||this.didDrop())&&iC(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return sS(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){if(!e)return!1;var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();if(r&&!iC(n,r))return!1;var i=this.getTargetIds();if(!i.length)return!1;var a=i.indexOf(e);return t?a===i.length-1:a>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return function(e){var t=e.clientOffset,n=e.initialClientOffset,r=e.initialSourceClientOffset;return t&&n&&r?fC(function(e,t){return{x:e.x+t.x,y:e.y+t.y}}(t,r),n):null}(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return function(e){var t=e.clientOffset,n=e.initialClientOffset;return t&&n?fC(t,n):null}(this.store.getState().dragOffset)}}],n&&hC(t.prototype,n),r&&hC(t,r),e}(),vC=0;function yC(e){return yC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yC(e)}function mC(e,t){t&&Array.isArray(e)?e.forEach((function(e){return mC(e,!1)})):sS("string"===typeof e||"symbol"===yC(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(dC||(dC={}));var gC="undefined"!==typeof global?global:self,kC=gC.MutationObserver||gC.WebKitMutationObserver;function bC(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}var wC="function"===typeof kC?function(e){var t=1,n=new kC(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:bC,xC=function(){function e(){var t=this;Y(this,e),this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=function(){for(var e=t.queue;t.index<e.length;){var n=t.index;if(t.index++,e[n].call(),t.index>t.capacity){for(var r=0,i=e.length-t.index;r<i;r++)e[r]=e[r+t.index];e.length-=t.index,t.index=0}}e.length=0,t.index=0,t.flushing=!1},this.registerPendingError=function(e){t.pendingErrors.push(e),t.requestErrorThrow()},this.requestFlush=wC(this.flush),this.requestErrorThrow=bC((function(){if(t.pendingErrors.length)throw t.pendingErrors.shift()}))}return J(e,[{key:"enqueueTask",value:function(e){var t=this.queue,n=this.requestFlush;t.length||(n(),this.flushing=!0),t[t.length]=e}}]),e}(),IC=function(){function e(t,n){Y(this,e),this.onError=t,this.release=n,this.task=null}return J(e,[{key:"call",value:function(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}}]),e}(),EC=function(){function e(t){Y(this,e),this.onError=t,this.freeTasks=[]}return J(e,[{key:"create",value:function(e){var t=this.freeTasks,n=t.length?t.pop():new IC(this.onError,(function(e){return t[t.length]=e}));return n.task=e,n}}]),e}(),TC=new xC,_C=new EC(TC.registerPendingError);function SC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return DC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OC(e){var t=(vC++).toString();switch(e){case dC.SOURCE:return"S".concat(t);case dC.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function NC(e){switch(e[0]){case"S":return dC.SOURCE;case"T":return dC.TARGET;default:sS(!1,"Cannot parse handler ID: ".concat(e))}}function AC(e,t){var n=e.entries(),r=!1;do{var i=n.next(),a=i.done;if(CC(i.value,2)[1]===t)return!0;r=!!a}while(!r);return!1}var PC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}var t,n,r;return t=e,n=[{key:"addSource",value:function(e,t){mC(e),function(e){sS("function"===typeof e.canDrag,"Expected canDrag to be a function."),sS("function"===typeof e.beginDrag,"Expected beginDrag to be a function."),sS("function"===typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(dC.SOURCE,e,t);return this.store.dispatch(function(e){return{type:RS,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){mC(e,!0),function(e){sS("function"===typeof e.canDrop,"Expected canDrop to be a function."),sS("function"===typeof e.hover,"Expected hover to be a function."),sS("function"===typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(dC.TARGET,e,t);return this.store.dispatch(function(e){return{type:LS,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return AC(this.dragSources,e)||AC(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return sS(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}},{key:"getTarget",value:function(e){return sS(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return sS(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return sS(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return NC(e)===dC.SOURCE}},{key:"isTargetId",value:function(e){return NC(e)===dC.TARGET}},{key:"removeSource",value:function(e){var t,n=this;sS(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:MS,payload:{sourceId:e}}}(e)),t=function(){n.dragSources.delete(e),n.types.delete(e)},TC.enqueueTask(_C.create(t))}},{key:"removeTarget",value:function(e){sS(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:FS,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);sS(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){sS(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=OC(e);return this.types.set(r,t),e===dC.SOURCE?this.dragSources.set(r,n):e===dC.TARGET&&this.dropTargets.set(r,n),r}}],n&&SC(t.prototype,n),r&&SC(t,r),e}();function RC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var LC=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSetUp=!1,this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;t.backend&&(e&&!t.isSetUp?(t.backend.setup(),t.isSetUp=!0):!e&&t.isSetUp&&(t.backend.teardown(),t.isSetUp=!1))};var r=function(e){var t="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return wS(ZS,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n);this.store=r,this.monitor=new pC(r,new PC(r)),r.subscribe(this.handleRefCountChange)}var t,n,r;return t=e,n=[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch,n=function(e){return{beginDrag:nC(e),publishDragSource:rC(e),hover:aC(e),drop:cC(e),endDrag:lC(e)}}(this);return Object.keys(n).reduce((function(r,i){var a,o=n[i];return r[i]=(a=o,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=a.apply(e,r);"undefined"!==typeof o&&t(o)}),r}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}],n&&RC(t.prototype,n),r&&RC(t,r),e}();function MC(e,t,n,r){var i=new LC(r),a=e(i,t,n);return i.receiveBackend(a),i}var FC=r.createContext({dragDropManager:void 0});function UC(){var e=(0,r.useContext)(FC).dragDropManager;return sS(null!=e,"Expected drag drop context"),e}function jC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var VC=!1,BC=!1,zC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){sS(!VC,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return VC=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{VC=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;sS(!BC,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return BC=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{BC=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&jC(t.prototype,n),r&&jC(t,r),e}();function qC(e,t){"function"===typeof e?e(t):e.current=t}function KC(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(0,r.isValidElement)(t)){var i=t;return e(i,n),i}var a=t;!function(e){if("string"!==typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}(a);var o=n?function(t){return e(t,n)}:e;return function(e,t){var n=e.ref;return sS("string"!==typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?(0,r.cloneElement)(e,{ref:function(e){qC(n,e),qC(t,e)}}):(0,r.cloneElement)(e,{ref:t})}(a,o)}}function GC(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var i=KC(r);t[n]=function(){return i}}})),t}function WC(e){return WC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WC(e)}function HC(e){return null!==e&&"object"===WC(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function QC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var YC=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=GC({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,HC(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,HC(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!lS(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!lS(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}])&&QC(t.prototype,n),r&&QC(t,r),e}();function $C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return JC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XC(e){return XC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XC(e)}function ZC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return eD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tD(e){var t=(0,r.useRef)(e);t.current=e,sS(null!=e.item,"item must be defined"),sS(null!=e.item.type,"item type must be defined");var n=ZC(function(){var e=UC();return[(0,r.useMemo)((function(){return new zC(e)}),[e]),(0,r.useMemo)((function(){return new YC(e.getBackend())}),[e])]}(),2),i=n[0],a=n[1];!function(e,t,n){var i=UC(),a=(0,r.useMemo)((function(){return{beginDrag:function(){var n=e.current,r=n.begin,i=n.item;if(r){var a=r(t);return sS(null==a||"object"===XC(a),"dragSpec.begin() must either return an object, undefined, or null"),a||i||{}}return i||{}},canDrag:function(){return"boolean"===typeof e.current.canDrag?e.current.canDrag:"function"!==typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,r){var i=e.current.isDragging;return i?i(t):r===n.getSourceId()},endDrag:function(){var r=e.current.end;r&&r(t.getItem(),t),n.reconnect()}}}),[]);cS((function(){var r=function(e,t,n){var r=n.getRegistry(),i=r.addSource(e,t);return[i,function(){return r.removeSource(i)}]}(e.current.item.type,a,i),o=$C(r,2),u=o[0],s=o[1];return t.receiveHandlerId(u),n.receiveHandlerId(u),s}),[])}(t,i,a);var o=vS(i,t.current.collect||function(){return{}},(function(){return a.reconnect()})),u=(0,r.useMemo)((function(){return a.hooks.dragSource()}),[a]),s=(0,r.useMemo)((function(){return a.hooks.dragPreview()}),[a]);return cS((function(){a.dragSourceOptions=t.current.options||null,a.reconnect()}),[a]),cS((function(){a.dragPreviewOptions=t.current.previewOptions||null,a.reconnect()}),[a]),[o,u,s]}var nD=r.memo((function(e){var t=e.connect,n=e.src;return r.useEffect((function(){if("undefined"!==typeof Image){var e=!1,r=new Image;return r.src=n,r.onload=function(){t(r),e=!0},function(){e&&t(null)}}})),null}));function rD(e){var t=e.piece,r=t.type,i=t.color,a=e.position,o=d(tD({type:"piece",item:{type:"piece",id:"".concat(a,"_").concat(r,"_").concat(i)},collect:function(e){return{isDragging:!!e.isDragging()}}}),3),u=o[0].isDragging,s=o[1],c=o[2],l=n(715)("./".concat(r,"_").concat(i,".png"));return(0,oS.jsxs)(oS.Fragment,{children:[(0,oS.jsx)(nD,{connect:c,src:l}),(0,oS.jsx)("div",{className:"piece-container",ref:s,style:{opacity:u?0:1},children:(0,oS.jsx)("img",{src:l,alt:"",className:"piece"})})]})}function iD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}nD.displayName="DragPreviewImage";var aD=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=GC({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,HC(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,n,r;return t=e,(n=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!lS(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}])&&iD(t.prototype,n),r&&iD(t,r),e}();function oD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var uD=!1,sD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;sS(!uD,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return uD=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{uD=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&oD(t.prototype,n),r&&oD(t,r),e}();function cD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return lD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dD(e){var t=(0,r.useRef)(e);t.current=e,sS(null!=e.accept,"accept must be defined");var n=fD(function(){var e=UC();return[(0,r.useMemo)((function(){return new sD(e)}),[e]),(0,r.useMemo)((function(){return new aD(e.getBackend())}),[e])]}(),2),i=n[0],a=n[1];!function(e,t,n){var i=UC(),a=(0,r.useMemo)((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);cS((function(){var r=function(e,t,n){var r=n.getRegistry(),i=r.addTarget(e,t);return[i,function(){return r.removeTarget(i)}]}(e.current.accept,a,i),o=cD(r,2),u=o[0],s=o[1];return t.receiveHandlerId(u),n.receiveHandlerId(u),s}),[t,n])}(t,i,a);var o=vS(i,t.current.collect||function(){return{}},(function(){return a.reconnect()})),u=(0,r.useMemo)((function(){return a.hooks.dropTarget()}),[a]);return cS((function(){a.dropTargetOptions=e.options||null,a.reconnect()}),[e.options]),[o,u]}var pD,vD=["q","r","n","b"];function yD(e){var t=e.promotion,r=t.from,i=t.to,a=t.color;return(0,oS.jsx)("div",{className:"board",children:vD.map((function(e,t){return(0,oS.jsx)("div",{className:"promote-square",children:(0,oS.jsx)(uS,{white:t%3!==0,children:(0,oS.jsx)("div",{className:"piece-container",onClick:function(){return tS(r,i,e)},children:(0,oS.jsx)("img",{src:n(715)("./".concat(e,"_").concat(a,".png")),alt:"",className:"piece cursor-pointer"})})})},t)}))})}function mD(e){var t=e.piece,n=e.black,i=e.position,a=d((0,r.useState)(null),2),o=a[0],u=a[1],s=dD({accept:"piece",drop:function(e){console.log(e),function(e,t){var n,r=$_.moves({verbose:!0}).filter((function(e){return e.promotion}));r.some((function(n){return"".concat(n.from,":").concat(n.to)==="".concat(e,":").concat(t)}))&&rS(n={from:e,to:t,color:r[0].color}),n||tS(e,t)}(d(e.id.split("_"),1)[0],i)}}),c=d(s,2)[1];return(0,r.useEffect)((function(){var e=W_.subscribe((function(e){var t=e.pendingPromotion;return t&&t.to===i?u(t):u(null)}));return function(){return e.unsubscribe()}}),[i]),(0,oS.jsx)("div",{className:"board-square",ref:c,children:(0,oS.jsx)(uS,{black:n,children:o?(0,oS.jsx)(yD,{promotion:o}):t?(0,oS.jsx)(rD,{piece:t,position:i}):null})})}function gD(e){var t=e.board,n=e.position,i="w"===n?["a","b","c","d","e","f","g","h"]:["h","g","f","e","d","c","b","a"],a=d((0,r.useState)([]),2),o=a[0],u=a[1];function s(e){return{x:"w"===n?e%8:Math.abs(e%8-7),y:"w"===n?Math.abs(Math.floor(e/8)-7):Math.floor(e/8)}}function c(e){var t=s(e);return(t.x+t.y)%2===1}function l(e){var t=s(e),n=t.x,r=t.y;return"".concat(["a","b","c","d","e","f","g","h"][n]).concat(r+1)}return(0,r.useEffect)((function(){u("w"===n?t.flat():t.flat().reverse())}),[t,n]),(0,oS.jsxs)("div",{className:"board",children:[o.map((function(e,t){return(0,oS.jsx)("div",{className:"square",children:(0,oS.jsx)(mD,{piece:e,black:c(t),position:l(t)})},t)})),(0,oS.jsx)("div",{className:"grid",children:i.map((function(e){return(0,oS.jsx)("div",{className:"grid-item",children:e},e)}))})]})}function kD(){return kD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kD.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(pD||(pD={}));var bD,wD="popstate";function xD(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function ID(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function ED(e,t){return{usr:e.state,key:e.key,idx:t}}function TD(e,t,n,r){return void 0===n&&(n=null),kD({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?SD(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function _D(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function SD(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function CD(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=pD.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=pD.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:y.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:_D(e);return xD(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(kD({},c.state,{idx:h}),""));var y={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(wD,p),f=e,function(){o.removeEventListener(wD,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=pD.Push;var r=TD(y.location,e,t);n&&n(r,e);var i=ED(r,h=d()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:y.location,delta:1})},replace:function(e,t){l=pD.Replace;var r=TD(y.location,e,t);n&&n(r,e);var i=ED(r,h=d()),a=y.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(bD||(bD={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function DD(e,t,n){void 0===n&&(n="/");var r=qD(("string"===typeof t?SD(t):t).pathname||"/",n);if(null==r)return null;var i=OD(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=VD(i[o],zD(r));return a}function OD(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(xD(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=HD([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(xD(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),OD(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:jD(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=X(ND(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function ND(e){var t=e.split("/");if(0===t.length)return[];var n=ln(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=ND(i.join("/")),s=[];return s.push.apply(s,b(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,b(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var AD=/^:\w+$/,PD=3,RD=2,LD=1,MD=10,FD=-2,UD=function(e){return"*"===e};function jD(e,t){var n=e.split("/"),r=n.length;return n.some(UD)&&(r+=FD),t&&(r+=RD),n.filter((function(e){return!UD(e)})).reduce((function(e,t){return e+(AD.test(t)?PD:""===t?LD:MD)}),r)}function VD(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=BD({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:HD([i,l.pathname]),pathnameBase:QD(HD([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=HD([i,l.pathnameBase]))}return a}function BD(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);ID("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=d(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return ID(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function zD(e){try{return decodeURI(e)}catch(t){return ID(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function qD(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function KD(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function GD(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function WD(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=SD(e):(xD(!(i=kD({},e)).pathname||!i.pathname.includes("?"),KD("?","pathname","search",i)),xD(!i.pathname||!i.pathname.includes("#"),KD("#","pathname","hash",i)),xD(!i.search||!i.search.includes("#"),KD("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?SD(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:YD(a),hash:$D(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var HD=function(e){return e.join("/").replace(/\/\/+/g,"/")},QD=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},YD=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},$D=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},JD=function(e){te(n,e);var t=ie(n);function n(){return Y(this,n),t.apply(this,arguments)}return J(n)}(oe(Error));function XD(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ZD=["post","put","patch","delete"],eO=(new Set(ZD),["get"].concat(ZD));new Set(eO),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var tO="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},nO=r.useState,rO=r.useEffect,iO=r.useLayoutEffect,aO=r.useDebugValue;function oO(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!tO(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var uO=r.createContext(null);var sO=r.createContext(null);var cO=r.createContext(null);var lO=r.createContext(null);var fO=r.createContext(null);var hO=r.createContext({outlet:null,matches:[]});var dO=r.createContext(null);function pO(){return pO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pO.apply(this,arguments)}function vO(){return null!=r.useContext(fO)}function yO(){return vO()||xD(!1),r.useContext(fO).location}function mO(){vO()||xD(!1);var e=r.useContext(lO),t=e.basename,n=e.navigator,i=r.useContext(hO).matches,a=yO().pathname,o=JSON.stringify(GD(i).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);r.useEffect((function(){u.current=!0}));var s=r.useCallback((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=WD(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:HD([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return s}function gO(){var e=function(){var e,t=r.useContext(dO),n=EO(bO.UseRouteError),i=TO(bO.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=XD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var kO,bO,wO=function(e){te(n,e);var t=ie(n);function n(e){var r;return Y(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return J(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(hO.Provider,{value:this.props.routeContext},r.createElement(dO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function xO(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(uO);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(hO.Provider,{value:t},i)}function IO(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||xD(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=null;n&&(c=o.route.ErrorBoundary?r.createElement(o.route.ErrorBoundary,null):o.route.errorElement?o.route.errorElement:r.createElement(gO,null));var l=t.concat(i.slice(0,u+1)),f=function(){var t=e;return s?t=c:o.route.Component?t=r.createElement(o.route.Component,null):o.route.element&&(t=o.route.element),r.createElement(xO,{match:o,routeContext:{outlet:e,matches:l},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===u)?r.createElement(wO,{location:n.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function EO(e){var t=r.useContext(sO);return t||xD(!1),t}function TO(e){var t=function(e){var t=r.useContext(hO);return t||xD(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||xD(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(kO||(kO={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(bO||(bO={}));var _O;function SO(e){xD(!1)}function CO(e){var t=e.basename,n=void 0===t?"/":t,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?pD.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;vO()&&xD(!1);var h=n.replace(/^\/*/,"/"),d=r.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=SD(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,I=p.key,E=void 0===I?"default":I,T=r.useMemo((function(){var e=qD(y,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:x,key:E},navigationType:s}}),[h,y,g,b,x,E,s]);return null==T?null:r.createElement(lO.Provider,{value:d},r.createElement(fO.Provider,{children:a,value:T}))}function DO(e){var t=e.children,n=e.location,i=r.useContext(uO);return function(e,t){vO()||xD(!1);var n,i=r.useContext(lO).navigator,a=r.useContext(sO),o=r.useContext(hO).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,yO());if(t){var f,h="string"===typeof t?SD(t):t;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||xD(!1),n=h}else n=l;var d=n.pathname||"/",p=DD(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=IO(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:HD([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:HD([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return t&&v?r.createElement(fO.Provider,{value:{location:pO({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:pD.Pop}},v):v}(i&&!t?i.router.routes:NO(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(_O||(_O={}));var OO=new Promise((function(){}));r.Component;function NO(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(b(t),[i]);if(e.type!==r.Fragment){e.type!==SO&&xD(!1),e.props.index&&e.props.children&&xD(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=NO(e.props.children,a)),n.push(o)}else n.push.apply(n,NO(e.props.children,a))}})),n}var AO=function(){var e=d((0,r.useState)([]),2),t=e[0],n=e[1],i=d((0,r.useState)([]),2),a=i[0],u=i[1],c=d((0,r.useState)([]),2),l=c[0],f=c[1],h=function(){var e=r.useContext(hO).matches,t=e[e.length-1];return t?t.params:{}}().id,p=d((0,r.useState)(null),2),v=p[0],y=p[1],m=d((0,r.useState)(!0),2),g=m[0],k=m[1],b=d((0,r.useState)(""),2),w=b[0],x=b[1],I=d((0,r.useState)({}),2),E=I[0],T=I[1],_=d((0,r.useState)(),2),S=_[0],C=_[1],D=mO(),O=window.location.href;function N(){return(N=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(O);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if((0,r.useEffect)((function(){var e;function t(){return t=s(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J_("local"!==h?j_.doc("games/".concat(h)):null);case 2:r=t.sent,y(r),k(!1),r||(e=W_.subscribe((function(e){n(e.board),u(e.isGameOver),f(e.result),"local"!==h&&C(e.position),x(e.status),T(e)})));case 6:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e&&e.unsubscribe()}}),[h]),g)return"Loading ...";if("notfound"===v)return"Game not found";if("intruder"===v)return"Game already in progress";var A="w"===S?" blue-pink-bg":" pink-blue-bg";return(0,oS.jsxs)("div",{className:"app-container",children:[a&&(0,oS.jsxs)("h2",{className:"game-over-text",children:["Game Over",(0,oS.jsx)("button",{className:"game-over-button",onClick:s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z_();case 2:D("/");case 3:case"end":return e.stop()}}),e)}))),children:(0,oS.jsx)("span",{children:"New Game"})})]}),(0,oS.jsxs)("div",{className:"board-container ".concat(A),children:[E.opponent&&E.opponent.name&&(0,oS.jsx)("span",{className:"tag is-link userName opponent",children:E.opponent.name}),(0,oS.jsx)(gD,{board:t,position:"local"!==h?S:"w"}),E.member&&E.member.name&&(0,oS.jsx)("span",{className:"tag is-link userName",children:E.member.name})]}),l&&(0,oS.jsx)("p",{className:"result-text",children:l}),"waiting"===w&&(0,oS.jsxs)("div",{className:"notification is-link share-game",children:[(0,oS.jsx)("strong",{children:"Share the game"}),(0,oS.jsx)("br",{}),(0,oS.jsx)("br",{}),(0,oS.jsxs)("div",{className:"field has-addons",children:[(0,oS.jsx)("div",{className:"control is-expanded",children:(0,oS.jsx)("input",{type:"text",name:"",id:"",className:"input",readOnly:!0,value:O})}),(0,oS.jsx)("div",{className:"control",children:(0,oS.jsx)("button",{className:"button is-info",onClick:function(){return N.apply(this,arguments)},children:"Copy"})})]})]})]})};function PO(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),CD((function(e,t){var n=e.location;return TD("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:_D(t)}),null,t)));var u=o.current,s=d(r.useState({action:u.action,location:u.location}),2),c=s[0],l=s[1];return r.useLayoutEffect((function(){return u.listen(l)}),[u]),r.createElement(CO,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var RO,LO;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(RO||(RO={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(LO||(LO={}));function MO(){var e=V_.currentUser,t=mO(),n=d((0,r.useState)(!1),2),i=n[0],a=n[1];function u(){a(!i)}function c(){return c=s(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={uid:e.uid,piece:"random"===r?["b","w"][Math.round(Math.random())]:r,name:localStorage.getItem("userName"),creator:!0},a={status:"waiting",members:[i],gameId:"".concat(Math.random().toString(36).substr(2,9),"_").concat(Date.now())},n.next=4,j_.collection("games").doc(a.gameId).set(a);case 4:console.log("Doc set"),t("/game/".concat(a.gameId));case 6:case"end":return n.stop()}}),n)}))),c.apply(this,arguments)}return(0,oS.jsxs)(oS.Fragment,{children:[(0,oS.jsxs)("div",{className:"columns home",children:[(0,oS.jsx)("div",{className:"column has-background-primary home-columns",children:(0,oS.jsx)("button",{className:"button is-link",children:"Play Locally"})}),(0,oS.jsx)("div",{className:"column has-background-link home-columns",children:(0,oS.jsx)("button",{className:"button is-primary",onClick:u,children:"Play Online"})})]}),(0,oS.jsxs)("div",{className:"modal ".concat(i?"is-active":""),children:[(0,oS.jsx)("div",{className:"model-background"}),(0,oS.jsxs)("div",{className:"card",children:[(0,oS.jsx)("div",{className:"card-content",children:"Please select the piece you want to start"}),(0,oS.jsx)("footer",{className:"card-footer",children:[{label:"Black",value:"b"},{label:"White",value:"w"},{label:"Random",value:"r"}].map((function(e){var t=e.label,n=e.value;return(0,oS.jsx)("span",{className:"card-footer-item pointer",onClick:function(){return function(e){return c.apply(this,arguments)}(n)},children:t},n)}))})]}),(0,oS.jsx)("button",{className:"modal-close is-large",onClick:u})]})]})}function FO(){var e=d((0,r.useState)(""),2),t=e[0],n=e[1];function i(){return(i=s(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),localStorage.setItem("userName",t),e.next=4,zi(V_);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,oS.jsxs)("form",{className:"user-form",onSubmit:function(e){return i.apply(this,arguments)},children:[(0,oS.jsx)("h1",{children:"Enter your name to start"}),(0,oS.jsx)("br",{}),(0,oS.jsx)("div",{className:"field",children:(0,oS.jsx)("p",{className:"control",children:(0,oS.jsx)("input",{type:"text",name:"",id:"",className:"input",placeholder:"Name",value:t,onChange:function(e){return n(e.target.value)},required:!0})})}),(0,oS.jsx)("div",{className:"filed",children:(0,oS.jsx)("p",{className:"control",children:(0,oS.jsx)("button",{className:"button is-success form-button",type:"submit",children:"Start"})})})]})}function UO(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function jO(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var VO=function(){return VO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},VO.apply(this,arguments)},BO=function(e){return{loading:void 0===e||null===e,value:e}},zO=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return VO(VO({},e),{error:t.error,loading:!1,value:void 0});case"reset":return BO(t.defaultValue);case"value":return VO(VO({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),BO(t)),i=n[0],a=n[1],o=(0,r.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),u=(0,r.useCallback)((function(e){a({type:"error",error:e})}),[]),s=(0,r.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},qO=function(e,t){var n=zO((function(){return e.currentUser})),i=n.error,a=n.loading,o=n.setError,u=n.setValue,s=n.value;return(0,r.useEffect)((function(){var n=function(e,t,n,r){return Le(e).onAuthStateChanged(t,n,r)}(e,(function(e){return UO(void 0,void 0,void 0,(function(){var n;return jO(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){n()}}),[e]),[s,a,i]};function KO(){var e=d(qO(V_),3),t=e[0],n=e[1],r=e[2];return n?"loading...":r?"There was an error":t?(0,oS.jsx)(PO,{children:(0,oS.jsxs)(DO,{children:[(0,oS.jsx)(SO,{path:"/",element:(0,oS.jsx)(MO,{})}),(0,oS.jsx)(SO,{path:"/game/:id",element:(0,oS.jsx)(AO,{})})]})}):(0,oS.jsx)(FO,{})}function GO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return WO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HO(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var QO=0,YO=(0,r.memo)((function(e){var t=e.children,n=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JO(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=t;i[$O]||(i[$O]=function(e,t,n,r){return{dragDropManager:MC(e,t,n,r)}}(e,t,n,r));return i[$O]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(HO(e,["children"])),i=GO(n,2),a=i[0],o=i[1];return r.useEffect((function(){return o&&QO++,function(){o&&(0===--QO&&(JO()[$O]=null))}}),[]),r.createElement(FC.Provider,{value:a},t)}));YO.displayName="DndProvider";var $O=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function JO(){return"undefined"!==typeof n.g?n.g:window}function XO(e){var t=null;return function(){return null==t&&(t=e()),t}}function ZO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var eN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,(n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e){return i.push(e)})),i}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}])&&ZO(t.prototype,n),r&&ZO(t,r),e}(),tN=XO((function(){return/firefox/i.test(navigator.userAgent)})),nN=XO((function(){return Boolean(window.safari)}));function rN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var iN=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,i=[],a=0;a<r;a++)i.push(a);i.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var o,u,s=[],c=[],l=[],f=0;f<r-1;f++)o=t[f+1]-t[f],u=n[f+1]-n[f],c.push(o),s.push(u),l.push(u/o);for(var h=[l[0]],d=0;d<c.length-1;d++){var p=l[d],v=l[d+1];if(p*v<=0)h.push(0);else{o=c[d];var y=c[d+1],m=o+y;h.push(3*m/((m+y)/p+(m+o)/v))}}h.push(l[l.length-1]);for(var g,k=[],b=[],w=0;w<h.length-1;w++){g=l[w];var x=h[w],I=1/c[w],E=x+h[w+1]-g-g;k.push((g-x-E)*I),b.push(E*I*I)}this.xs=t,this.ys=n,this.c1s=h,this.c2s=k,this.c3s=b}var t,n,r;return t=e,n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,i=this.c2s,a=this.c3s,o=t.length-1;if(e===t[o])return n[o];for(var u,s=0,c=a.length-1;s<=c;){var l=t[u=Math.floor(.5*(s+c))];if(l<e)s=u+1;else{if(!(l>e))return n[u];c=u-1}}var f=e-t[o=Math.max(0,c)],h=f*f;return n[o]+r[o]*f+i[o]*h+a[o]*f*h}}],n&&rN(t.prototype,n),r&&rN(t,r),e}(),aN=1;function oN(e){var t=e.nodeType===aN?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function uN(e){return{x:e.clientX,y:e.clientY}}function sN(e,t,n,r,i){var a=function(e){var t;return"IMG"===e.nodeName&&(tN()||!(null===(t=document.documentElement)||void 0===t?void 0:t.contains(e)))}(t),o=oN(a?e:t),u={x:n.x-o.x,y:n.y-o.y},s=e.offsetWidth,c=e.offsetHeight,l=r.anchorX,f=r.anchorY,h=function(e,t,n,r){var i=e?t.width:n,a=e?t.height:r;return nN()&&e&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}(a,t,s,c),d=h.dragPreviewWidth,p=h.dragPreviewHeight,v=i.offsetX,y=i.offsetY,m=0===y||y;return{x:0===v||v?v:new iN([0,.5,1],[u.x,u.x/s*d,u.x+d-s]).interpolate(l),y:m?y:function(){var e=new iN([0,.5,1],[u.y,u.y/c*p,u.y+p-c]).interpolate(f);return nN()&&a&&(e+=(window.devicePixelRatio-1)*p),e}()}}var cN,lN="__NATIVE_FILE__",fN="__NATIVE_URL__",hN="__NATIVE_TEXT__";function dN(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function pN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vN=(pN(cN={},lN,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),pN(cN,fN,{exposeProperties:{urls:function(e,t){return dN(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),pN(cN,hN,{exposeProperties:{text:function(e,t){return dN(e,t,"")}},matchesTypes:["Text","text/plain"]}),cN);function yN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&yN(t.prototype,n),r&&yN(t,r),e}();function gN(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(vN).filter((function(e){return vN[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function kN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!==typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&kN(t.prototype,n),r&&kN(t,r),e}();function wN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wN(Object(n),!0).forEach((function(t){IN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var TN=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){var t=r.sourceNodes.get(e);return t&&oN(t)||null},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.currentNativeHandle&&r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return Boolean(e&&r.document&&r.document.body&&document.body.contains(e))},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=uN(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var i=e.dataTransfer,a=gN(i);if(r.monitor.isDragging()){if(i&&"function"===typeof i.setDragImage){var o=r.monitor.getSourceId(),u=r.sourceNodes.get(o),s=r.sourcePreviewNodes.get(o)||u;if(s){var c=r.getCurrentSourcePreviewNodeOptions(),l=sN(u,s,n,{anchorX:c.anchorX,anchorY:c.anchorY},{offsetX:c.offsetX,offsetY:c.offsetY});i.setDragImage(s,l.x,l.y)}}try{null===i||void 0===i||i.setData("application/json",{})}catch(f){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(a)r.beginDragNativeItem(a);else{if(i&&!i.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=gN(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,tN()||r.actions.hover(t,{clientOffset:uN(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:uN(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){var t;(r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem())&&(null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:uN(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"===typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new bN(n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new eN(this.isNodeInDocument)}var n,r,i;return n=e,(r=[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var i=function(t){return r.handleDragStart(t,e)},a=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",a),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",a),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},i=function(t){return n.handleDragOver(t,e)},a=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",a),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",a)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return xN({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return xN({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(t).some((function(n){return t[n]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new mN(vN[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}])&&EN(n.prototype,r),i&&EN(n,i),e}();i.render((0,oS.jsx)(r.StrictMode,{children:(0,oS.jsx)(YO,{backend:function(e,t){return new TN(e,t)},children:(0,oS.jsx)(KO,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.190e1cb8.js.map